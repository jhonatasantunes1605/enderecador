{"data":"Ly8gU2NyaXB0IHBhcmEgY29ycmlnaXIgVE9ET1Mgb3Mgd2FyZWhvdXNlSWQgZGFzIHJ1YXMgZXhpc3RlbnRlcwoKaW1wb3J0IHsgZ29vZ2xlU2hlZXRzU2VydmljZSB9IGZyb20gIi4uL2xpYi9nb29nbGUtc2hlZXRzIgoKYXN5bmMgZnVuY3Rpb24gZml4V2FyZWhvdXNlSWRzTm93KCkgewogIGNvbnNvbGUubG9nKCI9PT0gQ09SUklHSU5ETyBXQVJFSE9VU0UgSURTIEFHT1JBID09PSIpCgogIHRyeSB7CiAgICBhd2FpdCBnb29nbGVTaGVldHNTZXJ2aWNlLmluaXQoKQoKICAgIC8vIDEuIEJ1c2NhciBnYWxww7VlcwogICAgY29uc3Qgd2FyZWhvdXNlcyA9IGF3YWl0IGdvb2dsZVNoZWV0c1NlcnZpY2UuZ2V0V2FyZWhvdXNlcygpCiAgICBjb25zb2xlLmxvZyhgXG5HYWxww7VlcyBlbmNvbnRyYWRvczogJHt3YXJlaG91c2VzLmxlbmd0aH1gKQoKICAgIHdhcmVob3VzZXMuZm9yRWFjaCgodywgaSkgPT4gewogICAgICBjb25zb2xlLmxvZyhgICAke2kgKyAxfS4gJHt3Lm5hbWV9IC0gSUQ6ICR7dy5pZH1gKQogICAgfSkKCiAgICAvLyAyLiBCdXNjYXIgdG9kYXMgYXMgcnVhcwogICAgY29uc3QgZG9jID0gZ29vZ2xlU2hlZXRzU2VydmljZS5kb2MKICAgIGNvbnN0IGFpc2xlc1NoZWV0ID0gZG9jLnNoZWV0c0J5VGl0bGVbImFpc2xlcyJdCiAgICBjb25zdCByb3dzID0gYXdhaXQgYWlzbGVzU2hlZXQuZ2V0Um93cygpCgogICAgY29uc29sZS5sb2coYFxuUnVhcyBuYSBwbGFuaWxoYTogJHtyb3dzLmxlbmd0aH1gKQoKICAgIC8vIDMuIE1vc3RyYXIgZXN0YWRvIGF0dWFsCiAgICBjb25zb2xlLmxvZygiXG5Fc3RhZG8gYXR1YWwgZGFzIHJ1YXM6IikKICAgIHJvd3MuZm9yRWFjaCgocm93LCBpKSA9PiB7CiAgICAgIGNvbnN0IG5hbWUgPSByb3cuZ2V0KCJuYW1lIikKICAgICAgY29uc3QgY3VycmVudFdhcmVob3VzZUlkID0gcm93LmdldCgid2FyZWhvdXNlSWQiKQogICAgICBjb25zb2xlLmxvZyhgICAke2kgKyAxfS4gIiR7bmFtZX0iIC0gV2FyZWhvdXNlSUQ6ICIke2N1cnJlbnRXYXJlaG91c2VJZH0iYCkKICAgIH0pCgogICAgLy8gNC4gRW5jb250cmFyIG8gZ2FscMOjbyBTYW5hdXRpY2EKICAgIGNvbnN0IHNhbmF1dGljYVdhcmVob3VzZSA9IHdhcmVob3VzZXMuZmluZCgodykgPT4gdy5uYW1lID09PSAiU2FuYXV0aWNhIikKICAgIGlmICghc2FuYXV0aWNhV2FyZWhvdXNlKSB7CiAgICAgIGNvbnNvbGUubG9nKCLinYwgR2FscMOjbyBTYW5hdXRpY2EgbsOjbyBlbmNvbnRyYWRvIikKICAgICAgcmV0dXJuCiAgICB9CgogICAgY29uc29sZS5sb2coYFxuR2FscMOjbyBTYW5hdXRpY2EgZW5jb250cmFkbzogJHtzYW5hdXRpY2FXYXJlaG91c2UuaWR9YCkKCiAgICAvLyA1LiBDb3JyaWdpciBUT0RBUyBhcyBydWFzIHBhcmEgbyBnYWxww6NvIFNhbmF1dGljYQogICAgY29uc29sZS5sb2coIlxuQ29ycmlnaW5kbyB3YXJlaG91c2VJZCBkZSB0b2RhcyBhcyBydWFzLi4uIikKCiAgICBsZXQgY29ycmVjdGVkQ291bnQgPSAwCiAgICBmb3IgKGNvbnN0IHJvdyBvZiByb3dzKSB7CiAgICAgIGNvbnN0IGFpc2xlTmFtZSA9IHJvdy5nZXQoIm5hbWUiKQogICAgICBjb25zdCBjdXJyZW50V2FyZWhvdXNlSWQgPSByb3cuZ2V0KCJ3YXJlaG91c2VJZCIpCgogICAgICBpZiAoY3VycmVudFdhcmVob3VzZUlkICE9PSBzYW5hdXRpY2FXYXJlaG91c2UuaWQpIHsKICAgICAgICBjb25zb2xlLmxvZyhgICBDb3JyaWdpbmRvICIke2Fpc2xlTmFtZX0iOmApCiAgICAgICAgY29uc29sZS5sb2coYCAgICBEZTogIiR7Y3VycmVudFdhcmVob3VzZUlkfSJgKQogICAgICAgIGNvbnNvbGUubG9nKGAgICAgUGFyYTogIiR7c2FuYXV0aWNhV2FyZWhvdXNlLmlkfSJgKQoKICAgICAgICByb3cuc2V0KCJ3YXJlaG91c2VJZCIsIHNhbmF1dGljYVdhcmVob3VzZS5pZCkKICAgICAgICBhd2FpdCByb3cuc2F2ZSgpCiAgICAgICAgY29ycmVjdGVkQ291bnQrKwoKICAgICAgICBjb25zb2xlLmxvZyhgICAgIOKchSBDb3JyaWdpZG8hYCkKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZyhgICAiJHthaXNsZU5hbWV9IiBqw6EgZXN0w6EgY29ycmV0b2ApCiAgICAgIH0KICAgIH0KCiAgICBjb25zb2xlLmxvZyhgXG7inIUgJHtjb3JyZWN0ZWRDb3VudH0gcnVhcyBjb3JyaWdpZGFzIWApCgogICAgLy8gNi4gVmVyaWZpY2FyIHJlc3VsdGFkbwogICAgY29uc29sZS5sb2coIlxuVmVyaWZpY2FuZG8gcmVzdWx0YWRvLi4uIikKICAgIGNvbnN0IGFpc2xlc0FmdGVyRml4ID0gYXdhaXQgZ29vZ2xlU2hlZXRzU2VydmljZS5nZXRBaXNsZXNCeVdhcmVob3VzZShzYW5hdXRpY2FXYXJlaG91c2UuaWQpCiAgICBjb25zb2xlLmxvZyhgXG5SdWFzIGVuY29udHJhZGFzIHBhcmEgU2FuYXV0aWNhOiAke2Fpc2xlc0FmdGVyRml4Lmxlbmd0aH1gKQoKICAgIGFpc2xlc0FmdGVyRml4LmZvckVhY2goKGFpc2xlLCBpKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGAgICR7aSArIDF9LiAke2Fpc2xlLm5hbWV9ICgke2Fpc2xlLmlkfSlgKQogICAgfSkKCiAgICBpZiAoYWlzbGVzQWZ0ZXJGaXgubGVuZ3RoID4gMCkgewogICAgICBjb25zb2xlLmxvZygiXG7wn46JIFNVQ0VTU08hIEFzIHJ1YXMgYWdvcmEgZGV2ZW0gYXBhcmVjZXIgbm8gYXBwISIpCiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmxvZygiXG7inYwgQWluZGEgaMOhIGFsZ3VtIHByb2JsZW1hLi4uIikKICAgIH0KICB9IGNhdGNoIChlcnJvcikgewogICAgY29uc29sZS5lcnJvcigi4p2MIEVycm8gZHVyYW50ZSBhIGNvcnJlw6fDo286IiwgZXJyb3IpCiAgfQoKICBjb25zb2xlLmxvZygiXG49PT0gRklNIERBIENPUlJFw4fDg08gPT09IikKfQoKLy8gRXhlY3V0YXIgaW1lZGlhdGFtZW50ZQpmaXhXYXJlaG91c2VJZHNOb3coKQo="}