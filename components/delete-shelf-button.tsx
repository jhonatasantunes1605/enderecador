{"data":"InVzZSBjbGllbnQiCgppbXBvcnQgdHlwZSBSZWFjdCBmcm9tICJyZWFjdCIKCmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICJyZWFjdCIKaW1wb3J0IHsgdXNlQWN0aW9uU3RhdGUgfSBmcm9tICJyZWFjdCIKaW1wb3J0IHsgdXNlRm9ybVN0YXR1cyB9IGZyb20gInJlYWN0LWRvbSIKaW1wb3J0IHsgZGVsZXRlU2hlbGZBY3Rpb24gfSBmcm9tICJAL2FwcC9hY3Rpb25zIgppbXBvcnQgeyB1c2VSb3V0ZXIsIHVzZVNlYXJjaFBhcmFtcyB9IGZyb20gIm5leHQvbmF2aWdhdGlvbiIKaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAiQC9jb21wb25lbnRzL3VpL2J1dHRvbiIKaW1wb3J0IHsgVHJhc2gyLCBMb2FkZXIyIH0gZnJvbSAibHVjaWRlLXJlYWN0IgppbXBvcnQgeyB0b2FzdCB9IGZyb20gIkAvaG9va3MvdXNlLXRvYXN0IgppbXBvcnQgewogIEFsZXJ0RGlhbG9nLAogIEFsZXJ0RGlhbG9nQWN0aW9uLAogIEFsZXJ0RGlhbG9nQ2FuY2VsLAogIEFsZXJ0RGlhbG9nQ29udGVudCwKICBBbGVydERpYWxvZ0Rlc2NyaXB0aW9uLAogIEFsZXJ0RGlhbG9nRm9vdGVyLAogIEFsZXJ0RGlhbG9nSGVhZGVyLAogIEFsZXJ0RGlhbG9nVGl0bGUsCiAgQWxlcnREaWFsb2dUcmlnZ2VyLAp9IGZyb20gIkAvY29tcG9uZW50cy91aS9hbGVydC1kaWFsb2ciCmltcG9ydCB7IExvYWRpbmdPdmVybGF5IH0gZnJvbSAiLi9sb2FkaW5nLW92ZXJsYXkiCgpmdW5jdGlvbiBTdWJtaXRCdXR0b24oKSB7CiAgY29uc3QgeyBwZW5kaW5nIH0gPSB1c2VGb3JtU3RhdHVzKCkKICByZXR1cm4gKAogICAgPEJ1dHRvbgogICAgICB0eXBlPSJzdWJtaXQiCiAgICAgIHZhcmlhbnQ9ImRlc3RydWN0aXZlIgogICAgICBkaXNhYmxlZD17cGVuZGluZ30KICAgICAgY2xhc3NOYW1lPSJ3LWZ1bGwgaG92ZXI6YmctcmVkLTYwMCBkYXJrOmhvdmVyOmJnLXJlZC02MDAgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMjAwIgogICAgPgogICAgICB7cGVuZGluZyA/ICgKICAgICAgICA8PgogICAgICAgICAgPExvYWRlcjIgY2xhc3NOYW1lPSJoLTQgdy00IGFuaW1hdGUtc3BpbiBtci0yIiAvPgogICAgICAgICAgRXhjbHVpbmRvLi4uCiAgICAgICAgPC8+CiAgICAgICkgOiAoCiAgICAgICAgIkV4Y2x1aXIgUHJhdGVsZWlyYSBDb21wbGV0YSIKICAgICAgKX0KICAgIDwvQnV0dG9uPgogICkKfQoKZXhwb3J0IGZ1bmN0aW9uIERlbGV0ZVNoZWxmQnV0dG9uKHsKICBzaGVsZklkLAogIHBvc2l0aW9uLAogIGxldmVsLAogIGhhc1Byb2R1Y3QsCiAgcHJvZHVjdE5hbWUsCiAgb25EZWxldGVTaGVsZiwKfTogewogIHNoZWxmSWQ6IHN0cmluZwogIHBvc2l0aW9uOiBudW1iZXIKICBsZXZlbDogbnVtYmVyCiAgaGFzUHJvZHVjdDogYm9vbGVhbgogIHByb2R1Y3ROYW1lPzogc3RyaW5nCiAgb25EZWxldGVTaGVsZj86IChwb3NpdGlvbjogbnVtYmVyKSA9PiB2b2lkCn0pIHsKICBjb25zdCBbc3RhdGUsIGZvcm1BY3Rpb25dID0gdXNlQWN0aW9uU3RhdGUoZGVsZXRlU2hlbGZBY3Rpb24uYmluZChudWxsLCBzaGVsZklkKSwgeyBtZXNzYWdlOiAiIiwgc3VjY2VzczogZmFsc2UgfSkKICBjb25zdCBbaXNPcGVuLCBzZXRJc09wZW5dID0gdXNlU3RhdGUoZmFsc2UpCiAgY29uc3QgW2lzUHJvY2Vzc2luZywgc2V0SXNQcm9jZXNzaW5nXSA9IHVzZVN0YXRlKGZhbHNlKQogIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpCiAgY29uc3Qgc2VhcmNoUGFyYW1zID0gdXNlU2VhcmNoUGFyYW1zKCkKCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGlmIChzdGF0ZS5tZXNzYWdlKSB7CiAgICAgIHNldElzUHJvY2Vzc2luZyhmYWxzZSkKICAgICAgdG9hc3QoewogICAgICAgIHRpdGxlOiBzdGF0ZS5tZXNzYWdlLAogICAgICAgIHZhcmlhbnQ6IHN0YXRlLnN1Y2Nlc3MgPyAiZGVmYXVsdCIgOiAiZGVzdHJ1Y3RpdmUiLAogICAgICB9KQogICAgICBpZiAoc3RhdGUuc3VjY2VzcykgewogICAgICAgIHNldElzT3BlbihmYWxzZSkKICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHNlYXJjaFBhcmFtcy50b1N0cmluZygpKQogICAgICAgIHBhcmFtcy5kZWxldGUoImhpZ2hsaWdodCIpCiAgICAgICAgcGFyYW1zLmRlbGV0ZSgidHlwZSIpCiAgICAgICAgY29uc3QgbmV3VXJsID0gYCR7d2luZG93LmxvY2F0aW9uLnBhdGhuYW1lfT8ke3BhcmFtcy50b1N0cmluZygpfWAKICAgICAgICByb3V0ZXIucmVwbGFjZShuZXdVcmwsIHsgc2Nyb2xsOiBmYWxzZSB9KQogICAgICAgIHJvdXRlci5yZWZyZXNoKCkKICAgICAgICBvbkRlbGV0ZVNoZWxmPy4ocG9zaXRpb24pCiAgICAgIH0KICAgIH0KICB9LCBbc3RhdGUsIG9uRGVsZXRlU2hlbGYsIHBvc2l0aW9uXSkKCiAgY29uc3QgaGFuZGxlVHJpZ2dlckNsaWNrID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHsKICAgIGUucHJldmVudERlZmF1bHQoKQogICAgZS5zdG9wUHJvcGFnYXRpb24oKQogICAgY29uc29sZS5sb2coYENsaWNvdSBubyBib3TDo28gZGUgZXhjbHVpciBwcmF0ZWxlaXJhIGNvbXBsZXRhICR7cG9zaXRpb259YCkKICAgIHNldElzT3Blbih0cnVlKQogIH0KCiAgY29uc3QgaGFuZGxlRm9ybVN1Ym1pdCA9IGFzeW5jIChlOiBSZWFjdC5Gb3JtRXZlbnQpID0+IHsKICAgIGUucHJldmVudERlZmF1bHQoKQogICAgZS5zdG9wUHJvcGFnYXRpb24oKQogICAgY29uc29sZS5sb2coYFN1Ym1ldGVuZG8gZm9ybXVsw6FyaW8gcGFyYSBleGNsdWlyIHByYXRlbGVpcmEgY29tcGxldGEgJHtwb3NpdGlvbn1gKQogICAgc2V0SXNQcm9jZXNzaW5nKHRydWUpCgogICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgYXdhaXQgZm9ybUFjdGlvbihmb3JtRGF0YSkKICB9CgogIHJldHVybiAoCiAgICA8PgogICAgICA8QWxlcnREaWFsb2cgb3Blbj17aXNPcGVufSBvbk9wZW5DaGFuZ2U9e3NldElzT3Blbn0+CiAgICAgICAgPEFsZXJ0RGlhbG9nVHJpZ2dlciBhc0NoaWxkPgogICAgICAgICAgPEJ1dHRvbgogICAgICAgICAgICB2YXJpYW50PSJnaG9zdCIKICAgICAgICAgICAgc2l6ZT0iaWNvbiIKICAgICAgICAgICAgY2xhc3NOYW1lPSJoLTYgdy02IHAtMCB0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtcmVkLTUwMCBkYXJrOnRleHQtZ3JheS01MDAgZGFyazpob3Zlcjp0ZXh0LXJlZC00MDAgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMjAwIGhvdmVyOmJnLXJlZC01MCBkYXJrOmhvdmVyOmJnLXJlZC05MDAvMjAiCiAgICAgICAgICAgIGFyaWEtbGFiZWw9IkV4Y2x1aXIgUHJhdGVsZWlyYSBDb21wbGV0YSIKICAgICAgICAgICAgb25DbGljaz17aGFuZGxlVHJpZ2dlckNsaWNrfQogICAgICAgICAgPgogICAgICAgICAgICA8VHJhc2gyIGNsYXNzTmFtZT0iaC00IHctNCIgLz4KICAgICAgICAgIDwvQnV0dG9uPgogICAgICAgIDwvQWxlcnREaWFsb2dUcmlnZ2VyPgogICAgICAgIDxBbGVydERpYWxvZ0NvbnRlbnQKICAgICAgICAgIGNsYXNzTmFtZT0iYmctd2hpdGUgZGFyazpiZy1ncmF5LTkwMCBib3JkZXItZ3JheS0yMDAgZGFyazpib3JkZXItZ3JheS03MDAiCiAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKX0KICAgICAgICA+CiAgICAgICAgICA8QWxlcnREaWFsb2dIZWFkZXI+CiAgICAgICAgICAgIDxBbGVydERpYWxvZ1RpdGxlIGNsYXNzTmFtZT0idGV4dC1ncmF5LTkwMCBkYXJrOnRleHQtZ3JheS0xMDAiPgogICAgICAgICAgICAgIEV4Y2x1aXIgUHJhdGVsZWlyYSB7cG9zaXRpb259IENvbXBsZXRhCiAgICAgICAgICAgIDwvQWxlcnREaWFsb2dUaXRsZT4KICAgICAgICAgICAgPEFsZXJ0RGlhbG9nRGVzY3JpcHRpb24gY2xhc3NOYW1lPSJ0ZXh0LWdyYXktNjAwIGRhcms6dGV4dC1ncmF5LTMwMCI+CiAgICAgICAgICAgICAgRXN0YSBhw6fDo28gbsOjbyBwb2RlIHNlciBkZXNmZWl0YS4gSXNzbyBleGNsdWlyw6EgcGVybWFuZW50ZW1lbnRlIGEgcHJhdGVsZWlyYSB7cG9zaXRpb259IGNvbSB0b2RvcyBvcyBzZXVzIDQKICAgICAgICAgICAgICBhbmRhcmVzIGUgdG9kb3Mgb3MgcHJvZHV0b3MgYXJtYXplbmFkb3MgbmVsZXMuCiAgICAgICAgICAgIDwvQWxlcnREaWFsb2dEZXNjcmlwdGlvbj4KICAgICAgICAgIDwvQWxlcnREaWFsb2dIZWFkZXI+CiAgICAgICAgICA8QWxlcnREaWFsb2dGb290ZXI+CiAgICAgICAgICAgIDxBbGVydERpYWxvZ0NhbmNlbAogICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfQogICAgICAgICAgICAgIGNsYXNzTmFtZT0iYmctZ3JheS0xMDAgZGFyazpiZy1ncmF5LTgwMCB0ZXh0LWdyYXktOTAwIGRhcms6dGV4dC1ncmF5LTEwMCBib3JkZXItZ3JheS0zMDAgZGFyazpib3JkZXItZ3JheS02MDAgaG92ZXI6YmctZ3JheS0yMDAgZGFyazpob3ZlcjpiZy1ncmF5LTcwMCB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0yMDAiCiAgICAgICAgICAgID4KICAgICAgICAgICAgICBDYW5jZWxhcgogICAgICAgICAgICA8L0FsZXJ0RGlhbG9nQ2FuY2VsPgogICAgICAgICAgICA8QWxlcnREaWFsb2dBY3Rpb24gYXNDaGlsZD4KICAgICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlRm9ybVN1Ym1pdH0+CiAgICAgICAgICAgICAgICA8U3VibWl0QnV0dG9uIC8+CiAgICAgICAgICAgICAgPC9mb3JtPgogICAgICAgICAgICA8L0FsZXJ0RGlhbG9nQWN0aW9uPgogICAgICAgICAgPC9BbGVydERpYWxvZ0Zvb3Rlcj4KICAgICAgICA8L0FsZXJ0RGlhbG9nQ29udGVudD4KICAgICAgPC9BbGVydERpYWxvZz4KCiAgICAgIDxMb2FkaW5nT3ZlcmxheQogICAgICAgIGlzTG9hZGluZz17aXNQcm9jZXNzaW5nfQogICAgICAgIG1lc3NhZ2U9e3N0YXRlLnN1Y2Nlc3MgPyAiQXR1YWxpemFuZG8gaW50ZXJmYWNlLi4uIiA6ICJQcm9jZXNzYW5kbyBleGNsdXPDo28uLi4ifQogICAgICAvPgogICAgPC8+CiAgKQp9Cg=="}