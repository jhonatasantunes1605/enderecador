{"data":"InVzZSBjbGllbnQiCgppbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAicmVhY3QiCmltcG9ydCB7IHVzZUFjdGlvblN0YXRlIH0gZnJvbSAicmVhY3QiCmltcG9ydCB7IHVzZUZvcm1TdGF0dXMgfSBmcm9tICJyZWFjdC1kb20iCmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gIm5leHQvbmF2aWdhdGlvbiIKaW1wb3J0IHsgYWRkU2hlbHZlc1RvQWlzbGUgfSBmcm9tICJAL2FwcC9hY3Rpb25zIgppbXBvcnQgeyBCdXR0b24gfSBmcm9tICJAL2NvbXBvbmVudHMvdWkvYnV0dG9uIgppbXBvcnQgeyBJbnB1dCB9IGZyb20gIkAvY29tcG9uZW50cy91aS9pbnB1dCIKaW1wb3J0IHsgTGFiZWwgfSBmcm9tICJAL2NvbXBvbmVudHMvdWkvbGFiZWwiCmltcG9ydCB7IHRvYXN0IH0gZnJvbSAiQC9ob29rcy91c2UtdG9hc3QiCmltcG9ydCB7CiAgRGlhbG9nLAogIERpYWxvZ0NvbnRlbnQsCiAgRGlhbG9nRGVzY3JpcHRpb24sCiAgRGlhbG9nSGVhZGVyLAogIERpYWxvZ1RpdGxlLAogIERpYWxvZ1RyaWdnZXIsCn0gZnJvbSAiQC9jb21wb25lbnRzL3VpL2RpYWxvZyIKaW1wb3J0IHsgUGx1cyB9IGZyb20gImx1Y2lkZS1yZWFjdCIKCmZ1bmN0aW9uIFN1Ym1pdEJ1dHRvbih7IGRpc2FibGVkID0gZmFsc2UgfTogeyBkaXNhYmxlZD86IGJvb2xlYW4gfSkgewogIGNvbnN0IHsgcGVuZGluZyB9ID0gdXNlRm9ybVN0YXR1cygpCiAgcmV0dXJuICgKICAgIDxCdXR0b24gdHlwZT0ic3VibWl0IiBhcmlhLWRpc2FibGVkPXtwZW5kaW5nIHx8IGRpc2FibGVkfSBkaXNhYmxlZD17ZGlzYWJsZWR9IGNsYXNzTmFtZT0idy1mdWxsIj4KICAgICAge3BlbmRpbmcgPyAiQWRpY2lvbmFuZG8uLi4iIDogIkFkaWNpb25hciBQcmF0ZWxlaXJhcyJ9CiAgICA8L0J1dHRvbj4KICApCn0KCmV4cG9ydCBmdW5jdGlvbiBBZGRNdWx0aXBsZVNoZWx2ZXNCdXR0b24oewogIGFpc2xlSWQsCiAgY3VycmVudENvdW50ID0gMCwKICBjYXBhY2l0eSA9IDAsCiAgc2hlbGZMZXZlbHMgPSA0LAp9OiB7CiAgYWlzbGVJZDogc3RyaW5nCiAgY3VycmVudENvdW50PzogbnVtYmVyCiAgY2FwYWNpdHk/OiBudW1iZXIKICBzaGVsZkxldmVscz86IG51bWJlcgp9KSB7CiAgY29uc3QgW3N0YXRlLCBmb3JtQWN0aW9uXSA9IHVzZUFjdGlvblN0YXRlKGFkZFNoZWx2ZXNUb0Fpc2xlLmJpbmQobnVsbCwgYWlzbGVJZCksIHsgbWVzc2FnZTogIiIgfSkKICBjb25zdCBbaXNEaWFsb2dPcGVuLCBzZXRJc0RpYWxvZ09wZW5dID0gdXNlU3RhdGUoZmFsc2UpCiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCkKICBjb25zdCBzdWdnZXN0ZWREZWZhdWx0ID0gMwoKICBjb25zdCBzYXZlU2Nyb2xsUG9zaXRpb24gPSAoKSA9PiB7CiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJzY3JvbGxQb3NpdGlvbiIsIHdpbmRvdy5zY3JvbGxZLnRvU3RyaW5nKCkpCiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKAogICAgICAiZXhwYW5kZWRQb3NpdGlvbnMiLAogICAgICBKU09OLnN0cmluZ2lmeSgKICAgICAgICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWV4cGFuZGVkPSJ0cnVlIl0nKSkubWFwKChlbCkgPT4gZWwuZ2V0QXR0cmlidXRlKCJkYXRhLXBvc2l0aW9uIikpLAogICAgICApLAogICAgKQogIH0KCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGlmIChzdGF0ZS5tZXNzYWdlKSB7CiAgICAgIHRvYXN0KHsKICAgICAgICB0aXRsZTogc3RhdGUubWVzc2FnZSwKICAgICAgICB2YXJpYW50OiBzdGF0ZS5tZXNzYWdlLmluY2x1ZGVzKCJzdWNlc3NvIikgPyAiZGVmYXVsdCIgOiAiZGVzdHJ1Y3RpdmUiLAogICAgICB9KQogICAgICBpZiAoc3RhdGUubWVzc2FnZS5pbmNsdWRlcygic3VjZXNzbyIpKSB7CiAgICAgICAgc2V0SXNEaWFsb2dPcGVuKGZhbHNlKQogICAgICAgIHNhdmVTY3JvbGxQb3NpdGlvbigpCiAgICAgICAgcm91dGVyLnJlZnJlc2goKQoKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIGNvbnN0IHNhdmVkUG9zaXRpb24gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJzY3JvbGxQb3NpdGlvbiIpCiAgICAgICAgICBjb25zdCBleHBhbmRlZFBvc2l0aW9ucyA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiZXhwYW5kZWRQb3NpdGlvbnMiKSB8fCAiW10iKQoKICAgICAgICAgIGlmIChzYXZlZFBvc2l0aW9uKSB7CiAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCBOdW1iZXIucGFyc2VJbnQoc2F2ZWRQb3NpdGlvbikpCiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oInNjcm9sbFBvc2l0aW9uIikKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBSZXN0b3JlIGV4cGFuZGVkIHBvc2l0aW9ucwogICAgICAgICAgZXhwYW5kZWRQb3NpdGlvbnMuZm9yRWFjaCgocG9zaXRpb246IHN0cmluZykgPT4gewogICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtcG9zaXRpb249IiR7cG9zaXRpb259Il1gKQogICAgICAgICAgICBpZiAoZWxlbWVudCkgewogICAgICAgICAgICAgIGVsZW1lbnQuY2xpY2soKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgiZXhwYW5kZWRQb3NpdGlvbnMiKQogICAgICAgIH0sIDEwMCkKICAgICAgfQogICAgfQogIH0sIFtzdGF0ZSwgcm91dGVyXSkKCiAgcmV0dXJuICgKICAgIDxEaWFsb2cgb3Blbj17aXNEaWFsb2dPcGVufSBvbk9wZW5DaGFuZ2U9e3NldElzRGlhbG9nT3Blbn0+CiAgICAgIDxEaWFsb2dUcmlnZ2VyIGFzQ2hpbGQ+CiAgICAgICAgPEJ1dHRvbgogICAgICAgICAgdmFyaWFudD0iZ2hvc3QiCiAgICAgICAgICBzaXplPSJzbSIKICAgICAgICAgIGNsYXNzTmFtZT0iaC04IHB4LTIgdGV4dC14cyB0ZXh0LWdyYXktNjAwIGhvdmVyOnRleHQtZ3JheS05MDAgaG92ZXI6YmctZ3JheS0xMDAgZGFyazp0ZXh0LWdyYXktNDAwIGRhcms6aG92ZXI6dGV4dC1ncmF5LTEwMCBkYXJrOmhvdmVyOmJnLWdyYXktODAwIgogICAgICAgID4KICAgICAgICAgIDxQbHVzIGNsYXNzTmFtZT0iaC0zIHctMyBtci0xIiAvPgogICAgICAgICAgTcO6bHRpcGxhcwogICAgICAgIDwvQnV0dG9uPgogICAgICA8L0RpYWxvZ1RyaWdnZXI+CiAgICAgIDxEaWFsb2dDb250ZW50IGNsYXNzTmFtZT0ic206bWF4LXctWzQwMHB4XSBiZy13aGl0ZSBkYXJrOmJnLWdyYXktOTAwIGJvcmRlci1ncmF5LTIwMCBkYXJrOmJvcmRlci1ncmF5LTcwMCI+CiAgICAgICAgPERpYWxvZ0hlYWRlcj4KICAgICAgICAgIDxEaWFsb2dUaXRsZSBjbGFzc05hbWU9InRleHQtZ3JheS05MDAgZGFyazp0ZXh0LWdyYXktMTAwIj5BZGljaW9uYXIgTcO6bHRpcGxhcyBQcmF0ZWxlaXJhczwvRGlhbG9nVGl0bGU+CiAgICAgICAgICA8RGlhbG9nRGVzY3JpcHRpb24gY2xhc3NOYW1lPSJ0ZXh0LWdyYXktNjAwIGRhcms6dGV4dC1ncmF5LTMwMCI+CiAgICAgICAgICAgIEFkaWNpb25lIHbDoXJpYXMgcHJhdGVsZWlyYXMgdmF6aWFzIGRlIHVtYSB2ZXogYSBlc3RhIHJ1YS4KICAgICAgICAgIDwvRGlhbG9nRGVzY3JpcHRpb24+CiAgICAgICAgPC9EaWFsb2dIZWFkZXI+CiAgICAgICAgPGZvcm0gYWN0aW9uPXtmb3JtQWN0aW9ufSBjbGFzc05hbWU9ImdyaWQgZ2FwLTQgcHktNCI+CiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZ3JpZCBnYXAtMiI+CiAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPSJjb3VudCIgY2xhc3NOYW1lPSJ0ZXh0LWdyYXktOTAwIGRhcms6dGV4dC1ncmF5LTEwMCI+CiAgICAgICAgICAgICAgTsO6bWVybyBkZSBQcmF0ZWxlaXJhcwogICAgICAgICAgICA8L0xhYmVsPgogICAgICAgICAgICA8SW5wdXQKICAgICAgICAgICAgICBpZD0iY291bnQiCiAgICAgICAgICAgICAgbmFtZT0iY291bnQiCiAgICAgICAgICAgICAgdHlwZT0ibnVtYmVyIgogICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17c3VnZ2VzdGVkRGVmYXVsdH0KICAgICAgICAgICAgICBtaW49ezF9CiAgICAgICAgICAgICAgbWF4PXs1MH0KICAgICAgICAgICAgICByZXF1aXJlZAogICAgICAgICAgICAgIGNsYXNzTmFtZT0iYmctd2hpdGUgZGFyazpiZy1ncmF5LTgwMCBib3JkZXItZ3JheS0zMDAgZGFyazpib3JkZXItZ3JheS02MDAgdGV4dC1ncmF5LTkwMCBkYXJrOnRleHQtZ3JheS0xMDAiCiAgICAgICAgICAgIC8+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXNtIHRleHQtZ3JheS02MDAgZGFyazp0ZXh0LWdyYXktMzAwIj4KICAgICAgICAgICAgQ2FkYSBwcmF0ZWxlaXJhIHRlcsOhIHtzaGVsZkxldmVsc30gYW5kYXJlcy4gQXMgcHJhdGVsZWlyYXMgc2Vyw6NvIGFkaWNpb25hZGFzIHNlcXVlbmNpYWxtZW50ZS4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPFN1Ym1pdEJ1dHRvbiAvPgogICAgICAgIDwvZm9ybT4KICAgICAgPC9EaWFsb2dDb250ZW50PgogICAgPC9EaWFsb2c+CiAgKQp9Cg=="}