{"data":"InVzZSBjbGllbnQiCgppbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAicmVhY3QiCmltcG9ydCB7IHVzZUFjdGlvblN0YXRlIH0gZnJvbSAicmVhY3QiCmltcG9ydCB7IHVzZUZvcm1TdGF0dXMgfSBmcm9tICJyZWFjdC1kb20iCmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gIm5leHQvbmF2aWdhdGlvbiIKaW1wb3J0IHsgYWRkU2luZ2xlUGFsbGV0IH0gZnJvbSAiQC9hcHAvYWN0aW9ucyIKaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAiQC9jb21wb25lbnRzL3VpL2J1dHRvbiIKaW1wb3J0IHsgUGx1cyB9IGZyb20gImx1Y2lkZS1yZWFjdCIKaW1wb3J0IHsgdG9hc3QgfSBmcm9tICJAL2hvb2tzL3VzZS10b2FzdCIKaW1wb3J0IHsKICBEaWFsb2csCiAgRGlhbG9nQ29udGVudCwKICBEaWFsb2dEZXNjcmlwdGlvbiwKICBEaWFsb2dIZWFkZXIsCiAgRGlhbG9nVGl0bGUsCiAgRGlhbG9nVHJpZ2dlciwKfSBmcm9tICJAL2NvbXBvbmVudHMvdWkvZGlhbG9nIgoKZnVuY3Rpb24gU3VibWl0QnV0dG9uKCkgewogIGNvbnN0IHsgcGVuZGluZyB9ID0gdXNlRm9ybVN0YXR1cygpCiAgcmV0dXJuICgKICAgIDxCdXR0b24gdHlwZT0ic3VibWl0IiBhcmlhLWRpc2FibGVkPXtwZW5kaW5nfSBjbGFzc05hbWU9InctZnVsbCI+CiAgICAgIHtwZW5kaW5nID8gIkFkaWNpb25hbmRvLi4uIiA6ICJBZGljaW9uYXIgUGFsZXRlIn0KICAgIDwvQnV0dG9uPgogICkKfQoKZXhwb3J0IGZ1bmN0aW9uIEFkZFNpbmdsZVBhbGxldEJ1dHRvbih7IGFpc2xlSWQgfTogeyBhaXNsZUlkOiBzdHJpbmcgfSkgewogIGNvbnN0IFtzdGF0ZSwgZm9ybUFjdGlvbl0gPSB1c2VBY3Rpb25TdGF0ZShhZGRTaW5nbGVQYWxsZXQuYmluZChudWxsLCBhaXNsZUlkKSwgeyBtZXNzYWdlOiAiIiB9KQogIGNvbnN0IFtpc0RpYWxvZ09wZW4sIHNldElzRGlhbG9nT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSkKICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKQoKICBjb25zdCBzYXZlU2Nyb2xsUG9zaXRpb24gPSAoKSA9PiB7CiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJzY3JvbGxQb3NpdGlvbiIsIHdpbmRvdy5zY3JvbGxZLnRvU3RyaW5nKCkpCiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKAogICAgICAiZXhwYW5kZWRQb3NpdGlvbnMiLAogICAgICBKU09OLnN0cmluZ2lmeSgKICAgICAgICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWV4cGFuZGVkPSJ0cnVlIl0nKSkubWFwKChlbCkgPT4gZWwuZ2V0QXR0cmlidXRlKCJkYXRhLXBvc2l0aW9uIikpLAogICAgICApLAogICAgKQogIH0KCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGlmIChzdGF0ZS5tZXNzYWdlKSB7CiAgICAgIHRvYXN0KHsKICAgICAgICB0aXRsZTogc3RhdGUubWVzc2FnZSwKICAgICAgICB2YXJpYW50OiBzdGF0ZS5tZXNzYWdlLmluY2x1ZGVzKCJzdWNlc3NvIikgPyAiZGVmYXVsdCIgOiAiZGVzdHJ1Y3RpdmUiLAogICAgICB9KQogICAgICBpZiAoc3RhdGUubWVzc2FnZS5pbmNsdWRlcygic3VjZXNzbyIpKSB7CiAgICAgICAgc2V0SXNEaWFsb2dPcGVuKGZhbHNlKQogICAgICAgIHNhdmVTY3JvbGxQb3NpdGlvbigpCiAgICAgICAgcm91dGVyLnJlZnJlc2goKQoKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIGNvbnN0IHNhdmVkUG9zaXRpb24gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJzY3JvbGxQb3NpdGlvbiIpCiAgICAgICAgICBjb25zdCBleHBhbmRlZFBvc2l0aW9ucyA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiZXhwYW5kZWRQb3NpdGlvbnMiKSB8fCAiW10iKQoKICAgICAgICAgIGlmIChzYXZlZFBvc2l0aW9uKSB7CiAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCBOdW1iZXIucGFyc2VJbnQoc2F2ZWRQb3NpdGlvbikpCiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oInNjcm9sbFBvc2l0aW9uIikKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBSZXN0b3JlIGV4cGFuZGVkIHBvc2l0aW9ucwogICAgICAgICAgZXhwYW5kZWRQb3NpdGlvbnMuZm9yRWFjaCgocG9zaXRpb246IHN0cmluZykgPT4gewogICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtcG9zaXRpb249IiR7cG9zaXRpb259Il1gKQogICAgICAgICAgICBpZiAoZWxlbWVudCkgewogICAgICAgICAgICAgIGVsZW1lbnQuY2xpY2soKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgiZXhwYW5kZWRQb3NpdGlvbnMiKQogICAgICAgIH0sIDEwMCkKICAgICAgfQogICAgfQogIH0sIFtzdGF0ZSwgcm91dGVyXSkKCiAgcmV0dXJuICgKICAgIDxEaWFsb2cgb3Blbj17aXNEaWFsb2dPcGVufSBvbk9wZW5DaGFuZ2U9e3NldElzRGlhbG9nT3Blbn0+CiAgICAgIDxEaWFsb2dUcmlnZ2VyIGFzQ2hpbGQ+CiAgICAgICAgPEJ1dHRvbgogICAgICAgICAgdmFyaWFudD0iZ2hvc3QiCiAgICAgICAgICBzaXplPSJzbSIKICAgICAgICAgIGNsYXNzTmFtZT0iaC04IHB4LTIgdGV4dC14cyB0ZXh0LWdyYXktNjAwIGhvdmVyOnRleHQtZ3JheS05MDAgaG92ZXI6YmctZ3JheS0xMDAgZGFyazp0ZXh0LWdyYXktNDAwIGRhcms6aG92ZXI6dGV4dC1ncmF5LTEwMCBkYXJrOmhvdmVyOmJnLWdyYXktODAwIgogICAgICAgID4KICAgICAgICAgIDxQbHVzIGNsYXNzTmFtZT0iaC0zIHctMyBtci0xIiAvPgogICAgICAgICAgUGFsZXRlCiAgICAgICAgPC9CdXR0b24+CiAgICAgIDwvRGlhbG9nVHJpZ2dlcj4KICAgICAgPERpYWxvZ0NvbnRlbnQgY2xhc3NOYW1lPSJzbTptYXgtdy1bNDAwcHhdIj4KICAgICAgICA8RGlhbG9nSGVhZGVyPgogICAgICAgICAgPERpYWxvZ1RpdGxlPkFkaWNpb25hciBOb3ZvIFBhbGV0ZTwvRGlhbG9nVGl0bGU+CiAgICAgICAgICA8RGlhbG9nRGVzY3JpcHRpb24+VGVtIGNlcnRlemEgcXVlIGRlc2VqYSBhZGljaW9uYXIgdW0gbm92byBwYWxldGUgdmF6aW8gYSBlc3RhIHJ1YT88L0RpYWxvZ0Rlc2NyaXB0aW9uPgogICAgICAgIDwvRGlhbG9nSGVhZGVyPgogICAgICAgIDxmb3JtIGFjdGlvbj17Zm9ybUFjdGlvbn0gY2xhc3NOYW1lPSJncmlkIGdhcC00IHB5LTQiPgogICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtc20gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kIj4KICAgICAgICAgICAgTyBwYWxldGUgc2Vyw6EgYWRpY2lvbmFkbyBuYSBwcsOzeGltYSBwb3Npw6fDo28gZGlzcG9uw612ZWwgZGEgcnVhLgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8U3VibWl0QnV0dG9uIC8+CiAgICAgICAgPC9mb3JtPgogICAgICA8L0RpYWxvZ0NvbnRlbnQ+CiAgICA8L0RpYWxvZz4KICApCn0K"}