{"data":"InVzZSBjbGllbnQiCgppbXBvcnQgUmVhY3QgZnJvbSAicmVhY3QiCmltcG9ydCB7IEFsZXJ0VHJpYW5nbGUsIFJlZnJlc2hDdyB9IGZyb20gImx1Y2lkZS1yZWFjdCIKaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAiQC9jb21wb25lbnRzL3VpL2J1dHRvbiIKaW1wb3J0IHsgQ2FyZCwgQ2FyZENvbnRlbnQsIENhcmREZXNjcmlwdGlvbiwgQ2FyZEhlYWRlciwgQ2FyZFRpdGxlIH0gZnJvbSAiQC9jb21wb25lbnRzL3VpL2NhcmQiCgppbnRlcmZhY2UgRXJyb3JCb3VuZGFyeVN0YXRlIHsKICBoYXNFcnJvcjogYm9vbGVhbgogIGVycm9yPzogRXJyb3IKICBlcnJvckluZm8/OiBSZWFjdC5FcnJvckluZm8KfQoKaW50ZXJmYWNlIEVycm9yQm91bmRhcnlQcm9wcyB7CiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZQogIGZhbGxiYWNrPzogUmVhY3QuQ29tcG9uZW50VHlwZTx7IGVycm9yOiBFcnJvcjsgcmVzZXQ6ICgpID0+IHZvaWQgfT4KfQoKZXhwb3J0IGNsYXNzIEVycm9yQm91bmRhcnkgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8RXJyb3JCb3VuZGFyeVByb3BzLCBFcnJvckJvdW5kYXJ5U3RhdGU+IHsKICBjb25zdHJ1Y3Rvcihwcm9wczogRXJyb3JCb3VuZGFyeVByb3BzKSB7CiAgICBzdXBlcihwcm9wcykKICAgIHRoaXMuc3RhdGUgPSB7IGhhc0Vycm9yOiBmYWxzZSB9CiAgfQoKICBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yKGVycm9yOiBFcnJvcik6IEVycm9yQm91bmRhcnlTdGF0ZSB7CiAgICByZXR1cm4gewogICAgICBoYXNFcnJvcjogdHJ1ZSwKICAgICAgZXJyb3IsCiAgICB9CiAgfQoKICBjb21wb25lbnREaWRDYXRjaChlcnJvcjogRXJyb3IsIGVycm9ySW5mbzogUmVhY3QuRXJyb3JJbmZvKSB7CiAgICBjb25zb2xlLmVycm9yKCJFcnJvckJvdW5kYXJ5IGNhdWdodCBhbiBlcnJvcjoiLCBlcnJvciwgZXJyb3JJbmZvKQoKICAgIHRoaXMuc2V0U3RhdGUoewogICAgICBlcnJvciwKICAgICAgZXJyb3JJbmZvLAogICAgfSkKCiAgICAvLyBFbSBwcm9kdcOnw6NvLCB2b2PDqiBwb2RlIGVudmlhciBvIGVycm8gcGFyYSB1bSBzZXJ2acOnbyBkZSBtb25pdG9yYW1lbnRvCiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICJwcm9kdWN0aW9uIikgewogICAgICAvLyBFeGVtcGxvOiBTZW50cnkuY2FwdHVyZUV4Y2VwdGlvbihlcnJvciwgeyBleHRyYTogZXJyb3JJbmZvIH0pCiAgICB9CiAgfQoKICBoYW5kbGVSZXNldCA9ICgpID0+IHsKICAgIHRoaXMuc2V0U3RhdGUoeyBoYXNFcnJvcjogZmFsc2UsIGVycm9yOiB1bmRlZmluZWQsIGVycm9ySW5mbzogdW5kZWZpbmVkIH0pCiAgfQoKICByZW5kZXIoKSB7CiAgICBpZiAodGhpcy5zdGF0ZS5oYXNFcnJvcikgewogICAgICBpZiAodGhpcy5wcm9wcy5mYWxsYmFjaykgewogICAgICAgIGNvbnN0IEZhbGxiYWNrQ29tcG9uZW50ID0gdGhpcy5wcm9wcy5mYWxsYmFjawogICAgICAgIHJldHVybiA8RmFsbGJhY2tDb21wb25lbnQgZXJyb3I9e3RoaXMuc3RhdGUuZXJyb3IhfSByZXNldD17dGhpcy5oYW5kbGVSZXNldH0gLz4KICAgICAgfQoKICAgICAgcmV0dXJuICgKICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgbWluLWgtWzQwMHB4XSBwLTQiPgogICAgICAgICAgPENhcmQgY2xhc3NOYW1lPSJ3LWZ1bGwgbWF4LXctbWQiPgogICAgICAgICAgICA8Q2FyZEhlYWRlciBjbGFzc05hbWU9InRleHQtY2VudGVyIj4KICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibXgtYXV0byBtYi00IGZsZXggaC0xMiB3LTEyIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciByb3VuZGVkLWZ1bGwgYmctcmVkLTEwMCBkYXJrOmJnLXJlZC05MDAvMjAiPgogICAgICAgICAgICAgICAgPEFsZXJ0VHJpYW5nbGUgY2xhc3NOYW1lPSJoLTYgdy02IHRleHQtcmVkLTYwMCBkYXJrOnRleHQtcmVkLTQwMCIgLz4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8Q2FyZFRpdGxlIGNsYXNzTmFtZT0idGV4dC1yZWQtOTAwIGRhcms6dGV4dC1yZWQtMTAwIj5BbGdvIGRldSBlcnJhZG88L0NhcmRUaXRsZT4KICAgICAgICAgICAgICA8Q2FyZERlc2NyaXB0aW9uPgogICAgICAgICAgICAgICAgT2NvcnJldSB1bSBlcnJvIGluZXNwZXJhZG8uIFRlbnRlIHJlY2FycmVnYXIgYSBww6FnaW5hIG91IGVudHJlIGVtIGNvbnRhdG8gY29tIG8gc3Vwb3J0ZS4KICAgICAgICAgICAgICA8L0NhcmREZXNjcmlwdGlvbj4KICAgICAgICAgICAgPC9DYXJkSGVhZGVyPgogICAgICAgICAgICA8Q2FyZENvbnRlbnQgY2xhc3NOYW1lPSJzcGFjZS15LTQiPgogICAgICAgICAgICAgIHtwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gImRldmVsb3BtZW50IiAmJiB0aGlzLnN0YXRlLmVycm9yICYmICgKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJyb3VuZGVkLW1kIGJnLXJlZC01MCBkYXJrOmJnLXJlZC05MDAvMjAgcC0zIj4KICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtcmVkLTgwMCBkYXJrOnRleHQtcmVkLTIwMCI+RXJybyAoZGVzZW52b2x2aW1lbnRvKTo8L3A+CiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LXJlZC03MDAgZGFyazp0ZXh0LXJlZC0zMDAgbXQtMSBmb250LW1vbm8iPnt0aGlzLnN0YXRlLmVycm9yLm1lc3NhZ2V9PC9wPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgKX0KCiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggZ2FwLTIiPgogICAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXt0aGlzLmhhbmRsZVJlc2V0fSBjbGFzc05hbWU9ImZsZXgtMSI+CiAgICAgICAgICAgICAgICAgIDxSZWZyZXNoQ3cgY2xhc3NOYW1lPSJoLTQgdy00IG1yLTIiIC8+CiAgICAgICAgICAgICAgICAgIFRlbnRhciBOb3ZhbWVudGUKICAgICAgICAgICAgICAgIDwvQnV0dG9uPgogICAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSJvdXRsaW5lIiBvbkNsaWNrPXsoKSA9PiB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCl9IGNsYXNzTmFtZT0iZmxleC0xIj4KICAgICAgICAgICAgICAgICAgUmVjYXJyZWdhciBQw6FnaW5hCiAgICAgICAgICAgICAgICA8L0J1dHRvbj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9DYXJkQ29udGVudD4KICAgICAgICAgIDwvQ2FyZD4KICAgICAgICA8L2Rpdj4KICAgICAgKQogICAgfQoKICAgIHJldHVybiB0aGlzLnByb3BzLmNoaWxkcmVuCiAgfQp9CgovLyBIb29rIHBhcmEgY2FwdHVyYXIgZXJyb3MgZW0gY29tcG9uZW50ZXMgZnVuY2lvbmFpcwpleHBvcnQgZnVuY3Rpb24gdXNlRXJyb3JIYW5kbGVyKCkgewogIHJldHVybiAoZXJyb3I6IEVycm9yLCBlcnJvckluZm8/OiBSZWFjdC5FcnJvckluZm8pID0+IHsKICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGNhdWdodCBieSB1c2VFcnJvckhhbmRsZXI6IiwgZXJyb3IsIGVycm9ySW5mbykKCiAgICAvLyBFbSBwcm9kdcOnw6NvLCBlbnZpYXIgcGFyYSBzZXJ2acOnbyBkZSBtb25pdG9yYW1lbnRvCiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICJwcm9kdWN0aW9uIikgewogICAgICAvLyBFeGVtcGxvOiBTZW50cnkuY2FwdHVyZUV4Y2VwdGlvbihlcnJvciwgeyBleHRyYTogZXJyb3JJbmZvIH0pCiAgICB9CiAgfQp9Cg=="}