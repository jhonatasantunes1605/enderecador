{"data":"InVzZSBjbGllbnQiCgppbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAicmVhY3QiCmltcG9ydCB7CiAgRG5kQ29udGV4dCwKICBjbG9zZXN0Q2VudGVyLAogIEtleWJvYXJkU2Vuc29yLAogIFBvaW50ZXJTZW5zb3IsCiAgdXNlU2Vuc29yLAogIHVzZVNlbnNvcnMsCiAgdHlwZSBEcmFnRW5kRXZlbnQsCn0gZnJvbSAiQGRuZC1raXQvY29yZSIKaW1wb3J0IHsgU29ydGFibGVDb250ZXh0LCBzb3J0YWJsZUtleWJvYXJkQ29vcmRpbmF0ZXMsIHZlcnRpY2FsTGlzdFNvcnRpbmdTdHJhdGVneSwgYXJyYXlNb3ZlIH0gZnJvbSAiQGRuZC1raXQvc29ydGFibGUiCmltcG9ydCB7IFBhbGxldERyYWdnYWJsZUl0ZW0gfSBmcm9tICIuL3BhbGxldC1kcmFnZ2FibGUtaXRlbSIKaW1wb3J0IHsgcmVvcmRlclBhbGxldHNBY3Rpb24gfSBmcm9tICJAL2FwcC9hY3Rpb25zIgppbXBvcnQgeyB0b2FzdCB9IGZyb20gIkAvaG9va3MvdXNlLXRvYXN0IgoKaW50ZXJmYWNlIFBhbGxldCB7CiAgaWQ6IHN0cmluZwogIHBvc2l0aW9uOiBudW1iZXIKICBlYW46IHN0cmluZyB8IG51bGwKICBwcm9kdWN0TmFtZTogc3RyaW5nIHwgbnVsbAogIGxhc3RWZXJpZmllZDogRGF0ZSB8IG51bGwKfQoKaW50ZXJmYWNlIEFpc2xlUGFsbGV0TGlzdFByb3BzIHsKICBhaXNsZUlkOiBzdHJpbmcKICBpbml0aWFsUGFsbGV0czogUGFsbGV0W10KICBkdXBsaWNhdGVkRUFOczogU2V0PHN0cmluZz4KICBzZWxlY3RlZEl0ZW1zPzogU2V0PHN0cmluZz4KICBvblNlbGVjdGlvbkNoYW5nZT86IChpZDogc3RyaW5nLCBzZWxlY3RlZDogYm9vbGVhbikgPT4gdm9pZAogIGhpZ2hsaWdodGVkSXRlbT86IHN0cmluZyB8IG51bGwKICB3YXJlaG91c2VOYW1lPzogc3RyaW5nCiAgYWlzbGVOYW1lPzogc3RyaW5nCn0KCmV4cG9ydCBmdW5jdGlvbiBBaXNsZVBhbGxldExpc3QoewogIGFpc2xlSWQsCiAgaW5pdGlhbFBhbGxldHMsCiAgZHVwbGljYXRlZEVBTnMsCiAgc2VsZWN0ZWRJdGVtcyA9IG5ldyBTZXQoKSwKICBvblNlbGVjdGlvbkNoYW5nZSwKICBoaWdobGlnaHRlZEl0ZW0sCiAgd2FyZWhvdXNlTmFtZSA9ICJHYWxww6NvIiwKICBhaXNsZU5hbWUgPSAiUjEiLAp9OiBBaXNsZVBhbGxldExpc3RQcm9wcykgewogIGNvbnN0IFtwYWxsZXRzLCBzZXRQYWxsZXRzXSA9IHVzZVN0YXRlPFBhbGxldFtdPihpbml0aWFsUGFsbGV0cykKCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIHNldFBhbGxldHMoaW5pdGlhbFBhbGxldHMpCiAgfSwgW2luaXRpYWxQYWxsZXRzXSkKCiAgY29uc3Qgc2Vuc29ycyA9IHVzZVNlbnNvcnMoCiAgICB1c2VTZW5zb3IoUG9pbnRlclNlbnNvciwgewogICAgICBhY3RpdmF0aW9uQ29uc3RyYWludDogewogICAgICAgIGRpc3RhbmNlOiAxMCwKICAgICAgfSwKICAgIH0pLAogICAgdXNlU2Vuc29yKEtleWJvYXJkU2Vuc29yLCB7CiAgICAgIGNvb3JkaW5hdGVHZXR0ZXI6IHNvcnRhYmxlS2V5Ym9hcmRDb29yZGluYXRlcywKICAgIH0pLAogICkKCiAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlRHJhZ0VuZChldmVudDogRHJhZ0VuZEV2ZW50KSB7CiAgICBjb25zdCB7IGFjdGl2ZSwgb3ZlciB9ID0gZXZlbnQKCiAgICBpZiAoIW92ZXIpIHJldHVybgoKICAgIGNvbnN0IGFjdGl2ZVBhbGxldElkID0gU3RyaW5nKGFjdGl2ZS5pZCkKICAgIGNvbnN0IG92ZXJQYWxsZXRJZCA9IFN0cmluZyhvdmVyLmlkKQoKICAgIGNvbnN0IG9sZEluZGV4ID0gcGFsbGV0cy5maW5kSW5kZXgoKHApID0+IHAuaWQgPT09IGFjdGl2ZVBhbGxldElkKQogICAgY29uc3QgbmV3SW5kZXggPSBwYWxsZXRzLmZpbmRJbmRleCgocCkgPT4gcC5pZCA9PT0gb3ZlclBhbGxldElkKQoKICAgIGlmIChvbGRJbmRleCAhPT0gLTEgJiYgbmV3SW5kZXggIT09IC0xICYmIG9sZEluZGV4ICE9PSBuZXdJbmRleCkgewogICAgICBjb25zdCBuZXdQYWxsZXRzT3JkZXIgPSBhcnJheU1vdmUocGFsbGV0cywgb2xkSW5kZXgsIG5ld0luZGV4KQogICAgICBzZXRQYWxsZXRzKG5ld1BhbGxldHNPcmRlcikKCiAgICAgIGNvbnN0IG5ld1BhbGxldE9yZGVySWRzID0gbmV3UGFsbGV0c09yZGVyLm1hcCgocCkgPT4gcC5pZCkKCiAgICAgIGNvbnN0IHN0YXRlID0gYXdhaXQgcmVvcmRlclBhbGxldHNBY3Rpb24oYWlzbGVJZCwgbmV3UGFsbGV0T3JkZXJJZHMpCgogICAgICBpZiAoc3RhdGUubWVzc2FnZSkgewogICAgICAgIHRvYXN0KHsKICAgICAgICAgIHRpdGxlOiBzdGF0ZS5tZXNzYWdlLAogICAgICAgICAgdmFyaWFudDogc3RhdGUuc3VjY2VzcyA/ICJkZWZhdWx0IiA6ICJkZXN0cnVjdGl2ZSIsCiAgICAgICAgfSkKICAgICAgfQogICAgfQogIH0KCiAgcmV0dXJuICgKICAgIDxEbmRDb250ZXh0IHNlbnNvcnM9e3NlbnNvcnN9IGNvbGxpc2lvbkRldGVjdGlvbj17Y2xvc2VzdENlbnRlcn0gb25EcmFnRW5kPXtoYW5kbGVEcmFnRW5kfT4KICAgICAgPFNvcnRhYmxlQ29udGV4dCBpdGVtcz17cGFsbGV0cy5tYXAoKHApID0+IHAuaWQpfSBzdHJhdGVneT17dmVydGljYWxMaXN0U29ydGluZ1N0cmF0ZWd5fT4KICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZ3JpZCBncmlkLWNvbHMtMSI+CiAgICAgICAgICB7cGFsbGV0cy5tYXAoKHBhbGxldCkgPT4gKAogICAgICAgICAgICA8UGFsbGV0RHJhZ2dhYmxlSXRlbQogICAgICAgICAgICAgIGtleT17cGFsbGV0LmlkfQogICAgICAgICAgICAgIGlkPXtwYWxsZXQuaWR9CiAgICAgICAgICAgICAgcGFsbGV0PXtwYWxsZXR9CiAgICAgICAgICAgICAgaXNEdXBsaWNhdGVkRUFOPXtwYWxsZXQuZWFuID8gZHVwbGljYXRlZEVBTnMuaGFzKHBhbGxldC5lYW4udG9Mb3dlckNhc2UoKSkgOiBmYWxzZX0KICAgICAgICAgICAgICBpc1NlbGVjdGVkPXtzZWxlY3RlZEl0ZW1zLmhhcyhwYWxsZXQuaWQpfQogICAgICAgICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlPXtvblNlbGVjdGlvbkNoYW5nZX0KICAgICAgICAgICAgICBpc0hpZ2hsaWdodGVkPXtoaWdobGlnaHRlZEl0ZW0gPT09IHBhbGxldC5pZH0KICAgICAgICAgICAgICB3YXJlaG91c2VOYW1lPXt3YXJlaG91c2VOYW1lfQogICAgICAgICAgICAgIGFpc2xlTmFtZT17YWlzbGVOYW1lfQogICAgICAgICAgICAvPgogICAgICAgICAgKSl9CiAgICAgICAgPC9kaXY+CiAgICAgIDwvU29ydGFibGVDb250ZXh0PgogICAgPC9EbmRDb250ZXh0PgogICkKfQo="}