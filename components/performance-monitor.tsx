{"data":"InVzZSBjbGllbnQiCgppbXBvcnQgdHlwZSBSZWFjdCBmcm9tICJyZWFjdCIKCmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICJyZWFjdCIKCmludGVyZmFjZSBQZXJmb3JtYW5jZU1ldHJpY3MgewogIHJlbmRlclRpbWU6IG51bWJlcgogIG1lbW9yeVVzYWdlPzogbnVtYmVyCiAgY29tcG9uZW50Q291bnQ6IG51bWJlcgp9CgpleHBvcnQgZnVuY3Rpb24gUGVyZm9ybWFuY2VNb25pdG9yKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0pIHsKICBjb25zdCBbbWV0cmljcywgc2V0TWV0cmljc10gPSB1c2VTdGF0ZTxQZXJmb3JtYW5jZU1ldHJpY3MgfCBudWxsPihudWxsKQogIGNvbnN0IFtzaG93TWV0cmljcywgc2V0U2hvd01ldHJpY3NdID0gdXNlU3RhdGUoZmFsc2UpCgogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKQoKICAgIC8vIFNpbXVsYXIgY29udGFnZW0gZGUgY29tcG9uZW50ZXMgKGVtIHByb2R1w6fDo28sIGlzc28gc2VyaWEgbWFpcyBzb2Zpc3RpY2FkbykKICAgIGNvbnN0IGNvbXBvbmVudENvdW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiW2RhdGEtY29tcG9uZW50XSIpLmxlbmd0aAoKICAgIGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKQogICAgY29uc3QgcmVuZGVyVGltZSA9IGVuZFRpbWUgLSBzdGFydFRpbWUKCiAgICAvLyBWZXJpZmljYXIgdXNvIGRlIG1lbcOzcmlhIHNlIGRpc3BvbsOtdmVsCiAgICBjb25zdCBtZW1vcnlVc2FnZSA9IChwZXJmb3JtYW5jZSBhcyBhbnkpLm1lbW9yeT8udXNlZEpTSGVhcFNpemUKCiAgICBzZXRNZXRyaWNzKHsKICAgICAgcmVuZGVyVGltZSwKICAgICAgbWVtb3J5VXNhZ2UsCiAgICAgIGNvbXBvbmVudENvdW50LAogICAgfSkKCiAgICAvLyBNb3N0cmFyIG3DqXRyaWNhcyBhcGVuYXMgZW0gZGVzZW52b2x2aW1lbnRvCiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICJkZXZlbG9wbWVudCIpIHsKICAgICAgY29uc29sZS5sb2coIlBlcmZvcm1hbmNlIE1ldHJpY3M6IiwgewogICAgICAgIHJlbmRlclRpbWU6IGAke3JlbmRlclRpbWUudG9GaXhlZCgyKX1tc2AsCiAgICAgICAgbWVtb3J5VXNhZ2U6IG1lbW9yeVVzYWdlID8gYCR7KG1lbW9yeVVzYWdlIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMil9TUJgIDogIk4vQSIsCiAgICAgICAgY29tcG9uZW50Q291bnQsCiAgICAgIH0pCiAgICB9CiAgfSwgW10pCgogIC8vIE1vc3RyYXIgbcOpdHJpY2FzIGFwZW5hcyBlbSBkZXNlbnZvbHZpbWVudG8KICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICJkZXZlbG9wbWVudCIpIHsKICAgIHJldHVybiA8PntjaGlsZHJlbn08Lz4KICB9CgogIHJldHVybiAoCiAgICA8PgogICAgICB7Y2hpbGRyZW59CgogICAgICB7LyogVG9nZ2xlIHBhcmEgbW9zdHJhciBtw6l0cmljYXMgKi99CiAgICAgIDxidXR0b24KICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93TWV0cmljcyghc2hvd01ldHJpY3MpfQogICAgICAgIGNsYXNzTmFtZT0iZml4ZWQgYm90dG9tLTQgcmlnaHQtNCBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIHB4LTMgcHktMiByb3VuZGVkLWxnIHRleHQteHMgei01MCBob3ZlcjpiZy1ibHVlLTcwMCB0cmFuc2l0aW9uLWNvbG9ycyIKICAgICAgPgogICAgICAgIHtzaG93TWV0cmljcyA/ICJIaWRlIiA6ICJTaG93In0gTWV0cmljcwogICAgICA8L2J1dHRvbj4KCiAgICAgIHsvKiBQYWluZWwgZGUgbcOpdHJpY2FzICovfQogICAgICB7c2hvd01ldHJpY3MgJiYgbWV0cmljcyAmJiAoCiAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZpeGVkIGJvdHRvbS0xNiByaWdodC00IGJnLXdoaXRlIGRhcms6YmctZ3JheS04MDAgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBkYXJrOmJvcmRlci1ncmF5LTcwMCByb3VuZGVkLWxnIHAtNCBzaGFkb3ctbGcgei01MCB0ZXh0LXhzIj4KICAgICAgICAgIDxoMyBjbGFzc05hbWU9ImZvbnQtc2VtaWJvbGQgbWItMiB0ZXh0LWdyYXktOTAwIGRhcms6dGV4dC1ncmF5LTEwMCI+UGVyZm9ybWFuY2UgTWV0cmljczwvaDM+CiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS0xIHRleHQtZ3JheS02MDAgZGFyazp0ZXh0LWdyYXktMzAwIj4KICAgICAgICAgICAgPGRpdj5SZW5kZXIgVGltZToge21ldHJpY3MucmVuZGVyVGltZS50b0ZpeGVkKDIpfW1zPC9kaXY+CiAgICAgICAgICAgIDxkaXY+Q29tcG9uZW50czoge21ldHJpY3MuY29tcG9uZW50Q291bnR9PC9kaXY+CiAgICAgICAgICAgIHttZXRyaWNzLm1lbW9yeVVzYWdlICYmIDxkaXY+TWVtb3J5OiB7KG1ldHJpY3MubWVtb3J5VXNhZ2UgLyAxMDI0IC8gMTAyNCkudG9GaXhlZCgyKX1NQjwvZGl2Pn0KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICApfQogICAgPC8+CiAgKQp9Cg=="}