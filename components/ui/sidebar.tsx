{"data":"J3VzZSBjbGllbnQnCgppbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCcKaW1wb3J0IHsgU2xvdCB9IGZyb20gJ0ByYWRpeC11aS9yZWFjdC1zbG90JwppbXBvcnQgeyBWYXJpYW50UHJvcHMsIGN2YSB9IGZyb20gJ2NsYXNzLXZhcmlhbmNlLWF1dGhvcml0eScKaW1wb3J0IHsgUGFuZWxMZWZ0IH0gZnJvbSAnbHVjaWRlLXJlYWN0JwoKaW1wb3J0IHsgdXNlSXNNb2JpbGUgfSBmcm9tICdAL2hvb2tzL3VzZS1tb2JpbGUnCmltcG9ydCB7IGNuIH0gZnJvbSAnQC9saWIvdXRpbHMnCmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9idXR0b24nCmltcG9ydCB7IElucHV0IH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2lucHV0JwppbXBvcnQgeyBTZXBhcmF0b3IgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvc2VwYXJhdG9yJwppbXBvcnQgeyBTaGVldCwgU2hlZXRDb250ZW50IH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3NoZWV0JwppbXBvcnQgeyBTa2VsZXRvbiB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9za2VsZXRvbicKaW1wb3J0IHsKICBUb29sdGlwLAogIFRvb2x0aXBDb250ZW50LAogIFRvb2x0aXBQcm92aWRlciwKICBUb29sdGlwVHJpZ2dlciwKfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvdG9vbHRpcCcKCmNvbnN0IFNJREVCQVJfQ09PS0lFX05BTUUgPSAnc2lkZWJhcjpzdGF0ZScKY29uc3QgU0lERUJBUl9DT09LSUVfTUFYX0FHRSA9IDYwICogNjAgKiAyNCAqIDcKY29uc3QgU0lERUJBUl9XSURUSCA9ICcxNnJlbScKY29uc3QgU0lERUJBUl9XSURUSF9NT0JJTEUgPSAnMThyZW0nCmNvbnN0IFNJREVCQVJfV0lEVEhfSUNPTiA9ICczcmVtJwpjb25zdCBTSURFQkFSX0tFWUJPQVJEX1NIT1JUQ1VUID0gJ2InCgp0eXBlIFNpZGViYXJDb250ZXh0ID0gewogIHN0YXRlOiAnZXhwYW5kZWQnIHwgJ2NvbGxhcHNlZCcKICBvcGVuOiBib29sZWFuCiAgc2V0T3BlbjogKG9wZW46IGJvb2xlYW4pID0+IHZvaWQKICBvcGVuTW9iaWxlOiBib29sZWFuCiAgc2V0T3Blbk1vYmlsZTogKG9wZW46IGJvb2xlYW4pID0+IHZvaWQKICBpc01vYmlsZTogYm9vbGVhbgogIHRvZ2dsZVNpZGViYXI6ICgpID0+IHZvaWQKfQoKY29uc3QgU2lkZWJhckNvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PFNpZGViYXJDb250ZXh0IHwgbnVsbD4obnVsbCkKCmZ1bmN0aW9uIHVzZVNpZGViYXIoKSB7CiAgY29uc3QgY29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoU2lkZWJhckNvbnRleHQpCiAgaWYgKCFjb250ZXh0KSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZVNpZGViYXIgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIFNpZGViYXJQcm92aWRlci4nKQogIH0KCiAgcmV0dXJuIGNvbnRleHQKfQoKY29uc3QgU2lkZWJhclByb3ZpZGVyID0gUmVhY3QuZm9yd2FyZFJlZjwKICBIVE1MRGl2RWxlbWVudCwKICBSZWFjdC5Db21wb25lbnRQcm9wczwnZGl2Jz4gJiB7CiAgICBkZWZhdWx0T3Blbj86IGJvb2xlYW4KICAgIG9wZW4/OiBib29sZWFuCiAgICBvbk9wZW5DaGFuZ2U/OiAob3BlbjogYm9vbGVhbikgPT4gdm9pZAogIH0KPigKICAoCiAgICB7CiAgICAgIGRlZmF1bHRPcGVuID0gdHJ1ZSwKICAgICAgb3Blbjogb3BlblByb3AsCiAgICAgIG9uT3BlbkNoYW5nZTogc2V0T3BlblByb3AsCiAgICAgIGNsYXNzTmFtZSwKICAgICAgc3R5bGUsCiAgICAgIGNoaWxkcmVuLAogICAgICAuLi5wcm9wcwogICAgfSwKICAgIHJlZiwKICApID0+IHsKICAgIGNvbnN0IGlzTW9iaWxlID0gdXNlSXNNb2JpbGUoKQogICAgY29uc3QgW29wZW5Nb2JpbGUsIHNldE9wZW5Nb2JpbGVdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpCgogICAgLy8gVGhpcyBpcyB0aGUgaW50ZXJuYWwgc3RhdGUgb2YgdGhlIHNpZGViYXIuCiAgICAvLyBXZSB1c2Ugb3BlblByb3AgYW5kIHNldE9wZW5Qcm9wIGZvciBjb250cm9sIGZyb20gb3V0c2lkZSB0aGUgY29tcG9uZW50LgogICAgY29uc3QgW19vcGVuLCBfc2V0T3Blbl0gPSBSZWFjdC51c2VTdGF0ZShkZWZhdWx0T3BlbikKICAgIGNvbnN0IG9wZW4gPSBvcGVuUHJvcCA/PyBfb3BlbgogICAgY29uc3Qgc2V0T3BlbiA9IFJlYWN0LnVzZUNhbGxiYWNrKAogICAgICAodmFsdWU6IGJvb2xlYW4gfCAoKHZhbHVlOiBib29sZWFuKSA9PiBib29sZWFuKSkgPT4gewogICAgICAgIGNvbnN0IG9wZW5TdGF0ZSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyA/IHZhbHVlKG9wZW4pIDogdmFsdWUKICAgICAgICBpZiAoc2V0T3BlblByb3ApIHsKICAgICAgICAgIHNldE9wZW5Qcm9wKG9wZW5TdGF0ZSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3NldE9wZW4ob3BlblN0YXRlKQogICAgICAgIH0KCiAgICAgICAgLy8gVGhpcyBzZXRzIHRoZSBjb29raWUgdG8ga2VlcCB0aGUgc2lkZWJhciBzdGF0ZS4KICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgJHtTSURFQkFSX0NPT0tJRV9OQU1FfT0ke29wZW5TdGF0ZX07IHBhdGg9LzsgbWF4LWFnZT0ke1NJREVCQVJfQ09PS0lFX01BWF9BR0V9YAogICAgICB9LAogICAgICBbc2V0T3BlblByb3AsIG9wZW5dLAogICAgKQoKICAgIC8vIEhlbHBlciB0byB0b2dnbGUgdGhlIHNpZGViYXIuCiAgICBjb25zdCB0b2dnbGVTaWRlYmFyID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4gewogICAgICByZXR1cm4gaXNNb2JpbGUKICAgICAgICA/IHNldE9wZW5Nb2JpbGUoKG9wZW4pID0+ICFvcGVuKQogICAgICAgIDogc2V0T3Blbigob3BlbikgPT4gIW9wZW4pCiAgICB9LCBbaXNNb2JpbGUsIHNldE9wZW4sIHNldE9wZW5Nb2JpbGVdKQoKICAgIC8vIEFkZHMgYSBrZXlib2FyZCBzaG9ydGN1dCB0byB0b2dnbGUgdGhlIHNpZGViYXIuCiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4gewogICAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7CiAgICAgICAgaWYgKAogICAgICAgICAgZXZlbnQua2V5ID09PSBTSURFQkFSX0tFWUJPQVJEX1NIT1JUQ1VUICYmCiAgICAgICAgICAoZXZlbnQubWV0YUtleSB8fCBldmVudC5jdHJsS2V5KQogICAgICAgICkgewogICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKQogICAgICAgICAgdG9nZ2xlU2lkZWJhcigpCiAgICAgICAgfQogICAgICB9CgogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pCiAgICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pCiAgICB9LCBbdG9nZ2xlU2lkZWJhcl0pCgogICAgLy8gV2UgYWRkIGEgc3RhdGUgc28gdGhhdCB3ZSBjYW4gZG8gZGF0YS1zdGF0ZT0iZXhwYW5kZWQiIG9yICJjb2xsYXBzZWQiLgogICAgLy8gVGhpcyBtYWtlcyBpdCBlYXNpZXIgdG8gc3R5bGUgdGhlIHNpZGViYXIgd2l0aCBUYWlsd2luZCBjbGFzc2VzLgogICAgY29uc3Qgc3RhdGUgPSBvcGVuID8gJ2V4cGFuZGVkJyA6ICdjb2xsYXBzZWQnCgogICAgY29uc3QgY29udGV4dFZhbHVlID0gUmVhY3QudXNlTWVtbzxTaWRlYmFyQ29udGV4dD4oCiAgICAgICgpID0+ICh7CiAgICAgICAgc3RhdGUsCiAgICAgICAgb3BlbiwKICAgICAgICBzZXRPcGVuLAogICAgICAgIGlzTW9iaWxlLAogICAgICAgIG9wZW5Nb2JpbGUsCiAgICAgICAgc2V0T3Blbk1vYmlsZSwKICAgICAgICB0b2dnbGVTaWRlYmFyLAogICAgICB9KSwKICAgICAgWwogICAgICAgIHN0YXRlLAogICAgICAgIG9wZW4sCiAgICAgICAgc2V0T3BlbiwKICAgICAgICBpc01vYmlsZSwKICAgICAgICBvcGVuTW9iaWxlLAogICAgICAgIHNldE9wZW5Nb2JpbGUsCiAgICAgICAgdG9nZ2xlU2lkZWJhciwKICAgICAgXSwKICAgICkKCiAgICByZXR1cm4gKAogICAgICA8U2lkZWJhckNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2NvbnRleHRWYWx1ZX0+CiAgICAgICAgPFRvb2x0aXBQcm92aWRlciBkZWxheUR1cmF0aW9uPXswfT4KICAgICAgICAgIDxkaXYKICAgICAgICAgICAgc3R5bGU9ewogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICctLXNpZGViYXItd2lkdGgnOiBTSURFQkFSX1dJRFRILAogICAgICAgICAgICAgICAgJy0tc2lkZWJhci13aWR0aC1pY29uJzogU0lERUJBUl9XSURUSF9JQ09OLAogICAgICAgICAgICAgICAgLi4uc3R5bGUsCiAgICAgICAgICAgICAgfSBhcyBSZWFjdC5DU1NQcm9wZXJ0aWVzCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2xhc3NOYW1lPXtjbigKICAgICAgICAgICAgICAnZ3JvdXAvc2lkZWJhci13cmFwcGVyIGZsZXggbWluLWgtc3ZoIHctZnVsbCBoYXMtW1tkYXRhLXZhcmlhbnQ9aW5zZXRdXTpiZy1zaWRlYmFyJywKICAgICAgICAgICAgICBjbGFzc05hbWUsCiAgICAgICAgICAgICl9CiAgICAgICAgICAgIHJlZj17cmVmfQogICAgICAgICAgICB7Li4ucHJvcHN9CiAgICAgICAgICA+CiAgICAgICAgICAgIHtjaGlsZHJlbn0KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvVG9vbHRpcFByb3ZpZGVyPgogICAgICA8L1NpZGViYXJDb250ZXh0LlByb3ZpZGVyPgogICAgKQogIH0sCikKU2lkZWJhclByb3ZpZGVyLmRpc3BsYXlOYW1lID0gJ1NpZGViYXJQcm92aWRlcicKCmNvbnN0IFNpZGViYXIgPSBSZWFjdC5mb3J3YXJkUmVmPAogIEhUTUxEaXZFbGVtZW50LAogIFJlYWN0LkNvbXBvbmVudFByb3BzPCdkaXYnPiAmIHsKICAgIHNpZGU/OiAnbGVmdCcgfCAncmlnaHQnCiAgICB2YXJpYW50PzogJ3NpZGViYXInIHwgJ2Zsb2F0aW5nJyB8ICdpbnNldCcKICAgIGNvbGxhcHNpYmxlPzogJ29mZmNhbnZhcycgfCAnaWNvbicgfCAnbm9uZScKICB9Cj4oCiAgKAogICAgewogICAgICBzaWRlID0gJ2xlZnQnLAogICAgICB2YXJpYW50ID0gJ3NpZGViYXInLAogICAgICBjb2xsYXBzaWJsZSA9ICdvZmZjYW52YXMnLAogICAgICBjbGFzc05hbWUsCiAgICAgIGNoaWxkcmVuLAogICAgICAuLi5wcm9wcwogICAgfSwKICAgIHJlZiwKICApID0+IHsKICAgIGNvbnN0IHsgaXNNb2JpbGUsIHN0YXRlLCBvcGVuTW9iaWxlLCBzZXRPcGVuTW9iaWxlIH0gPSB1c2VTaWRlYmFyKCkKCiAgICBpZiAoY29sbGFwc2libGUgPT09ICdub25lJykgewogICAgICByZXR1cm4gKAogICAgICAgIDxkaXYKICAgICAgICAgIGNsYXNzTmFtZT17Y24oCiAgICAgICAgICAgICdmbGV4IGgtZnVsbCB3LVstLXNpZGViYXItd2lkdGhdIGZsZXgtY29sIGJnLXNpZGViYXIgdGV4dC1zaWRlYmFyLWZvcmVncm91bmQnLAogICAgICAgICAgICBjbGFzc05hbWUsCiAgICAgICAgICApfQogICAgICAgICAgcmVmPXtyZWZ9CiAgICAgICAgICB7Li4ucHJvcHN9CiAgICAgICAgPgogICAgICAgICAge2NoaWxkcmVufQogICAgICAgIDwvZGl2PgogICAgICApCiAgICB9CgogICAgaWYgKGlzTW9iaWxlKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgPFNoZWV0IG9wZW49e29wZW5Nb2JpbGV9IG9uT3BlbkNoYW5nZT17c2V0T3Blbk1vYmlsZX0gey4uLnByb3BzfT4KICAgICAgICAgIDxTaGVldENvbnRlbnQKICAgICAgICAgICAgZGF0YS1zaWRlYmFyPSJzaWRlYmFyIgogICAgICAgICAgICBkYXRhLW1vYmlsZT0idHJ1ZSIKICAgICAgICAgICAgY2xhc3NOYW1lPSJ3LVstLXNpZGViYXItd2lkdGhdIGJnLXNpZGViYXIgcC0wIHRleHQtc2lkZWJhci1mb3JlZ3JvdW5kIFsmPmJ1dHRvbl06aGlkZGVuIgogICAgICAgICAgICBzdHlsZT17CiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJy0tc2lkZWJhci13aWR0aCc6IFNJREVCQVJfV0lEVEhfTU9CSUxFLAogICAgICAgICAgICAgIH0gYXMgUmVhY3QuQ1NTUHJvcGVydGllcwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNpZGU9e3NpZGV9CiAgICAgICAgICA+CiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGgtZnVsbCB3LWZ1bGwgZmxleC1jb2wiPntjaGlsZHJlbn08L2Rpdj4KICAgICAgICAgIDwvU2hlZXRDb250ZW50PgogICAgICAgIDwvU2hlZXQ+CiAgICAgICkKICAgIH0KCiAgICByZXR1cm4gKAogICAgICA8ZGl2CiAgICAgICAgcmVmPXtyZWZ9CiAgICAgICAgY2xhc3NOYW1lPSJncm91cCBwZWVyIGhpZGRlbiBtZDpibG9jayB0ZXh0LXNpZGViYXItZm9yZWdyb3VuZCIKICAgICAgICBkYXRhLXN0YXRlPXtzdGF0ZX0KICAgICAgICBkYXRhLWNvbGxhcHNpYmxlPXtzdGF0ZSA9PT0gJ2NvbGxhcHNlZCcgPyBjb2xsYXBzaWJsZSA6ICcnfQogICAgICAgIGRhdGEtdmFyaWFudD17dmFyaWFudH0KICAgICAgICBkYXRhLXNpZGU9e3NpZGV9CiAgICAgID4KICAgICAgICB7LyogVGhpcyBpcyB3aGF0IGhhbmRsZXMgdGhlIHNpZGViYXIgZ2FwIG9uIGRlc2t0b3AgKi99CiAgICAgICAgPGRpdgogICAgICAgICAgY2xhc3NOYW1lPXtjbigKICAgICAgICAgICAgJ2R1cmF0aW9uLTIwMCByZWxhdGl2ZSBoLXN2aCB3LVstLXNpZGViYXItd2lkdGhdIGJnLXRyYW5zcGFyZW50IHRyYW5zaXRpb24tW3dpZHRoXSBlYXNlLWxpbmVhcicsCiAgICAgICAgICAgICdncm91cC1kYXRhLVtjb2xsYXBzaWJsZT1vZmZjYW52YXNdOnctMCcsCiAgICAgICAgICAgICdncm91cC1kYXRhLVtzaWRlPXJpZ2h0XTpyb3RhdGUtMTgwJywKICAgICAgICAgICAgdmFyaWFudCA9PT0gJ2Zsb2F0aW5nJyB8fCB2YXJpYW50ID09PSAnaW5zZXQnCiAgICAgICAgICAgICAgPyAnZ3JvdXAtZGF0YS1bY29sbGFwc2libGU9aWNvbl06dy1bY2FsYyh2YXIoLS1zaWRlYmFyLXdpZHRoLWljb24pXytfdGhlbWUoc3BhY2luZy40KSldJwogICAgICAgICAgICAgIDogJ2dyb3VwLWRhdGEtW2NvbGxhcHNpYmxlPWljb25dOnctWy0tc2lkZWJhci13aWR0aC1pY29uXScsCiAgICAgICAgICApfQogICAgICAgIC8+CiAgICAgICAgPGRpdgogICAgICAgICAgY2xhc3NOYW1lPXtjbigKICAgICAgICAgICAgJ2R1cmF0aW9uLTIwMCBmaXhlZCBpbnNldC15LTAgei0xMCBoaWRkZW4gaC1zdmggdy1bLS1zaWRlYmFyLXdpZHRoXSB0cmFuc2l0aW9uLVtsZWZ0LHJpZ2h0LHdpZHRoXSBlYXNlLWxpbmVhciBtZDpmbGV4JywKICAgICAgICAgICAgc2lkZSA9PT0gJ2xlZnQnCiAgICAgICAgICAgICAgPyAnbGVmdC0wIGdyb3VwLWRhdGEtW2NvbGxhcHNpYmxlPW9mZmNhbnZhc106bGVmdC1bY2FsYyh2YXIoLS1zaWRlYmFyLXdpZHRoKSotMSldJwogICAgICAgICAgICAgIDogJ3JpZ2h0LTAgZ3JvdXAtZGF0YS1bY29sbGFwc2libGU9b2ZmY2FudmFzXTpyaWdodC1bY2FsYyh2YXIoLS1zaWRlYmFyLXdpZHRoKSotMSldJywKICAgICAgICAgICAgLy8gQWRqdXN0IHRoZSBwYWRkaW5nIGZvciBmbG9hdGluZyBhbmQgaW5zZXQgdmFyaWFudHMuCiAgICAgICAgICAgIHZhcmlhbnQgPT09ICdmbG9hdGluZycgfHwgdmFyaWFudCA9PT0gJ2luc2V0JwogICAgICAgICAgICAgID8gJ3AtMiBncm91cC1kYXRhLVtjb2xsYXBzaWJsZT1pY29uXTp3LVtjYWxjKHZhcigtLXNpZGViYXItd2lkdGgtaWNvbilfK190aGVtZShzcGFjaW5nLjQpXysycHgpXScKICAgICAgICAgICAgICA6ICdncm91cC1kYXRhLVtjb2xsYXBzaWJsZT1pY29uXTp3LVstLXNpZGViYXItd2lkdGgtaWNvbl0gZ3JvdXAtZGF0YS1bc2lkZT1sZWZ0XTpib3JkZXItciBncm91cC1kYXRhLVtzaWRlPXJpZ2h0XTpib3JkZXItbCcsCiAgICAgICAgICAgIGNsYXNzTmFtZSwKICAgICAgICAgICl9CiAgICAgICAgICB7Li4ucHJvcHN9CiAgICAgICAgPgogICAgICAgICAgPGRpdgogICAgICAgICAgICBkYXRhLXNpZGViYXI9InNpZGViYXIiCiAgICAgICAgICAgIGNsYXNzTmFtZT0iZmxleCBoLWZ1bGwgdy1mdWxsIGZsZXgtY29sIGJnLXNpZGViYXIgZ3JvdXAtZGF0YS1bdmFyaWFudD1mbG9hdGluZ106cm91bmRlZC1sZyBncm91cC1kYXRhLVt2YXJpYW50PWZsb2F0aW5nXTpib3JkZXIgZ3JvdXAtZGF0YS1bdmFyaWFudD1mbG9hdGluZ106Ym9yZGVyLXNpZGViYXItYm9yZGVyIGdyb3VwLWRhdGEtW3ZhcmlhbnQ9ZmxvYXRpbmddOnNoYWRvdyIKICAgICAgICAgID4KICAgICAgICAgICAge2NoaWxkcmVufQogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgKQogIH0sCikKU2lkZWJhci5kaXNwbGF5TmFtZSA9ICdTaWRlYmFyJwoKY29uc3QgU2lkZWJhclRyaWdnZXIgPSBSZWFjdC5mb3J3YXJkUmVmPAogIFJlYWN0LkVsZW1lbnRSZWY8dHlwZW9mIEJ1dHRvbj4sCiAgUmVhY3QuQ29tcG9uZW50UHJvcHM8dHlwZW9mIEJ1dHRvbj4KPigoeyBjbGFzc05hbWUsIG9uQ2xpY2ssIC4uLnByb3BzIH0sIHJlZikgPT4gewogIGNvbnN0IHsgdG9nZ2xlU2lkZWJhciB9ID0gdXNlU2lkZWJhcigpCgogIHJldHVybiAoCiAgICA8QnV0dG9uCiAgICAgIHJlZj17cmVmfQogICAgICBkYXRhLXNpZGViYXI9InRyaWdnZXIiCiAgICAgIHZhcmlhbnQ9Imdob3N0IgogICAgICBzaXplPSJpY29uIgogICAgICBjbGFzc05hbWU9e2NuKCdoLTcgdy03JywgY2xhc3NOYW1lKX0KICAgICAgb25DbGljaz17KGV2ZW50KSA9PiB7CiAgICAgICAgb25DbGljaz8uKGV2ZW50KQogICAgICAgIHRvZ2dsZVNpZGViYXIoKQogICAgICB9fQogICAgICB7Li4ucHJvcHN9CiAgICA+CiAgICAgIDxQYW5lbExlZnQgLz4KICAgICAgPHNwYW4gY2xhc3NOYW1lPSJzci1vbmx5Ij5Ub2dnbGUgU2lkZWJhcjwvc3Bhbj4KICAgIDwvQnV0dG9uPgogICkKfSkKU2lkZWJhclRyaWdnZXIuZGlzcGxheU5hbWUgPSAnU2lkZWJhclRyaWdnZXInCgpjb25zdCBTaWRlYmFyUmFpbCA9IFJlYWN0LmZvcndhcmRSZWY8CiAgSFRNTEJ1dHRvbkVsZW1lbnQsCiAgUmVhY3QuQ29tcG9uZW50UHJvcHM8J2J1dHRvbic+Cj4oKHsgY2xhc3NOYW1lLCAuLi5wcm9wcyB9LCByZWYpID0+IHsKICBjb25zdCB7IHRvZ2dsZVNpZGViYXIgfSA9IHVzZVNpZGViYXIoKQoKICByZXR1cm4gKAogICAgPGJ1dHRvbgogICAgICByZWY9e3JlZn0KICAgICAgZGF0YS1zaWRlYmFyPSJyYWlsIgogICAgICBhcmlhLWxhYmVsPSJUb2dnbGUgU2lkZWJhciIKICAgICAgdGFiSW5kZXg9ey0xfQogICAgICBvbkNsaWNrPXt0b2dnbGVTaWRlYmFyfQogICAgICB0aXRsZT0iVG9nZ2xlIFNpZGViYXIiCiAgICAgIGNsYXNzTmFtZT17Y24oCiAgICAgICAgJ2Fic29sdXRlIGluc2V0LXktMCB6LTIwIGhpZGRlbiB3LTQgLXRyYW5zbGF0ZS14LTEvMiB0cmFuc2l0aW9uLWFsbCBlYXNlLWxpbmVhciBhZnRlcjphYnNvbHV0ZSBhZnRlcjppbnNldC15LTAgYWZ0ZXI6bGVmdC0xLzIgYWZ0ZXI6dy1bMnB4XSBob3ZlcjphZnRlcjpiZy1zaWRlYmFyLWJvcmRlciBncm91cC1kYXRhLVtzaWRlPWxlZnRdOi1yaWdodC00IGdyb3VwLWRhdGEtW3NpZGU9cmlnaHRdOmxlZnQtMCBzbTpmbGV4JywKICAgICAgICAnW1tkYXRhLXNpZGU9bGVmdF1fJl06Y3Vyc29yLXctcmVzaXplIFtbZGF0YS1zaWRlPXJpZ2h0XV8mXTpjdXJzb3ItZS1yZXNpemUnLAogICAgICAgICdbW2RhdGEtc2lkZT1sZWZ0XVtkYXRhLXN0YXRlPWNvbGxhcHNlZF1fJl06Y3Vyc29yLWUtcmVzaXplIFtbZGF0YS1zaWRlPXJpZ2h0XVtkYXRhLXN0YXRlPWNvbGxhcHNlZF1fJl06Y3Vyc29yLXctcmVzaXplJywKICAgICAgICAnZ3JvdXAtZGF0YS1bY29sbGFwc2libGU9b2ZmY2FudmFzXTp0cmFuc2xhdGUteC0wIGdyb3VwLWRhdGEtW2NvbGxhcHNpYmxlPW9mZmNhbnZhc106YWZ0ZXI6bGVmdC1mdWxsIGdyb3VwLWRhdGEtW2NvbGxhcHNpYmxlPW9mZmNhbnZhc106aG92ZXI6Ymctc2lkZWJhcicsCiAgICAgICAgJ1tbZGF0YS1zaWRlPWxlZnRdW2RhdGEtY29sbGFwc2libGU9b2ZmY2FudmFzXV8mXTotcmlnaHQtMicsCiAgICAgICAgJ1tbZGF0YS1zaWRlPXJpZ2h0XVtkYXRhLWNvbGxhcHNpYmxlPW9mZmNhbnZhc11fJl06LWxlZnQtMicsCiAgICAgICAgY2xhc3NOYW1lLAogICAgICApfQogICAgICB7Li4ucHJvcHN9CiAgICAvPgogICkKfSkKU2lkZWJhclJhaWwuZGlzcGxheU5hbWUgPSAnU2lkZWJhclJhaWwnCgpjb25zdCBTaWRlYmFySW5zZXQgPSBSZWFjdC5mb3J3YXJkUmVmPAogIEhUTUxEaXZFbGVtZW50LAogIFJlYWN0LkNvbXBvbmVudFByb3BzPCdtYWluJz4KPigoeyBjbGFzc05hbWUsIC4uLnByb3BzIH0sIHJlZikgPT4gewogIHJldHVybiAoCiAgICA8bWFpbgogICAgICByZWY9e3JlZn0KICAgICAgY2xhc3NOYW1lPXtjbigKICAgICAgICAncmVsYXRpdmUgZmxleCBtaW4taC1zdmggZmxleC0xIGZsZXgtY29sIGJnLWJhY2tncm91bmQnLAogICAgICAgICdwZWVyLWRhdGEtW3ZhcmlhbnQ9aW5zZXRdOm1pbi1oLVtjYWxjKDEwMHN2aC10aGVtZShzcGFjaW5nLjQpKV0gbWQ6cGVlci1kYXRhLVt2YXJpYW50PWluc2V0XTptLTIgbWQ6cGVlci1kYXRhLVtzdGF0ZT1jb2xsYXBzZWRdOnBlZXItZGF0YS1bdmFyaWFudD1pbnNldF06bWwtMiBtZDpwZWVyLWRhdGEtW3ZhcmlhbnQ9aW5zZXRdOm1sLTAgbWQ6cGVlci1kYXRhLVt2YXJpYW50PWluc2V0XTpyb3VuZGVkLXhsIG1kOnBlZXItZGF0YS1bdmFyaWFudD1pbnNldF06c2hhZG93JywKICAgICAgICBjbGFzc05hbWUsCiAgICAgICl9CiAgICAgIHsuLi5wcm9wc30KICAgIC8+CiAgKQp9KQpTaWRlYmFySW5zZXQuZGlzcGxheU5hbWUgPSAnU2lkZWJhckluc2V0JwoKY29uc3QgU2lkZWJhcklucHV0ID0gUmVhY3QuZm9yd2FyZFJlZjwKICBSZWFjdC5FbGVtZW50UmVmPHR5cGVvZiBJbnB1dD4sCiAgUmVhY3QuQ29tcG9uZW50UHJvcHM8dHlwZW9mIElucHV0Pgo+KCh7IGNsYXNzTmFtZSwgLi4ucHJvcHMgfSwgcmVmKSA9PiB7CiAgcmV0dXJuICgKICAgIDxJbnB1dAogICAgICByZWY9e3JlZn0KICAgICAgZGF0YS1zaWRlYmFyPSJpbnB1dCIKICAgICAgY2xhc3NOYW1lPXtjbigKICAgICAgICAnaC04IHctZnVsbCBiZy1iYWNrZ3JvdW5kIHNoYWRvdy1ub25lIGZvY3VzLXZpc2libGU6cmluZy0yIGZvY3VzLXZpc2libGU6cmluZy1zaWRlYmFyLXJpbmcnLAogICAgICAgIGNsYXNzTmFtZSwKICAgICAgKX0KICAgICAgey4uLnByb3BzfQogICAgLz4KICApCn0pClNpZGViYXJJbnB1dC5kaXNwbGF5TmFtZSA9ICdTaWRlYmFySW5wdXQnCgpjb25zdCBTaWRlYmFySGVhZGVyID0gUmVhY3QuZm9yd2FyZFJlZjwKICBIVE1MRGl2RWxlbWVudCwKICBSZWFjdC5Db21wb25lbnRQcm9wczwnZGl2Jz4KPigoeyBjbGFzc05hbWUsIC4uLnByb3BzIH0sIHJlZikgPT4gewogIHJldHVybiAoCiAgICA8ZGl2CiAgICAgIHJlZj17cmVmfQogICAgICBkYXRhLXNpZGViYXI9ImhlYWRlciIKICAgICAgY2xhc3NOYW1lPXtjbignZmxleCBmbGV4LWNvbCBnYXAtMiBwLTInLCBjbGFzc05hbWUpfQogICAgICB7Li4ucHJvcHN9CiAgICAvPgogICkKfSkKU2lkZWJhckhlYWRlci5kaXNwbGF5TmFtZSA9ICdTaWRlYmFySGVhZGVyJwoKY29uc3QgU2lkZWJhckZvb3RlciA9IFJlYWN0LmZvcndhcmRSZWY8CiAgSFRNTERpdkVsZW1lbnQsCiAgUmVhY3QuQ29tcG9uZW50UHJvcHM8J2Rpdic+Cj4oKHsgY2xhc3NOYW1lLCAuLi5wcm9wcyB9LCByZWYpID0+IHsKICByZXR1cm4gKAogICAgPGRpdgogICAgICByZWY9e3JlZn0KICAgICAgZGF0YS1zaWRlYmFyPSJmb290ZXIiCiAgICAgIGNsYXNzTmFtZT17Y24oJ2ZsZXggZmxleC1jb2wgZ2FwLTIgcC0yJywgY2xhc3NOYW1lKX0KICAgICAgey4uLnByb3BzfQogICAgLz4KICApCn0pClNpZGViYXJGb290ZXIuZGlzcGxheU5hbWUgPSAnU2lkZWJhckZvb3RlcicKCmNvbnN0IFNpZGViYXJTZXBhcmF0b3IgPSBSZWFjdC5mb3J3YXJkUmVmPAogIFJlYWN0LkVsZW1lbnRSZWY8dHlwZW9mIFNlcGFyYXRvcj4sCiAgUmVhY3QuQ29tcG9uZW50UHJvcHM8dHlwZW9mIFNlcGFyYXRvcj4KPigoeyBjbGFzc05hbWUsIC4uLnByb3BzIH0sIHJlZikgPT4gewogIHJldHVybiAoCiAgICA8U2VwYXJhdG9yCiAgICAgIHJlZj17cmVmfQogICAgICBkYXRhLXNpZGViYXI9InNlcGFyYXRvciIKICAgICAgY2xhc3NOYW1lPXtjbignbXgtMiB3LWF1dG8gYmctc2lkZWJhci1ib3JkZXInLCBjbGFzc05hbWUpfQogICAgICB7Li4ucHJvcHN9CiAgICAvPgogICkKfSkKU2lkZWJhclNlcGFyYXRvci5kaXNwbGF5TmFtZSA9ICdTaWRlYmFyU2VwYXJhdG9yJwoKY29uc3QgU2lkZWJhckNvbnRlbnQgPSBSZWFjdC5mb3J3YXJkUmVmPAogIEhUTUxEaXZFbGVtZW50LAogIFJlYWN0LkNvbXBvbmVudFByb3BzPCdkaXYnPgo+KCh7IGNsYXNzTmFtZSwgLi4ucHJvcHMgfSwgcmVmKSA9PiB7CiAgcmV0dXJuICgKICAgIDxkaXYKICAgICAgcmVmPXtyZWZ9CiAgICAgIGRhdGEtc2lkZWJhcj0iY29udGVudCIKICAgICAgY2xhc3NOYW1lPXtjbigKICAgICAgICAnZmxleCBtaW4taC0wIGZsZXgtMSBmbGV4LWNvbCBnYXAtMiBvdmVyZmxvdy1hdXRvIGdyb3VwLWRhdGEtW2NvbGxhcHNpYmxlPWljb25dOm92ZXJmbG93LWhpZGRlbicsCiAgICAgICAgY2xhc3NOYW1lLAogICAgICApfQogICAgICB7Li4ucHJvcHN9CiAgICAvPgogICkKfSkKU2lkZWJhckNvbnRlbnQuZGlzcGxheU5hbWUgPSAnU2lkZWJhckNvbnRlbnQnCgpjb25zdCBTaWRlYmFyR3JvdXAgPSBSZWFjdC5mb3J3YXJkUmVmPAogIEhUTUxEaXZFbGVtZW50LAogIFJlYWN0LkNvbXBvbmVudFByb3BzPCdkaXYnPgo+KCh7IGNsYXNzTmFtZSwgLi4ucHJvcHMgfSwgcmVmKSA9PiB7CiAgcmV0dXJuICgKICAgIDxkaXYKICAgICAgcmVmPXtyZWZ9CiAgICAgIGRhdGEtc2lkZWJhcj0iZ3JvdXAiCiAgICAgIGNsYXNzTmFtZT17Y24oJ3JlbGF0aXZlIGZsZXggdy1mdWxsIG1pbi13LTAgZmxleC1jb2wgcC0yJywgY2xhc3NOYW1lKX0KICAgICAgey4uLnByb3BzfQogICAgLz4KICApCn0pClNpZGViYXJHcm91cC5kaXNwbGF5TmFtZSA9ICdTaWRlYmFyR3JvdXAnCgpjb25zdCBTaWRlYmFyR3JvdXBMYWJlbCA9IFJlYWN0LmZvcndhcmRSZWY8CiAgSFRNTERpdkVsZW1lbnQsCiAgUmVhY3QuQ29tcG9uZW50UHJvcHM8J2Rpdic+ICYgeyBhc0NoaWxkPzogYm9vbGVhbiB9Cj4oKHsgY2xhc3NOYW1lLCBhc0NoaWxkID0gZmFsc2UsIC4uLnByb3BzIH0sIHJlZikgPT4gewogIGNvbnN0IENvbXAgPSBhc0NoaWxkID8gU2xvdCA6ICdkaXYnCgogIHJldHVybiAoCiAgICA8Q29tcAogICAgICByZWY9e3JlZn0KICAgICAgZGF0YS1zaWRlYmFyPSJncm91cC1sYWJlbCIKICAgICAgY2xhc3NOYW1lPXtjbigKICAgICAgICAnZHVyYXRpb24tMjAwIGZsZXggaC04IHNocmluay0wIGl0ZW1zLWNlbnRlciByb3VuZGVkLW1kIHB4LTIgdGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LXNpZGViYXItZm9yZWdyb3VuZC83MCBvdXRsaW5lLW5vbmUgcmluZy1zaWRlYmFyLXJpbmcgdHJhbnNpdGlvbi1bbWFyZ2luLG9wYV0gZWFzZS1saW5lYXIgZm9jdXMtdmlzaWJsZTpyaW5nLTIgWyY+c3ZnXTpzaXplLTQgWyY+c3ZnXTpzaHJpbmstMCcsCiAgICAgICAgJ2dyb3VwLWRhdGEtW2NvbGxhcHNpYmxlPWljb25dOi1tdC04IGdyb3VwLWRhdGEtW2NvbGxhcHNpYmxlPWljb25dOm9wYWNpdHktMCcsCiAgICAgICAgY2xhc3NOYW1lLAogICAgICApfQogICAgICB7Li4ucHJvcHN9CiAgICAvPgogICkKfSkKU2lkZWJhckdyb3VwTGFiZWwuZGlzcGxheU5hbWUgPSAnU2lkZWJhckdyb3VwTGFiZWwnCgpjb25zdCBTaWRlYmFyR3JvdXBBY3Rpb24gPSBSZWFjdC5mb3J3YXJkUmVmPAogIEhUTUxCdXR0b25FbGVtZW50LAogIFJlYWN0LkNvbXBvbmVudFByb3BzPCdidXR0b24nPiAmIHsgYXNDaGlsZD86IGJvb2xlYW4gfQo+KCh7IGNsYXNzTmFtZSwgYXNDaGlsZCA9IGZhbHNlLCAuLi5wcm9wcyB9LCByZWYpID0+IHsKICBjb25zdCBDb21wID0gYXNDaGlsZCA/IFNsb3QgOiAnYnV0dG9uJwoKICByZXR1cm4gKAogICAgPENvbXAKICAgICAgcmVmPXtyZWZ9CiAgICAgIGRhdGEtc2lkZWJhcj0iZ3JvdXAtYWN0aW9uIgogICAgICBjbGFzc05hbWU9e2NuKAogICAgICAgICdhYnNvbHV0ZSByaWdodC0zIHRvcC0zLjUgZmxleCBhc3BlY3Qtc3F1YXJlIHctNSBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcm91bmRlZC1tZCBwLTAgdGV4dC1zaWRlYmFyLWZvcmVncm91bmQgb3V0bGluZS1ub25lIHJpbmctc2lkZWJhci1yaW5nIHRyYW5zaXRpb24tdHJhbnNmb3JtIGhvdmVyOmJnLXNpZGViYXItYWNjZW50IGhvdmVyOnRleHQtc2lkZWJhci1hY2NlbnQtZm9yZWdyb3VuZCBmb2N1cy12aXNpYmxlOnJpbmctMiBbJj5zdmddOnNpemUtNCBbJj5zdmddOnNocmluay0wJywKICAgICAgICAvLyBJbmNyZWFzZXMgdGhlIGhpdCBhcmVhIG9mIHRoZSBidXR0b24gb24gbW9iaWxlLgogICAgICAgICdhZnRlcjphYnNvbHV0ZSBhZnRlcjotaW5zZXQtMiBhZnRlcjptZDpoaWRkZW4nLAogICAgICAgICdncm91cC1kYXRhLVtjb2xsYXBzaWJsZT1pY29uXTpoaWRkZW4nLAogICAgICAgIGNsYXNzTmFtZSwKICAgICAgKX0KICAgICAgey4uLnByb3BzfQogICAgLz4KICApCn0pClNpZGViYXJHcm91cEFjdGlvbi5kaXNwbGF5TmFtZSA9ICdTaWRlYmFyR3JvdXBBY3Rpb24nCgpjb25zdCBTaWRlYmFyR3JvdXBDb250ZW50ID0gUmVhY3QuZm9yd2FyZFJlZjwKICBIVE1MRGl2RWxlbWVudCwKICBSZWFjdC5Db21wb25lbnRQcm9wczwnZGl2Jz4KPigoeyBjbGFzc05hbWUsIC4uLnByb3BzIH0sIHJlZikgPT4gKAogIDxkaXYKICAgIHJlZj17cmVmfQogICAgZGF0YS1zaWRlYmFyPSJncm91cC1jb250ZW50IgogICAgY2xhc3NOYW1lPXtjbigndy1mdWxsIHRleHQtc20nLCBjbGFzc05hbWUpfQogICAgey4uLnByb3BzfQogIC8+CikpClNpZGViYXJHcm91cENvbnRlbnQuZGlzcGxheU5hbWUgPSAnU2lkZWJhckdyb3VwQ29udGVudCcKCmNvbnN0IFNpZGViYXJNZW51ID0gUmVhY3QuZm9yd2FyZFJlZjwKICBIVE1MVUxpc3RFbGVtZW50LAogIFJlYWN0LkNvbXBvbmVudFByb3BzPCd1bCc+Cj4oKHsgY2xhc3NOYW1lLCAuLi5wcm9wcyB9LCByZWYpID0+ICgKICA8dWwKICAgIHJlZj17cmVmfQogICAgZGF0YS1zaWRlYmFyPSJtZW51IgogICAgY2xhc3NOYW1lPXtjbignZmxleCB3LWZ1bGwgbWluLXctMCBmbGV4LWNvbCBnYXAtMScsIGNsYXNzTmFtZSl9CiAgICB7Li4ucHJvcHN9CiAgLz4KKSkKU2lkZWJhck1lbnUuZGlzcGxheU5hbWUgPSAnU2lkZWJhck1lbnUnCgpjb25zdCBTaWRlYmFyTWVudUl0ZW0gPSBSZWFjdC5mb3J3YXJkUmVmPAogIEhUTUxMSUVsZW1lbnQsCiAgUmVhY3QuQ29tcG9uZW50UHJvcHM8J2xpJz4KPigoeyBjbGFzc05hbWUsIC4uLnByb3BzIH0sIHJlZikgPT4gKAogIDxsaQogICAgcmVmPXtyZWZ9CiAgICBkYXRhLXNpZGViYXI9Im1lbnUtaXRlbSIKICAgIGNsYXNzTmFtZT17Y24oJ2dyb3VwL21lbnUtaXRlbSByZWxhdGl2ZScsIGNsYXNzTmFtZSl9CiAgICB7Li4ucHJvcHN9CiAgLz4KKSkKU2lkZWJhck1lbnVJdGVtLmRpc3BsYXlOYW1lID0gJ1NpZGViYXJNZW51SXRlbScKCmNvbnN0IHNpZGViYXJNZW51QnV0dG9uVmFyaWFudHMgPSBjdmEoCiAgJ3BlZXIvbWVudS1idXR0b24gZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyIGdhcC0yIG92ZXJmbG93LWhpZGRlbiByb3VuZGVkLW1kIHAtMiB0ZXh0LWxlZnQgdGV4dC1zbSBvdXRsaW5lLW5vbmUgcmluZy1zaWRlYmFyLXJpbmcgdHJhbnNpdGlvbi1bd2lkdGgsaGVpZ2h0LHBhZGRpbmddIGhvdmVyOmJnLXNpZGViYXItYWNjZW50IGhvdmVyOnRleHQtc2lkZWJhci1hY2NlbnQtZm9yZWdyb3VuZCBmb2N1cy12aXNpYmxlOnJpbmctMiBhY3RpdmU6Ymctc2lkZWJhci1hY2NlbnQgYWN0aXZlOnRleHQtc2lkZWJhci1hY2NlbnQtZm9yZWdyb3VuZCBkaXNhYmxlZDpwb2ludGVyLWV2ZW50cy1ub25lIGRpc2FibGVkOm9wYWNpdHktNTAgZ3JvdXAtaGFzLVtbZGF0YS1zaWRlYmFyPW1lbnUtYWN0aW9uXV0vbWVudS1pdGVtOnByLTggYXJpYS1kaXNhYmxlZDpwb2ludGVyLWV2ZW50cy1ub25lIGFyaWEtZGlzYWJsZWQ6b3BhY2l0eS01MCBkYXRhLVthY3RpdmU9dHJ1ZV06Ymctc2lkZWJhci1hY2NlbnQgZGF0YS1bYWN0aXZlPXRydWVdOmZvbnQtbWVkaXVtIGRhdGEtW2FjdGl2ZT10cnVlXTp0ZXh0LXNpZGViYXItYWNjZW50LWZvcmVncm91bmQgZGF0YS1bc3RhdGU9b3Blbl06aG92ZXI6Ymctc2lkZWJhci1hY2NlbnQgZGF0YS1bc3RhdGU9b3Blbl06aG92ZXI6dGV4dC1zaWRlYmFyLWFjY2VudC1mb3JlZ3JvdW5kIGdyb3VwLWRhdGEtW2NvbGxhcHNpYmxlPWljb25dOiFzaXplLTggZ3JvdXAtZGF0YS1bY29sbGFwc2libGU9aWNvbl06IXAtMiBbJj5zcGFuOmxhc3QtY2hpbGRdOnRydW5jYXRlIFsmPnN2Z106c2l6ZS00IFsmPnN2Z106c2hyaW5rLTAnLAogIHsKICAgIHZhcmlhbnRzOiB7CiAgICAgIHZhcmlhbnQ6IHsKICAgICAgICBkZWZhdWx0OiAnaG92ZXI6Ymctc2lkZWJhci1hY2NlbnQgaG92ZXI6dGV4dC1zaWRlYmFyLWFjY2VudC1mb3JlZ3JvdW5kJywKICAgICAgICBvdXRsaW5lOgogICAgICAgICAgJ2JnLWJhY2tncm91bmQgc2hhZG93LVswXzBfMF8xcHhfaHNsKHZhcigtLXNpZGViYXItYm9yZGVyKSldIGhvdmVyOmJnLXNpZGViYXItYWNjZW50IGhvdmVyOnRleHQtc2lkZWJhci1hY2NlbnQtZm9yZWdyb3VuZCBob3ZlcjpzaGFkb3ctWzBfMF8wXzFweF9oc2wodmFyKC0tc2lkZWJhci1hY2NlbnQpKV0nLAogICAgICB9LAogICAgICBzaXplOiB7CiAgICAgICAgZGVmYXVsdDogJ2gtOCB0ZXh0LXNtJywKICAgICAgICBzbTogJ2gtNyB0ZXh0LXhzJywKICAgICAgICBsZzogJ2gtMTIgdGV4dC1zbSBncm91cC1kYXRhLVtjb2xsYXBzaWJsZT1pY29uXTohcC0wJywKICAgICAgfSwKICAgIH0sCiAgICBkZWZhdWx0VmFyaWFudHM6IHsKICAgICAgdmFyaWFudDogJ2RlZmF1bHQnLAogICAgICBzaXplOiAnZGVmYXVsdCcsCiAgICB9LAogIH0sCikKCmNvbnN0IFNpZGViYXJNZW51QnV0dG9uID0gUmVhY3QuZm9yd2FyZFJlZjwKICBIVE1MQnV0dG9uRWxlbWVudCwKICBSZWFjdC5Db21wb25lbnRQcm9wczwnYnV0dG9uJz4gJiB7CiAgICBhc0NoaWxkPzogYm9vbGVhbgogICAgaXNBY3RpdmU/OiBib29sZWFuCiAgICB0b29sdGlwPzogc3RyaW5nIHwgUmVhY3QuQ29tcG9uZW50UHJvcHM8dHlwZW9mIFRvb2x0aXBDb250ZW50PgogIH0gJiBWYXJpYW50UHJvcHM8dHlwZW9mIHNpZGViYXJNZW51QnV0dG9uVmFyaWFudHM+Cj4oCiAgKAogICAgewogICAgICBhc0NoaWxkID0gZmFsc2UsCiAgICAgIGlzQWN0aXZlID0gZmFsc2UsCiAgICAgIHZhcmlhbnQgPSAnZGVmYXVsdCcsCiAgICAgIHNpemUgPSAnZGVmYXVsdCcsCiAgICAgIHRvb2x0aXAsCiAgICAgIGNsYXNzTmFtZSwKICAgICAgLi4ucHJvcHMKICAgIH0sCiAgICByZWYsCiAgKSA9PiB7CiAgICBjb25zdCBDb21wID0gYXNDaGlsZCA/IFNsb3QgOiAnYnV0dG9uJwogICAgY29uc3QgeyBpc01vYmlsZSwgc3RhdGUgfSA9IHVzZVNpZGViYXIoKQoKICAgIGNvbnN0IGJ1dHRvbiA9ICgKICAgICAgPENvbXAKICAgICAgICByZWY9e3JlZn0KICAgICAgICBkYXRhLXNpZGViYXI9Im1lbnUtYnV0dG9uIgogICAgICAgIGRhdGEtc2l6ZT17c2l6ZX0KICAgICAgICBkYXRhLWFjdGl2ZT17aXNBY3RpdmV9CiAgICAgICAgY2xhc3NOYW1lPXtjbihzaWRlYmFyTWVudUJ1dHRvblZhcmlhbnRzKHsgdmFyaWFudCwgc2l6ZSB9KSwgY2xhc3NOYW1lKX0KICAgICAgICB7Li4ucHJvcHN9CiAgICAgIC8+CiAgICApCgogICAgaWYgKCF0b29sdGlwKSB7CiAgICAgIHJldHVybiBidXR0b24KICAgIH0KCiAgICBpZiAodHlwZW9mIHRvb2x0aXAgPT09ICdzdHJpbmcnKSB7CiAgICAgIHRvb2x0aXAgPSB7CiAgICAgICAgY2hpbGRyZW46IHRvb2x0aXAsCiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gKAogICAgICA8VG9vbHRpcD4KICAgICAgICA8VG9vbHRpcFRyaWdnZXIgYXNDaGlsZD57YnV0dG9ufTwvVG9vbHRpcFRyaWdnZXI+CiAgICAgICAgPFRvb2x0aXBDb250ZW50CiAgICAgICAgICBzaWRlPSJyaWdodCIKICAgICAgICAgIGFsaWduPSJjZW50ZXIiCiAgICAgICAgICBoaWRkZW49e3N0YXRlICE9PSAnY29sbGFwc2VkJyB8fCBpc01vYmlsZX0KICAgICAgICAgIHsuLi50b29sdGlwfQogICAgICAgIC8+CiAgICAgIDwvVG9vbHRpcD4KICAgICkKICB9LAopClNpZGViYXJNZW51QnV0dG9uLmRpc3BsYXlOYW1lID0gJ1NpZGViYXJNZW51QnV0dG9uJwoKY29uc3QgU2lkZWJhck1lbnVBY3Rpb24gPSBSZWFjdC5mb3J3YXJkUmVmPAogIEhUTUxCdXR0b25FbGVtZW50LAogIFJlYWN0LkNvbXBvbmVudFByb3BzPCdidXR0b24nPiAmIHsKICAgIGFzQ2hpbGQ/OiBib29sZWFuCiAgICBzaG93T25Ib3Zlcj86IGJvb2xlYW4KICB9Cj4oKHsgY2xhc3NOYW1lLCBhc0NoaWxkID0gZmFsc2UsIHNob3dPbkhvdmVyID0gZmFsc2UsIC4uLnByb3BzIH0sIHJlZikgPT4gewogIGNvbnN0IENvbXAgPSBhc0NoaWxkID8gU2xvdCA6ICdidXR0b24nCgogIHJldHVybiAoCiAgICA8Q29tcAogICAgICByZWY9e3JlZn0KICAgICAgZGF0YS1zaWRlYmFyPSJtZW51LWFjdGlvbiIKICAgICAgY2xhc3NOYW1lPXtjbigKICAgICAgICAnYWJzb2x1dGUgcmlnaHQtMSB0b3AtMS41IGZsZXggYXNwZWN0LXNxdWFyZSB3LTUgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHJvdW5kZWQtbWQgcC0wIHRleHQtc2lkZWJhci1mb3JlZ3JvdW5kIG91dGxpbmUtbm9uZSByaW5nLXNpZGViYXItcmluZyB0cmFuc2l0aW9uLXRyYW5zZm9ybSBob3ZlcjpiZy1zaWRlYmFyLWFjY2VudCBob3Zlcjp0ZXh0LXNpZGViYXItYWNjZW50LWZvcmVncm91bmQgZm9jdXMtdmlzaWJsZTpyaW5nLTIgcGVlci1ob3Zlci9tZW51LWJ1dHRvbjp0ZXh0LXNpZGViYXItYWNjZW50LWZvcmVncm91bmQgWyY+c3ZnXTpzaXplLTQgWyY+c3ZnXTpzaHJpbmstMCcsCiAgICAgICAgLy8gSW5jcmVhc2VzIHRoZSBoaXQgYXJlYSBvZiB0aGUgYnV0dG9uIG9uIG1vYmlsZS4KICAgICAgICAnYWZ0ZXI6YWJzb2x1dGUgYWZ0ZXI6LWluc2V0LTIgYWZ0ZXI6bWQ6aGlkZGVuJywKICAgICAgICAncGVlci1kYXRhLVtzaXplPXNtXS9tZW51LWJ1dHRvbjp0b3AtMScsCiAgICAgICAgJ3BlZXItZGF0YS1bc2l6ZT1kZWZhdWx0XS9tZW51LWJ1dHRvbjp0b3AtMS41JywKICAgICAgICAncGVlci1kYXRhLVtzaXplPWxnXS9tZW51LWJ1dHRvbjp0b3AtMi41JywKICAgICAgICAnZ3JvdXAtZGF0YS1bY29sbGFwc2libGU9aWNvbl06aGlkZGVuJywKICAgICAgICBzaG93T25Ib3ZlciAmJgogICAgICAgICAgJ2dyb3VwLWZvY3VzLXdpdGhpbi9tZW51LWl0ZW06b3BhY2l0eS0xMDAgZ3JvdXAtaG92ZXIvbWVudS1pdGVtOm9wYWNpdHktMTAwIGRhdGEtW3N0YXRlPW9wZW5dOm9wYWNpdHktMTAwIHBlZXItZGF0YS1bYWN0aXZlPXRydWVdL21lbnUtYnV0dG9uOnRleHQtc2lkZWJhci1hY2NlbnQtZm9yZWdyb3VuZCBtZDpvcGFjaXR5LTAnLAogICAgICAgIGNsYXNzTmFtZSwKICAgICAgKX0KICAgICAgey4uLnByb3BzfQogICAgLz4KICApCn0pClNpZGViYXJNZW51QWN0aW9uLmRpc3BsYXlOYW1lID0gJ1NpZGViYXJNZW51QWN0aW9uJwoKY29uc3QgU2lkZWJhck1lbnVCYWRnZSA9IFJlYWN0LmZvcndhcmRSZWY8CiAgSFRNTERpdkVsZW1lbnQsCiAgUmVhY3QuQ29tcG9uZW50UHJvcHM8J2Rpdic+Cj4oKHsgY2xhc3NOYW1lLCAuLi5wcm9wcyB9LCByZWYpID0+ICgKICA8ZGl2CiAgICByZWY9e3JlZn0KICAgIGRhdGEtc2lkZWJhcj0ibWVudS1iYWRnZSIKICAgIGNsYXNzTmFtZT17Y24oCiAgICAgICdhYnNvbHV0ZSByaWdodC0xIGZsZXggaC01IG1pbi13LTUgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHJvdW5kZWQtbWQgcHgtMSB0ZXh0LXhzIGZvbnQtbWVkaXVtIHRhYnVsYXItbnVtcyB0ZXh0LXNpZGViYXItZm9yZWdyb3VuZCBzZWxlY3Qtbm9uZSBwb2ludGVyLWV2ZW50cy1ub25lJywKICAgICAgJ3BlZXItaG92ZXIvbWVudS1idXR0b246dGV4dC1zaWRlYmFyLWFjY2VudC1mb3JlZ3JvdW5kIHBlZXItZGF0YS1bYWN0aXZlPXRydWVdL21lbnUtYnV0dG9uOnRleHQtc2lkZWJhci1hY2NlbnQtZm9yZWdyb3VuZCcsCiAgICAgICdwZWVyLWRhdGEtW3NpemU9c21dL21lbnUtYnV0dG9uOnRvcC0xJywKICAgICAgJ3BlZXItZGF0YS1bc2l6ZT1kZWZhdWx0XS9tZW51LWJ1dHRvbjp0b3AtMS41JywKICAgICAgJ3BlZXItZGF0YS1bc2l6ZT1sZ10vbWVudS1idXR0b246dG9wLTIuNScsCiAgICAgICdncm91cC1kYXRhLVtjb2xsYXBzaWJsZT1pY29uXTpoaWRkZW4nLAogICAgICBjbGFzc05hbWUsCiAgICApfQogICAgey4uLnByb3BzfQogIC8+CikpClNpZGViYXJNZW51QmFkZ2UuZGlzcGxheU5hbWUgPSAnU2lkZWJhck1lbnVCYWRnZScKCmNvbnN0IFNpZGViYXJNZW51U2tlbGV0b24gPSBSZWFjdC5mb3J3YXJkUmVmPAogIEhUTUxEaXZFbGVtZW50LAogIFJlYWN0LkNvbXBvbmVudFByb3BzPCdkaXYnPiAmIHsKICAgIHNob3dJY29uPzogYm9vbGVhbgogIH0KPigoeyBjbGFzc05hbWUsIHNob3dJY29uID0gZmFsc2UsIC4uLnByb3BzIH0sIHJlZikgPT4gewogIC8vIFJhbmRvbSB3aWR0aCBiZXR3ZWVuIDUwIHRvIDkwJS4KICBjb25zdCB3aWR0aCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gewogICAgcmV0dXJuIGAke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDQwKSArIDUwfSVgCiAgfSwgW10pCgogIHJldHVybiAoCiAgICA8ZGl2CiAgICAgIHJlZj17cmVmfQogICAgICBkYXRhLXNpZGViYXI9Im1lbnUtc2tlbGV0b24iCiAgICAgIGNsYXNzTmFtZT17Y24oJ3JvdW5kZWQtbWQgaC04IGZsZXggZ2FwLTIgcHgtMiBpdGVtcy1jZW50ZXInLCBjbGFzc05hbWUpfQogICAgICB7Li4ucHJvcHN9CiAgICA+CiAgICAgIHtzaG93SWNvbiAmJiAoCiAgICAgICAgPFNrZWxldG9uCiAgICAgICAgICBjbGFzc05hbWU9InNpemUtNCByb3VuZGVkLW1kIgogICAgICAgICAgZGF0YS1zaWRlYmFyPSJtZW51LXNrZWxldG9uLWljb24iCiAgICAgICAgLz4KICAgICAgKX0KICAgICAgPFNrZWxldG9uCiAgICAgICAgY2xhc3NOYW1lPSJoLTQgZmxleC0xIG1heC13LVstLXNrZWxldG9uLXdpZHRoXSIKICAgICAgICBkYXRhLXNpZGViYXI9Im1lbnUtc2tlbGV0b24tdGV4dCIKICAgICAgICBzdHlsZT17CiAgICAgICAgICB7CiAgICAgICAgICAgICctLXNrZWxldG9uLXdpZHRoJzogd2lkdGgsCiAgICAgICAgICB9IGFzIFJlYWN0LkNTU1Byb3BlcnRpZXMKICAgICAgICB9CiAgICAgIC8+CiAgICA8L2Rpdj4KICApCn0pClNpZGViYXJNZW51U2tlbGV0b24uZGlzcGxheU5hbWUgPSAnU2lkZWJhck1lbnVTa2VsZXRvbicKCmNvbnN0IFNpZGViYXJNZW51U3ViID0gUmVhY3QuZm9yd2FyZFJlZjwKICBIVE1MVUxpc3RFbGVtZW50LAogIFJlYWN0LkNvbXBvbmVudFByb3BzPCd1bCc+Cj4oKHsgY2xhc3NOYW1lLCAuLi5wcm9wcyB9LCByZWYpID0+ICgKICA8dWwKICAgIHJlZj17cmVmfQogICAgZGF0YS1zaWRlYmFyPSJtZW51LXN1YiIKICAgIGNsYXNzTmFtZT17Y24oCiAgICAgICdteC0zLjUgZmxleCBtaW4tdy0wIHRyYW5zbGF0ZS14LXB4IGZsZXgtY29sIGdhcC0xIGJvcmRlci1sIGJvcmRlci1zaWRlYmFyLWJvcmRlciBweC0yLjUgcHktMC41JywKICAgICAgJ2dyb3VwLWRhdGEtW2NvbGxhcHNpYmxlPWljb25dOmhpZGRlbicsCiAgICAgIGNsYXNzTmFtZSwKICAgICl9CiAgICB7Li4ucHJvcHN9CiAgLz4KKSkKU2lkZWJhck1lbnVTdWIuZGlzcGxheU5hbWUgPSAnU2lkZWJhck1lbnVTdWInCgpjb25zdCBTaWRlYmFyTWVudVN1Ykl0ZW0gPSBSZWFjdC5mb3J3YXJkUmVmPAogIEhUTUxMSUVsZW1lbnQsCiAgUmVhY3QuQ29tcG9uZW50UHJvcHM8J2xpJz4KPigoeyAuLi5wcm9wcyB9LCByZWYpID0+IDxsaSByZWY9e3JlZn0gey4uLnByb3BzfSAvPikKU2lkZWJhck1lbnVTdWJJdGVtLmRpc3BsYXlOYW1lID0gJ1NpZGViYXJNZW51U3ViSXRlbScKCmNvbnN0IFNpZGViYXJNZW51U3ViQnV0dG9uID0gUmVhY3QuZm9yd2FyZFJlZjwKICBIVE1MQW5jaG9yRWxlbWVudCwKICBSZWFjdC5Db21wb25lbnRQcm9wczwnYSc+ICYgewogICAgYXNDaGlsZD86IGJvb2xlYW4KICAgIHNpemU/OiAnc20nIHwgJ21kJwogICAgaXNBY3RpdmU/OiBib29sZWFuCiAgfQo+KCh7IGFzQ2hpbGQgPSBmYWxzZSwgc2l6ZSA9ICdtZCcsIGlzQWN0aXZlLCBjbGFzc05hbWUsIC4uLnByb3BzIH0sIHJlZikgPT4gewogIGNvbnN0IENvbXAgPSBhc0NoaWxkID8gU2xvdCA6ICdhJwoKICByZXR1cm4gKAogICAgPENvbXAKICAgICAgcmVmPXtyZWZ9CiAgICAgIGRhdGEtc2lkZWJhcj0ibWVudS1zdWItYnV0dG9uIgogICAgICBkYXRhLXNpemU9e3NpemV9CiAgICAgIGRhdGEtYWN0aXZlPXtpc0FjdGl2ZX0KICAgICAgY2xhc3NOYW1lPXtjbigKICAgICAgICAnZmxleCBoLTcgbWluLXctMCAtdHJhbnNsYXRlLXgtcHggaXRlbXMtY2VudGVyIGdhcC0yIG92ZXJmbG93LWhpZGRlbiByb3VuZGVkLW1kIHB4LTIgdGV4dC1zaWRlYmFyLWZvcmVncm91bmQgb3V0bGluZS1ub25lIHJpbmctc2lkZWJhci1yaW5nIGhvdmVyOmJnLXNpZGViYXItYWNjZW50IGhvdmVyOnRleHQtc2lkZWJhci1hY2NlbnQtZm9yZWdyb3VuZCBmb2N1cy12aXNpYmxlOnJpbmctMiBhY3RpdmU6Ymctc2lkZWJhci1hY2NlbnQgYWN0aXZlOnRleHQtc2lkZWJhci1hY2NlbnQtZm9yZWdyb3VuZCBkaXNhYmxlZDpwb2ludGVyLWV2ZW50cy1ub25lIGRpc2FibGVkOm9wYWNpdHktNTAgYXJpYS1kaXNhYmxlZDpwb2ludGVyLWV2ZW50cy1ub25lIGFyaWEtZGlzYWJsZWQ6b3BhY2l0eS01MCBbJj5zcGFuOmxhc3QtY2hpbGRdOnRydW5jYXRlIFsmPnN2Z106c2l6ZS00IFsmPnN2Z106c2hyaW5rLTAgWyY+c3ZnXTp0ZXh0LXNpZGViYXItYWNjZW50LWZvcmVncm91bmQnLAogICAgICAgICdkYXRhLVthY3RpdmU9dHJ1ZV06Ymctc2lkZWJhci1hY2NlbnQgZGF0YS1bYWN0aXZlPXRydWVdOnRleHQtc2lkZWJhci1hY2NlbnQtZm9yZWdyb3VuZCcsCiAgICAgICAgc2l6ZSA9PT0gJ3NtJyAmJiAndGV4dC14cycsCiAgICAgICAgc2l6ZSA9PT0gJ21kJyAmJiAndGV4dC1zbScsCiAgICAgICAgJ2dyb3VwLWRhdGEtW2NvbGxhcHNpYmxlPWljb25dOmhpZGRlbicsCiAgICAgICAgY2xhc3NOYW1lLAogICAgICApfQogICAgICB7Li4ucHJvcHN9CiAgICAvPgogICkKfSkKU2lkZWJhck1lbnVTdWJCdXR0b24uZGlzcGxheU5hbWUgPSAnU2lkZWJhck1lbnVTdWJCdXR0b24nCgpleHBvcnQgewogIFNpZGViYXIsCiAgU2lkZWJhckNvbnRlbnQsCiAgU2lkZWJhckZvb3RlciwKICBTaWRlYmFyR3JvdXAsCiAgU2lkZWJhckdyb3VwQWN0aW9uLAogIFNpZGViYXJHcm91cENvbnRlbnQsCiAgU2lkZWJhckdyb3VwTGFiZWwsCiAgU2lkZWJhckhlYWRlciwKICBTaWRlYmFySW5wdXQsCiAgU2lkZWJhckluc2V0LAogIFNpZGViYXJNZW51LAogIFNpZGViYXJNZW51QWN0aW9uLAogIFNpZGViYXJNZW51QmFkZ2UsCiAgU2lkZWJhck1lbnVCdXR0b24sCiAgU2lkZWJhck1lbnVJdGVtLAogIFNpZGViYXJNZW51U2tlbGV0b24sCiAgU2lkZWJhck1lbnVTdWIsCiAgU2lkZWJhck1lbnVTdWJCdXR0b24sCiAgU2lkZWJhck1lbnVTdWJJdGVtLAogIFNpZGViYXJQcm92aWRlciwKICBTaWRlYmFyUmFpbCwKICBTaWRlYmFyU2VwYXJhdG9yLAogIFNpZGViYXJUcmlnZ2VyLAogIHVzZVNpZGViYXIsCn0K"}