{"data":"J3VzZSBjbGllbnQnCgppbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCcKaW1wb3J0IHsKICBDaGV2cm9uRG93bkljb24sCiAgQ2hldnJvbkxlZnRJY29uLAogIENoZXZyb25SaWdodEljb24sCn0gZnJvbSAnbHVjaWRlLXJlYWN0JwppbXBvcnQgeyBEYXlCdXR0b24sIERheVBpY2tlciwgZ2V0RGVmYXVsdENsYXNzTmFtZXMgfSBmcm9tICdyZWFjdC1kYXktcGlja2VyJwoKaW1wb3J0IHsgY24gfSBmcm9tICdAL2xpYi91dGlscycKaW1wb3J0IHsgQnV0dG9uLCBidXR0b25WYXJpYW50cyB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9idXR0b24nCgpmdW5jdGlvbiBDYWxlbmRhcih7CiAgY2xhc3NOYW1lLAogIGNsYXNzTmFtZXMsCiAgc2hvd091dHNpZGVEYXlzID0gdHJ1ZSwKICBjYXB0aW9uTGF5b3V0ID0gJ2xhYmVsJywKICBidXR0b25WYXJpYW50ID0gJ2dob3N0JywKICBmb3JtYXR0ZXJzLAogIGNvbXBvbmVudHMsCiAgLi4ucHJvcHMKfTogUmVhY3QuQ29tcG9uZW50UHJvcHM8dHlwZW9mIERheVBpY2tlcj4gJiB7CiAgYnV0dG9uVmFyaWFudD86IFJlYWN0LkNvbXBvbmVudFByb3BzPHR5cGVvZiBCdXR0b24+Wyd2YXJpYW50J10KfSkgewogIGNvbnN0IGRlZmF1bHRDbGFzc05hbWVzID0gZ2V0RGVmYXVsdENsYXNzTmFtZXMoKQoKICByZXR1cm4gKAogICAgPERheVBpY2tlcgogICAgICBzaG93T3V0c2lkZURheXM9e3Nob3dPdXRzaWRlRGF5c30KICAgICAgY2xhc3NOYW1lPXtjbigKICAgICAgICAnYmctYmFja2dyb3VuZCBncm91cC9jYWxlbmRhciBwLTMgWy0tY2VsbC1zaXplOi0tc3BhY2luZyg4KV0gW1tkYXRhLXNsb3Q9Y2FyZC1jb250ZW50XV8mXTpiZy10cmFuc3BhcmVudCBbW2RhdGEtc2xvdD1wb3BvdmVyLWNvbnRlbnRdXyZdOmJnLXRyYW5zcGFyZW50JywKICAgICAgICBTdHJpbmcucmF3YHJ0bDoqKjpbLnJkcC1idXR0b25cX25leHQ+c3ZnXTpyb3RhdGUtMTgwYCwKICAgICAgICBTdHJpbmcucmF3YHJ0bDoqKjpbLnJkcC1idXR0b25cX3ByZXZpb3VzPnN2Z106cm90YXRlLTE4MGAsCiAgICAgICAgY2xhc3NOYW1lLAogICAgICApfQogICAgICBjYXB0aW9uTGF5b3V0PXtjYXB0aW9uTGF5b3V0fQogICAgICBmb3JtYXR0ZXJzPXt7CiAgICAgICAgZm9ybWF0TW9udGhEcm9wZG93bjogKGRhdGUpID0+CiAgICAgICAgICBkYXRlLnRvTG9jYWxlU3RyaW5nKCdkZWZhdWx0JywgeyBtb250aDogJ3Nob3J0JyB9KSwKICAgICAgICAuLi5mb3JtYXR0ZXJzLAogICAgICB9fQogICAgICBjbGFzc05hbWVzPXt7CiAgICAgICAgcm9vdDogY24oJ3ctZml0JywgZGVmYXVsdENsYXNzTmFtZXMucm9vdCksCiAgICAgICAgbW9udGhzOiBjbigKICAgICAgICAgICdmbGV4IGdhcC00IGZsZXgtY29sIG1kOmZsZXgtcm93IHJlbGF0aXZlJywKICAgICAgICAgIGRlZmF1bHRDbGFzc05hbWVzLm1vbnRocywKICAgICAgICApLAogICAgICAgIG1vbnRoOiBjbignZmxleCBmbGV4LWNvbCB3LWZ1bGwgZ2FwLTQnLCBkZWZhdWx0Q2xhc3NOYW1lcy5tb250aCksCiAgICAgICAgbmF2OiBjbigKICAgICAgICAgICdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSB3LWZ1bGwgYWJzb2x1dGUgdG9wLTAgaW5zZXQteC0wIGp1c3RpZnktYmV0d2VlbicsCiAgICAgICAgICBkZWZhdWx0Q2xhc3NOYW1lcy5uYXYsCiAgICAgICAgKSwKICAgICAgICBidXR0b25fcHJldmlvdXM6IGNuKAogICAgICAgICAgYnV0dG9uVmFyaWFudHMoeyB2YXJpYW50OiBidXR0b25WYXJpYW50IH0pLAogICAgICAgICAgJ3NpemUtWy0tY2VsbC1zaXplXSBhcmlhLWRpc2FibGVkOm9wYWNpdHktNTAgcC0wIHNlbGVjdC1ub25lJywKICAgICAgICAgIGRlZmF1bHRDbGFzc05hbWVzLmJ1dHRvbl9wcmV2aW91cywKICAgICAgICApLAogICAgICAgIGJ1dHRvbl9uZXh0OiBjbigKICAgICAgICAgIGJ1dHRvblZhcmlhbnRzKHsgdmFyaWFudDogYnV0dG9uVmFyaWFudCB9KSwKICAgICAgICAgICdzaXplLVstLWNlbGwtc2l6ZV0gYXJpYS1kaXNhYmxlZDpvcGFjaXR5LTUwIHAtMCBzZWxlY3Qtbm9uZScsCiAgICAgICAgICBkZWZhdWx0Q2xhc3NOYW1lcy5idXR0b25fbmV4dCwKICAgICAgICApLAogICAgICAgIG1vbnRoX2NhcHRpb246IGNuKAogICAgICAgICAgJ2ZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGgtWy0tY2VsbC1zaXplXSB3LWZ1bGwgcHgtWy0tY2VsbC1zaXplXScsCiAgICAgICAgICBkZWZhdWx0Q2xhc3NOYW1lcy5tb250aF9jYXB0aW9uLAogICAgICAgICksCiAgICAgICAgZHJvcGRvd25zOiBjbigKICAgICAgICAgICd3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgdGV4dC1zbSBmb250LW1lZGl1bSBqdXN0aWZ5LWNlbnRlciBoLVstLWNlbGwtc2l6ZV0gZ2FwLTEuNScsCiAgICAgICAgICBkZWZhdWx0Q2xhc3NOYW1lcy5kcm9wZG93bnMsCiAgICAgICAgKSwKICAgICAgICBkcm9wZG93bl9yb290OiBjbigKICAgICAgICAgICdyZWxhdGl2ZSBoYXMtZm9jdXM6Ym9yZGVyLXJpbmcgYm9yZGVyIGJvcmRlci1pbnB1dCBzaGFkb3cteHMgaGFzLWZvY3VzOnJpbmctcmluZy81MCBoYXMtZm9jdXM6cmluZy1bM3B4XSByb3VuZGVkLW1kJywKICAgICAgICAgIGRlZmF1bHRDbGFzc05hbWVzLmRyb3Bkb3duX3Jvb3QsCiAgICAgICAgKSwKICAgICAgICBkcm9wZG93bjogY24oCiAgICAgICAgICAnYWJzb2x1dGUgYmctcG9wb3ZlciBpbnNldC0wIG9wYWNpdHktMCcsCiAgICAgICAgICBkZWZhdWx0Q2xhc3NOYW1lcy5kcm9wZG93biwKICAgICAgICApLAogICAgICAgIGNhcHRpb25fbGFiZWw6IGNuKAogICAgICAgICAgJ3NlbGVjdC1ub25lIGZvbnQtbWVkaXVtJywKICAgICAgICAgIGNhcHRpb25MYXlvdXQgPT09ICdsYWJlbCcKICAgICAgICAgICAgPyAndGV4dC1zbScKICAgICAgICAgICAgOiAncm91bmRlZC1tZCBwbC0yIHByLTEgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgdGV4dC1zbSBoLTggWyY+c3ZnXTp0ZXh0LW11dGVkLWZvcmVncm91bmQgWyY+c3ZnXTpzaXplLTMuNScsCiAgICAgICAgICBkZWZhdWx0Q2xhc3NOYW1lcy5jYXB0aW9uX2xhYmVsLAogICAgICAgICksCiAgICAgICAgdGFibGU6ICd3LWZ1bGwgYm9yZGVyLWNvbGxhcHNlJywKICAgICAgICB3ZWVrZGF5czogY24oJ2ZsZXgnLCBkZWZhdWx0Q2xhc3NOYW1lcy53ZWVrZGF5cyksCiAgICAgICAgd2Vla2RheTogY24oCiAgICAgICAgICAndGV4dC1tdXRlZC1mb3JlZ3JvdW5kIHJvdW5kZWQtbWQgZmxleC0xIGZvbnQtbm9ybWFsIHRleHQtWzAuOHJlbV0gc2VsZWN0LW5vbmUnLAogICAgICAgICAgZGVmYXVsdENsYXNzTmFtZXMud2Vla2RheSwKICAgICAgICApLAogICAgICAgIHdlZWs6IGNuKCdmbGV4IHctZnVsbCBtdC0yJywgZGVmYXVsdENsYXNzTmFtZXMud2VlayksCiAgICAgICAgd2Vla19udW1iZXJfaGVhZGVyOiBjbigKICAgICAgICAgICdzZWxlY3Qtbm9uZSB3LVstLWNlbGwtc2l6ZV0nLAogICAgICAgICAgZGVmYXVsdENsYXNzTmFtZXMud2Vla19udW1iZXJfaGVhZGVyLAogICAgICAgICksCiAgICAgICAgd2Vla19udW1iZXI6IGNuKAogICAgICAgICAgJ3RleHQtWzAuOHJlbV0gc2VsZWN0LW5vbmUgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kJywKICAgICAgICAgIGRlZmF1bHRDbGFzc05hbWVzLndlZWtfbnVtYmVyLAogICAgICAgICksCiAgICAgICAgZGF5OiBjbigKICAgICAgICAgICdyZWxhdGl2ZSB3LWZ1bGwgaC1mdWxsIHAtMCB0ZXh0LWNlbnRlciBbJjpmaXJzdC1jaGlsZFtkYXRhLXNlbGVjdGVkPXRydWVdX2J1dHRvbl06cm91bmRlZC1sLW1kIFsmOmxhc3QtY2hpbGRbZGF0YS1zZWxlY3RlZD10cnVlXV9idXR0b25dOnJvdW5kZWQtci1tZCBncm91cC9kYXkgYXNwZWN0LXNxdWFyZSBzZWxlY3Qtbm9uZScsCiAgICAgICAgICBkZWZhdWx0Q2xhc3NOYW1lcy5kYXksCiAgICAgICAgKSwKICAgICAgICByYW5nZV9zdGFydDogY24oCiAgICAgICAgICAncm91bmRlZC1sLW1kIGJnLWFjY2VudCcsCiAgICAgICAgICBkZWZhdWx0Q2xhc3NOYW1lcy5yYW5nZV9zdGFydCwKICAgICAgICApLAogICAgICAgIHJhbmdlX21pZGRsZTogY24oJ3JvdW5kZWQtbm9uZScsIGRlZmF1bHRDbGFzc05hbWVzLnJhbmdlX21pZGRsZSksCiAgICAgICAgcmFuZ2VfZW5kOiBjbigncm91bmRlZC1yLW1kIGJnLWFjY2VudCcsIGRlZmF1bHRDbGFzc05hbWVzLnJhbmdlX2VuZCksCiAgICAgICAgdG9kYXk6IGNuKAogICAgICAgICAgJ2JnLWFjY2VudCB0ZXh0LWFjY2VudC1mb3JlZ3JvdW5kIHJvdW5kZWQtbWQgZGF0YS1bc2VsZWN0ZWQ9dHJ1ZV06cm91bmRlZC1ub25lJywKICAgICAgICAgIGRlZmF1bHRDbGFzc05hbWVzLnRvZGF5LAogICAgICAgICksCiAgICAgICAgb3V0c2lkZTogY24oCiAgICAgICAgICAndGV4dC1tdXRlZC1mb3JlZ3JvdW5kIGFyaWEtc2VsZWN0ZWQ6dGV4dC1tdXRlZC1mb3JlZ3JvdW5kJywKICAgICAgICAgIGRlZmF1bHRDbGFzc05hbWVzLm91dHNpZGUsCiAgICAgICAgKSwKICAgICAgICBkaXNhYmxlZDogY24oCiAgICAgICAgICAndGV4dC1tdXRlZC1mb3JlZ3JvdW5kIG9wYWNpdHktNTAnLAogICAgICAgICAgZGVmYXVsdENsYXNzTmFtZXMuZGlzYWJsZWQsCiAgICAgICAgKSwKICAgICAgICBoaWRkZW46IGNuKCdpbnZpc2libGUnLCBkZWZhdWx0Q2xhc3NOYW1lcy5oaWRkZW4pLAogICAgICAgIC4uLmNsYXNzTmFtZXMsCiAgICAgIH19CiAgICAgIGNvbXBvbmVudHM9e3sKICAgICAgICBSb290OiAoeyBjbGFzc05hbWUsIHJvb3RSZWYsIC4uLnByb3BzIH0pID0+IHsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIDxkaXYKICAgICAgICAgICAgICBkYXRhLXNsb3Q9ImNhbGVuZGFyIgogICAgICAgICAgICAgIHJlZj17cm9vdFJlZn0KICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuKGNsYXNzTmFtZSl9CiAgICAgICAgICAgICAgey4uLnByb3BzfQogICAgICAgICAgICAvPgogICAgICAgICAgKQogICAgICAgIH0sCiAgICAgICAgQ2hldnJvbjogKHsgY2xhc3NOYW1lLCBvcmllbnRhdGlvbiwgLi4ucHJvcHMgfSkgPT4gewogICAgICAgICAgaWYgKG9yaWVudGF0aW9uID09PSAnbGVmdCcpIHsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICA8Q2hldnJvbkxlZnRJY29uIGNsYXNzTmFtZT17Y24oJ3NpemUtNCcsIGNsYXNzTmFtZSl9IHsuLi5wcm9wc30gLz4KICAgICAgICAgICAgKQogICAgICAgICAgfQoKICAgICAgICAgIGlmIChvcmllbnRhdGlvbiA9PT0gJ3JpZ2h0JykgewogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIDxDaGV2cm9uUmlnaHRJY29uCiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuKCdzaXplLTQnLCBjbGFzc05hbWUpfQogICAgICAgICAgICAgICAgey4uLnByb3BzfQogICAgICAgICAgICAgIC8+CiAgICAgICAgICAgICkKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICA8Q2hldnJvbkRvd25JY29uIGNsYXNzTmFtZT17Y24oJ3NpemUtNCcsIGNsYXNzTmFtZSl9IHsuLi5wcm9wc30gLz4KICAgICAgICAgICkKICAgICAgICB9LAogICAgICAgIERheUJ1dHRvbjogQ2FsZW5kYXJEYXlCdXR0b24sCiAgICAgICAgV2Vla051bWJlcjogKHsgY2hpbGRyZW4sIC4uLnByb3BzIH0pID0+IHsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIDx0ZCB7Li4ucHJvcHN9PgogICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IHNpemUtWy0tY2VsbC1zaXplXSBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC1jZW50ZXIiPgogICAgICAgICAgICAgICAge2NoaWxkcmVufQogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L3RkPgogICAgICAgICAgKQogICAgICAgIH0sCiAgICAgICAgLi4uY29tcG9uZW50cywKICAgICAgfX0KICAgICAgey4uLnByb3BzfQogICAgLz4KICApCn0KCmZ1bmN0aW9uIENhbGVuZGFyRGF5QnV0dG9uKHsKICBjbGFzc05hbWUsCiAgZGF5LAogIG1vZGlmaWVycywKICAuLi5wcm9wcwp9OiBSZWFjdC5Db21wb25lbnRQcm9wczx0eXBlb2YgRGF5QnV0dG9uPikgewogIGNvbnN0IGRlZmF1bHRDbGFzc05hbWVzID0gZ2V0RGVmYXVsdENsYXNzTmFtZXMoKQoKICBjb25zdCByZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KG51bGwpCiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHsKICAgIGlmIChtb2RpZmllcnMuZm9jdXNlZCkgcmVmLmN1cnJlbnQ/LmZvY3VzKCkKICB9LCBbbW9kaWZpZXJzLmZvY3VzZWRdKQoKICByZXR1cm4gKAogICAgPEJ1dHRvbgogICAgICByZWY9e3JlZn0KICAgICAgdmFyaWFudD0iZ2hvc3QiCiAgICAgIHNpemU9Imljb24iCiAgICAgIGRhdGEtZGF5PXtkYXkuZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKX0KICAgICAgZGF0YS1zZWxlY3RlZC1zaW5nbGU9ewogICAgICAgIG1vZGlmaWVycy5zZWxlY3RlZCAmJgogICAgICAgICFtb2RpZmllcnMucmFuZ2Vfc3RhcnQgJiYKICAgICAgICAhbW9kaWZpZXJzLnJhbmdlX2VuZCAmJgogICAgICAgICFtb2RpZmllcnMucmFuZ2VfbWlkZGxlCiAgICAgIH0KICAgICAgZGF0YS1yYW5nZS1zdGFydD17bW9kaWZpZXJzLnJhbmdlX3N0YXJ0fQogICAgICBkYXRhLXJhbmdlLWVuZD17bW9kaWZpZXJzLnJhbmdlX2VuZH0KICAgICAgZGF0YS1yYW5nZS1taWRkbGU9e21vZGlmaWVycy5yYW5nZV9taWRkbGV9CiAgICAgIGNsYXNzTmFtZT17Y24oCiAgICAgICAgJ2RhdGEtW3NlbGVjdGVkLXNpbmdsZT10cnVlXTpiZy1wcmltYXJ5IGRhdGEtW3NlbGVjdGVkLXNpbmdsZT10cnVlXTp0ZXh0LXByaW1hcnktZm9yZWdyb3VuZCBkYXRhLVtyYW5nZS1taWRkbGU9dHJ1ZV06YmctYWNjZW50IGRhdGEtW3JhbmdlLW1pZGRsZT10cnVlXTp0ZXh0LWFjY2VudC1mb3JlZ3JvdW5kIGRhdGEtW3JhbmdlLXN0YXJ0PXRydWVdOmJnLXByaW1hcnkgZGF0YS1bcmFuZ2Utc3RhcnQ9dHJ1ZV06dGV4dC1wcmltYXJ5LWZvcmVncm91bmQgZGF0YS1bcmFuZ2UtZW5kPXRydWVdOmJnLXByaW1hcnkgZGF0YS1bcmFuZ2UtZW5kPXRydWVdOnRleHQtcHJpbWFyeS1mb3JlZ3JvdW5kIGdyb3VwLWRhdGEtW2ZvY3VzZWQ9dHJ1ZV0vZGF5OmJvcmRlci1yaW5nIGdyb3VwLWRhdGEtW2ZvY3VzZWQ9dHJ1ZV0vZGF5OnJpbmctcmluZy81MCBkYXJrOmhvdmVyOnRleHQtYWNjZW50LWZvcmVncm91bmQgZmxleCBhc3BlY3Qtc3F1YXJlIHctZnVsbCBtaW4tdy1bLS1jZWxsLXNpemVdIGZsZXgtY29sIGdhcC0xIGxlYWRpbmctbm9uZSBmb250LW5vcm1hbCBncm91cC1kYXRhLVtmb2N1c2VkPXRydWVdL2RheTpyZWxhdGl2ZSBncm91cC1kYXRhLVtmb2N1c2VkPXRydWVdL2RheTp6LTEwIGdyb3VwLWRhdGEtW2ZvY3VzZWQ9dHJ1ZV0vZGF5OnJpbmctWzNweF0gZGF0YS1bcmFuZ2UtZW5kPXRydWVdOnJvdW5kZWQtbWQgZGF0YS1bcmFuZ2UtZW5kPXRydWVdOnJvdW5kZWQtci1tZCBkYXRhLVtyYW5nZS1taWRkbGU9dHJ1ZV06cm91bmRlZC1ub25lIGRhdGEtW3JhbmdlLXN0YXJ0PXRydWVdOnJvdW5kZWQtbWQgZGF0YS1bcmFuZ2Utc3RhcnQ9dHJ1ZV06cm91bmRlZC1sLW1kIFsmPnNwYW5dOnRleHQteHMgWyY+c3Bhbl06b3BhY2l0eS03MCcsCiAgICAgICAgZGVmYXVsdENsYXNzTmFtZXMuZGF5LAogICAgICAgIGNsYXNzTmFtZSwKICAgICAgKX0KICAgICAgey4uLnByb3BzfQogICAgLz4KICApCn0KCmV4cG9ydCB7IENhbGVuZGFyLCBDYWxlbmRhckRheUJ1dHRvbiB9Cg=="}