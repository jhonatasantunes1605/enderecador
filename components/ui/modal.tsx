{"data":"InVzZSBjbGllbnQiCgppbXBvcnQgKiBhcyBSZWFjdCBmcm9tICJyZWFjdCIKaW1wb3J0IHsgTG9hZGVyMiB9IGZyb20gImx1Y2lkZS1yZWFjdCIKaW1wb3J0IHsgY24gfSBmcm9tICJAL2xpYi91dGlscyIKaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAiQC9jb21wb25lbnRzL3VpL2J1dHRvbiIKaW1wb3J0IHsKICBEaWFsb2csCiAgRGlhbG9nQ29udGVudCwKICBEaWFsb2dEZXNjcmlwdGlvbiwKICBEaWFsb2dIZWFkZXIsCiAgRGlhbG9nVGl0bGUsCiAgRGlhbG9nVHJpZ2dlciwKfSBmcm9tICJAL2NvbXBvbmVudHMvdWkvZGlhbG9nIgppbXBvcnQgewogIEFsZXJ0RGlhbG9nLAogIEFsZXJ0RGlhbG9nQWN0aW9uLAogIEFsZXJ0RGlhbG9nQ2FuY2VsLAogIEFsZXJ0RGlhbG9nQ29udGVudCwKICBBbGVydERpYWxvZ0Rlc2NyaXB0aW9uLAogIEFsZXJ0RGlhbG9nRm9vdGVyLAogIEFsZXJ0RGlhbG9nSGVhZGVyLAogIEFsZXJ0RGlhbG9nVGl0bGUsCiAgQWxlcnREaWFsb2dUcmlnZ2VyLAp9IGZyb20gIkAvY29tcG9uZW50cy91aS9hbGVydC1kaWFsb2ciCgovLyBNb2RhbCBwYWRyw6NvIHBhcmEgZm9ybXVsw6FyaW9zCmludGVyZmFjZSBGb3JtTW9kYWxQcm9wcyB7CiAgaXNPcGVuOiBib29sZWFuCiAgb25PcGVuQ2hhbmdlOiAob3BlbjogYm9vbGVhbikgPT4gdm9pZAogIHRyaWdnZXI/OiBSZWFjdC5SZWFjdE5vZGUKICB0aXRsZTogc3RyaW5nCiAgZGVzY3JpcHRpb24/OiBzdHJpbmcKICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlCiAgc2l6ZT86ICJzbSIgfCAibWQiIHwgImxnIiB8ICJ4bCIKICBwcmV2ZW50Q2xvc2U/OiBib29sZWFuCn0KCmV4cG9ydCBmdW5jdGlvbiBGb3JtTW9kYWwoewogIGlzT3BlbiwKICBvbk9wZW5DaGFuZ2UsCiAgdHJpZ2dlciwKICB0aXRsZSwKICBkZXNjcmlwdGlvbiwKICBjaGlsZHJlbiwKICBzaXplID0gIm1kIiwKICBwcmV2ZW50Q2xvc2UgPSBmYWxzZSwKfTogRm9ybU1vZGFsUHJvcHMpIHsKICBjb25zdCBzaXplQ2xhc3NlcyA9IHsKICAgIHNtOiAic206bWF4LXctWzQwMHB4XSIsCiAgICBtZDogInNtOm1heC13LVs1MDBweF0iLAogICAgbGc6ICJzbTptYXgtdy1bNzAwcHhdIiwKICAgIHhsOiAic206bWF4LXctWzkwMHB4XSIsCiAgfQoKICByZXR1cm4gKAogICAgPERpYWxvZyBvcGVuPXtpc09wZW59IG9uT3BlbkNoYW5nZT17b25PcGVuQ2hhbmdlfT4KICAgICAge3RyaWdnZXIgJiYgPERpYWxvZ1RyaWdnZXIgYXNDaGlsZD57dHJpZ2dlcn08L0RpYWxvZ1RyaWdnZXI+fQogICAgICA8RGlhbG9nQ29udGVudAogICAgICAgIGNsYXNzTmFtZT17Y24oCiAgICAgICAgICAidy1bOTV2d10gbWF4LWgtWzkwdmhdIG92ZXJmbG93LXktYXV0byIsCiAgICAgICAgICBzaXplQ2xhc3Nlc1tzaXplXSwKICAgICAgICAgICJiZy13aGl0ZSBkYXJrOmJnLWdyYXktOTAwIGJvcmRlci1ncmF5LTIwMCBkYXJrOmJvcmRlci1ncmF5LTcwMCIsCiAgICAgICAgKX0KICAgICAgICBvblBvaW50ZXJEb3duT3V0c2lkZT17cHJldmVudENsb3NlID8gKGUpID0+IGUucHJldmVudERlZmF1bHQoKSA6IHVuZGVmaW5lZH0KICAgICAgICBvbkVzY2FwZUtleURvd249e3ByZXZlbnRDbG9zZSA/IChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCkgOiB1bmRlZmluZWR9CiAgICAgID4KICAgICAgICA8RGlhbG9nSGVhZGVyPgogICAgICAgICAgPERpYWxvZ1RpdGxlIGNsYXNzTmFtZT0idGV4dC1ncmF5LTkwMCBkYXJrOnRleHQtZ3JheS0xMDAiPnt0aXRsZX08L0RpYWxvZ1RpdGxlPgogICAgICAgICAge2Rlc2NyaXB0aW9uICYmICgKICAgICAgICAgICAgPERpYWxvZ0Rlc2NyaXB0aW9uIGNsYXNzTmFtZT0idGV4dC1ncmF5LTYwMCBkYXJrOnRleHQtZ3JheS0zMDAiPntkZXNjcmlwdGlvbn08L0RpYWxvZ0Rlc2NyaXB0aW9uPgogICAgICAgICAgKX0KICAgICAgICA8L0RpYWxvZ0hlYWRlcj4KICAgICAgICB7Y2hpbGRyZW59CiAgICAgIDwvRGlhbG9nQ29udGVudD4KICAgIDwvRGlhbG9nPgogICkKfQoKLy8gTW9kYWwgZGUgY29uZmlybWHDp8OjbyBwYWRyb25pemFkbwppbnRlcmZhY2UgQ29uZmlybWF0aW9uTW9kYWxQcm9wcyB7CiAgaXNPcGVuOiBib29sZWFuCiAgb25PcGVuQ2hhbmdlOiAob3BlbjogYm9vbGVhbikgPT4gdm9pZAogIHRyaWdnZXI/OiBSZWFjdC5SZWFjdE5vZGUKICB0aXRsZTogc3RyaW5nCiAgZGVzY3JpcHRpb246IFJlYWN0LlJlYWN0Tm9kZQogIGNvbmZpcm1UZXh0OiBzdHJpbmcKICBjYW5jZWxUZXh0Pzogc3RyaW5nCiAgaXNEZXN0cnVjdGl2ZT86IGJvb2xlYW4KICBpc0xvYWRpbmc/OiBib29sZWFuCiAgbG9hZGluZ1RleHQ/OiBzdHJpbmcKICBvbkNvbmZpcm06ICgpID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+CiAgZGlzYWJsZWQ/OiBib29sZWFuCn0KCmV4cG9ydCBmdW5jdGlvbiBDb25maXJtYXRpb25Nb2RhbCh7CiAgaXNPcGVuLAogIG9uT3BlbkNoYW5nZSwKICB0cmlnZ2VyLAogIHRpdGxlLAogIGRlc2NyaXB0aW9uLAogIGNvbmZpcm1UZXh0LAogIGNhbmNlbFRleHQgPSAiQ2FuY2VsYXIiLAogIGlzRGVzdHJ1Y3RpdmUgPSBmYWxzZSwKICBpc0xvYWRpbmcgPSBmYWxzZSwKICBsb2FkaW5nVGV4dCA9ICJQcm9jZXNzYW5kby4uLiIsCiAgb25Db25maXJtLAogIGRpc2FibGVkID0gZmFsc2UsCn06IENvbmZpcm1hdGlvbk1vZGFsUHJvcHMpIHsKICBjb25zdCBoYW5kbGVDb25maXJtID0gYXN5bmMgKCkgPT4gewogICAgdHJ5IHsKICAgICAgYXdhaXQgb25Db25maXJtKCkKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm8gbmEgY29uZmlybWHDp8OjbzoiLCBlcnJvcikKICAgIH0KICB9CgogIHJldHVybiAoCiAgICA8QWxlcnREaWFsb2cgb3Blbj17aXNPcGVufSBvbk9wZW5DaGFuZ2U9e29uT3BlbkNoYW5nZX0+CiAgICAgIHt0cmlnZ2VyICYmIDxBbGVydERpYWxvZ1RyaWdnZXIgYXNDaGlsZD57dHJpZ2dlcn08L0FsZXJ0RGlhbG9nVHJpZ2dlcj59CiAgICAgIDxBbGVydERpYWxvZ0NvbnRlbnQgY2xhc3NOYW1lPSJiZy13aGl0ZSBkYXJrOmJnLWdyYXktOTAwIGJvcmRlci1ncmF5LTIwMCBkYXJrOmJvcmRlci1ncmF5LTcwMCI+CiAgICAgICAgPEFsZXJ0RGlhbG9nSGVhZGVyPgogICAgICAgICAgPEFsZXJ0RGlhbG9nVGl0bGUgY2xhc3NOYW1lPSJ0ZXh0LWdyYXktOTAwIGRhcms6dGV4dC1ncmF5LTEwMCI+e3RpdGxlfTwvQWxlcnREaWFsb2dUaXRsZT4KICAgICAgICAgIDxBbGVydERpYWxvZ0Rlc2NyaXB0aW9uIGNsYXNzTmFtZT0idGV4dC1ncmF5LTYwMCBkYXJrOnRleHQtZ3JheS0zMDAiPntkZXNjcmlwdGlvbn08L0FsZXJ0RGlhbG9nRGVzY3JpcHRpb24+CiAgICAgICAgPC9BbGVydERpYWxvZ0hlYWRlcj4KICAgICAgICA8QWxlcnREaWFsb2dGb290ZXIgY2xhc3NOYW1lPSJnYXAtMiI+CiAgICAgICAgICA8QWxlcnREaWFsb2dDYW5jZWwKICAgICAgICAgICAgZGlzYWJsZWQ9e2lzTG9hZGluZ30KICAgICAgICAgICAgY2xhc3NOYW1lPSJiZy1ncmF5LTEwMCBkYXJrOmJnLWdyYXktODAwIHRleHQtZ3JheS05MDAgZGFyazp0ZXh0LWdyYXktMTAwIGJvcmRlci1ncmF5LTMwMCBkYXJrOmJvcmRlci1ncmF5LTYwMCBob3ZlcjpiZy1ncmF5LTIwMCBkYXJrOmhvdmVyOmJnLWdyYXktNzAwIgogICAgICAgICAgPgogICAgICAgICAgICB7Y2FuY2VsVGV4dH0KICAgICAgICAgIDwvQWxlcnREaWFsb2dDYW5jZWw+CiAgICAgICAgICA8QWxlcnREaWFsb2dBY3Rpb24gYXNDaGlsZD4KICAgICAgICAgICAgPEJ1dHRvbgogICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUNvbmZpcm19CiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzTG9hZGluZyB8fCBkaXNhYmxlZH0KICAgICAgICAgICAgICB2YXJpYW50PXtpc0Rlc3RydWN0aXZlID8gImRlc3RydWN0aXZlIiA6ICJkZWZhdWx0In0KICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuKGlzRGVzdHJ1Y3RpdmUgJiYgImJnLXJlZC02MDAgaG92ZXI6YmctcmVkLTcwMCBkYXJrOmJnLXJlZC02MDAgZGFyazpob3ZlcjpiZy1yZWQtNzAwIil9CiAgICAgICAgICAgID4KICAgICAgICAgICAgICB7aXNMb2FkaW5nID8gKAogICAgICAgICAgICAgICAgPD4KICAgICAgICAgICAgICAgICAgPExvYWRlcjIgY2xhc3NOYW1lPSJoLTQgdy00IGFuaW1hdGUtc3BpbiBtci0yIiAvPgogICAgICAgICAgICAgICAgICB7bG9hZGluZ1RleHR9CiAgICAgICAgICAgICAgICA8Lz4KICAgICAgICAgICAgICApIDogKAogICAgICAgICAgICAgICAgY29uZmlybVRleHQKICAgICAgICAgICAgICApfQogICAgICAgICAgICA8L0J1dHRvbj4KICAgICAgICAgIDwvQWxlcnREaWFsb2dBY3Rpb24+CiAgICAgICAgPC9BbGVydERpYWxvZ0Zvb3Rlcj4KICAgICAgPC9BbGVydERpYWxvZ0NvbnRlbnQ+CiAgICA8L0FsZXJ0RGlhbG9nPgogICkKfQoKLy8gTG9hZGluZyBvdmVybGF5IG1lbGhvcmFkbwppbnRlcmZhY2UgTG9hZGluZ092ZXJsYXlQcm9wcyB7CiAgaXNMb2FkaW5nOiBib29sZWFuCiAgbWVzc2FnZT86IHN0cmluZwogIGNsYXNzTmFtZT86IHN0cmluZwp9CgpleHBvcnQgZnVuY3Rpb24gTG9hZGluZ092ZXJsYXkoeyBpc0xvYWRpbmcsIG1lc3NhZ2UgPSAiQ2FycmVnYW5kby4uLiIsIGNsYXNzTmFtZSB9OiBMb2FkaW5nT3ZlcmxheVByb3BzKSB7CiAgaWYgKCFpc0xvYWRpbmcpIHJldHVybiBudWxsCgogIHJldHVybiAoCiAgICA8ZGl2CiAgICAgIGNsYXNzTmFtZT17Y24oCiAgICAgICAgImZpeGVkIGluc2V0LTAgYmctYmxhY2svNTAgYmFja2Ryb3AtYmx1ci1zbSB6LTUwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRyYW5zaXRpb24tb3BhY2l0eSBkdXJhdGlvbi0zMDAiLAogICAgICAgIGNsYXNzTmFtZSwKICAgICAgKX0KICAgID4KICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIGRhcms6YmctZ3JheS04MDAgcm91bmRlZC1sZyBwLTYgc2hhZG93LXhsIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGdhcC00IG1pbi13LVsyMDBweF0gYm9yZGVyIGRhcms6Ym9yZGVyLWdyYXktNzAwIj4KICAgICAgICA8TG9hZGVyMiBjbGFzc05hbWU9ImgtOCB3LTggYW5pbWF0ZS1zcGluIHRleHQtYmx1ZS02MDAgZGFyazp0ZXh0LWJsdWUtNDAwIiAvPgogICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIGRhcms6dGV4dC1ncmF5LTIwMCI+e21lc3NhZ2V9PC9wPgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICkKfQoKLy8gSG9vayBwYXJhIGdlcmVuY2lhciBlc3RhZG9zIGRlIG1vZGFsCmV4cG9ydCBmdW5jdGlvbiB1c2VNb2RhbChpbml0aWFsU3RhdGUgPSBmYWxzZSkgewogIGNvbnN0IFtpc09wZW4sIHNldElzT3Blbl0gPSBSZWFjdC51c2VTdGF0ZShpbml0aWFsU3RhdGUpCiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKQoKICBjb25zdCBvcGVuID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4gc2V0SXNPcGVuKHRydWUpLCBbXSkKICBjb25zdCBjbG9zZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHNldElzT3BlbihmYWxzZSksIFtdKQogIGNvbnN0IHRvZ2dsZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHNldElzT3BlbigocHJldikgPT4gIXByZXYpLCBbXSkKCiAgY29uc3Qgc3RhcnRMb2FkaW5nID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4gc2V0SXNMb2FkaW5nKHRydWUpLCBbXSkKICBjb25zdCBzdG9wTG9hZGluZyA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHNldElzTG9hZGluZyhmYWxzZSksIFtdKQoKICBjb25zdCB3aXRoTG9hZGluZyA9IFJlYWN0LnVzZUNhbGxiYWNrKAogICAgYXN5bmMgKGZuOiAoKSA9PiBQcm9taXNlPHZvaWQ+KSA9PiB7CiAgICAgIHN0YXJ0TG9hZGluZygpCiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgZm4oKQogICAgICB9IGZpbmFsbHkgewogICAgICAgIHN0b3BMb2FkaW5nKCkKICAgICAgfQogICAgfSwKICAgIFtzdGFydExvYWRpbmcsIHN0b3BMb2FkaW5nXSwKICApCgogIHJldHVybiB7CiAgICBpc09wZW4sCiAgICBpc0xvYWRpbmcsCiAgICBvcGVuLAogICAgY2xvc2UsCiAgICB0b2dnbGUsCiAgICBzdGFydExvYWRpbmcsCiAgICBzdG9wTG9hZGluZywKICAgIHdpdGhMb2FkaW5nLAogICAgc2V0SXNPcGVuLAogIH0KfQo="}