{"data":"J3VzZSBjbGllbnQnCgppbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCcKaW1wb3J0ICogYXMgUmVjaGFydHNQcmltaXRpdmUgZnJvbSAncmVjaGFydHMnCgppbXBvcnQgeyBjbiB9IGZyb20gJ0AvbGliL3V0aWxzJwoKLy8gRm9ybWF0OiB7IFRIRU1FX05BTUU6IENTU19TRUxFQ1RPUiB9CmNvbnN0IFRIRU1FUyA9IHsgbGlnaHQ6ICcnLCBkYXJrOiAnLmRhcmsnIH0gYXMgY29uc3QKCmV4cG9ydCB0eXBlIENoYXJ0Q29uZmlnID0gewogIFtrIGluIHN0cmluZ106IHsKICAgIGxhYmVsPzogUmVhY3QuUmVhY3ROb2RlCiAgICBpY29uPzogUmVhY3QuQ29tcG9uZW50VHlwZQogIH0gJiAoCiAgICB8IHsgY29sb3I/OiBzdHJpbmc7IHRoZW1lPzogbmV2ZXIgfQogICAgfCB7IGNvbG9yPzogbmV2ZXI7IHRoZW1lOiBSZWNvcmQ8a2V5b2YgdHlwZW9mIFRIRU1FUywgc3RyaW5nPiB9CiAgKQp9Cgp0eXBlIENoYXJ0Q29udGV4dFByb3BzID0gewogIGNvbmZpZzogQ2hhcnRDb25maWcKfQoKY29uc3QgQ2hhcnRDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dDxDaGFydENvbnRleHRQcm9wcyB8IG51bGw+KG51bGwpCgpmdW5jdGlvbiB1c2VDaGFydCgpIHsKICBjb25zdCBjb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChDaGFydENvbnRleHQpCgogIGlmICghY29udGV4dCkgewogICAgdGhyb3cgbmV3IEVycm9yKCd1c2VDaGFydCBtdXN0IGJlIHVzZWQgd2l0aGluIGEgPENoYXJ0Q29udGFpbmVyIC8+JykKICB9CgogIHJldHVybiBjb250ZXh0Cn0KCmNvbnN0IENoYXJ0Q29udGFpbmVyID0gUmVhY3QuZm9yd2FyZFJlZjwKICBIVE1MRGl2RWxlbWVudCwKICBSZWFjdC5Db21wb25lbnRQcm9wczwnZGl2Jz4gJiB7CiAgICBjb25maWc6IENoYXJ0Q29uZmlnCiAgICBjaGlsZHJlbjogUmVhY3QuQ29tcG9uZW50UHJvcHM8CiAgICAgIHR5cGVvZiBSZWNoYXJ0c1ByaW1pdGl2ZS5SZXNwb25zaXZlQ29udGFpbmVyCiAgICA+WydjaGlsZHJlbiddCiAgfQo+KCh7IGlkLCBjbGFzc05hbWUsIGNoaWxkcmVuLCBjb25maWcsIC4uLnByb3BzIH0sIHJlZikgPT4gewogIGNvbnN0IHVuaXF1ZUlkID0gUmVhY3QudXNlSWQoKQogIGNvbnN0IGNoYXJ0SWQgPSBgY2hhcnQtJHtpZCB8fCB1bmlxdWVJZC5yZXBsYWNlKC86L2csICcnKX1gCgogIHJldHVybiAoCiAgICA8Q2hhcnRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7IGNvbmZpZyB9fT4KICAgICAgPGRpdgogICAgICAgIGRhdGEtY2hhcnQ9e2NoYXJ0SWR9CiAgICAgICAgcmVmPXtyZWZ9CiAgICAgICAgY2xhc3NOYW1lPXtjbigKICAgICAgICAgICJmbGV4IGFzcGVjdC12aWRlbyBqdXN0aWZ5LWNlbnRlciB0ZXh0LXhzIFsmXy5yZWNoYXJ0cy1jYXJ0ZXNpYW4tYXhpcy10aWNrX3RleHRdOmZpbGwtbXV0ZWQtZm9yZWdyb3VuZCBbJl8ucmVjaGFydHMtY2FydGVzaWFuLWdyaWRfbGluZVtzdHJva2U9JyNjY2MnXV06c3Ryb2tlLWJvcmRlci81MCBbJl8ucmVjaGFydHMtY3VydmUucmVjaGFydHMtdG9vbHRpcC1jdXJzb3JdOnN0cm9rZS1ib3JkZXIgWyZfLnJlY2hhcnRzLWRvdFtzdHJva2U9JyNmZmYnXV06c3Ryb2tlLXRyYW5zcGFyZW50IFsmXy5yZWNoYXJ0cy1sYXllcl06b3V0bGluZS1ub25lIFsmXy5yZWNoYXJ0cy1wb2xhci1ncmlkX1tzdHJva2U9JyNjY2MnXV06c3Ryb2tlLWJvcmRlciBbJl8ucmVjaGFydHMtcmFkaWFsLWJhci1iYWNrZ3JvdW5kLXNlY3Rvcl06ZmlsbC1tdXRlZCBbJl8ucmVjaGFydHMtcmVjdGFuZ2xlLnJlY2hhcnRzLXRvb2x0aXAtY3Vyc29yXTpmaWxsLW11dGVkIFsmXy5yZWNoYXJ0cy1yZWZlcmVuY2UtbGluZV9bc3Ryb2tlPScjY2NjJ11dOnN0cm9rZS1ib3JkZXIgWyZfLnJlY2hhcnRzLXNlY3RvcltzdHJva2U9JyNmZmYnXV06c3Ryb2tlLXRyYW5zcGFyZW50IFsmXy5yZWNoYXJ0cy1zZWN0b3JdOm91dGxpbmUtbm9uZSBbJl8ucmVjaGFydHMtc3VyZmFjZV06b3V0bGluZS1ub25lIiwKICAgICAgICAgIGNsYXNzTmFtZSwKICAgICAgICApfQogICAgICAgIHsuLi5wcm9wc30KICAgICAgPgogICAgICAgIDxDaGFydFN0eWxlIGlkPXtjaGFydElkfSBjb25maWc9e2NvbmZpZ30gLz4KICAgICAgICA8UmVjaGFydHNQcmltaXRpdmUuUmVzcG9uc2l2ZUNvbnRhaW5lcj4KICAgICAgICAgIHtjaGlsZHJlbn0KICAgICAgICA8L1JlY2hhcnRzUHJpbWl0aXZlLlJlc3BvbnNpdmVDb250YWluZXI+CiAgICAgIDwvZGl2PgogICAgPC9DaGFydENvbnRleHQuUHJvdmlkZXI+CiAgKQp9KQpDaGFydENvbnRhaW5lci5kaXNwbGF5TmFtZSA9ICdDaGFydCcKCmNvbnN0IENoYXJ0U3R5bGUgPSAoeyBpZCwgY29uZmlnIH06IHsgaWQ6IHN0cmluZzsgY29uZmlnOiBDaGFydENvbmZpZyB9KSA9PiB7CiAgY29uc3QgY29sb3JDb25maWcgPSBPYmplY3QuZW50cmllcyhjb25maWcpLmZpbHRlcigKICAgIChbXywgY29uZmlnXSkgPT4gY29uZmlnLnRoZW1lIHx8IGNvbmZpZy5jb2xvciwKICApCgogIGlmICghY29sb3JDb25maWcubGVuZ3RoKSB7CiAgICByZXR1cm4gbnVsbAogIH0KCiAgcmV0dXJuICgKICAgIDxzdHlsZQogICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17ewogICAgICAgIF9faHRtbDogT2JqZWN0LmVudHJpZXMoVEhFTUVTKQogICAgICAgICAgLm1hcCgKICAgICAgICAgICAgKFt0aGVtZSwgcHJlZml4XSkgPT4gYAoke3ByZWZpeH0gW2RhdGEtY2hhcnQ9JHtpZH1dIHsKJHtjb2xvckNvbmZpZwogIC5tYXAoKFtrZXksIGl0ZW1Db25maWddKSA9PiB7CiAgICBjb25zdCBjb2xvciA9CiAgICAgIGl0ZW1Db25maWcudGhlbWU/Llt0aGVtZSBhcyBrZXlvZiB0eXBlb2YgaXRlbUNvbmZpZy50aGVtZV0gfHwKICAgICAgaXRlbUNvbmZpZy5jb2xvcgogICAgcmV0dXJuIGNvbG9yID8gYCAgLS1jb2xvci0ke2tleX06ICR7Y29sb3J9O2AgOiBudWxsCiAgfSkKICAuam9pbignXG4nKX0KfQpgLAogICAgICAgICAgKQogICAgICAgICAgLmpvaW4oJ1xuJyksCiAgICAgIH19CiAgICAvPgogICkKfQoKY29uc3QgQ2hhcnRUb29sdGlwID0gUmVjaGFydHNQcmltaXRpdmUuVG9vbHRpcAoKY29uc3QgQ2hhcnRUb29sdGlwQ29udGVudCA9IFJlYWN0LmZvcndhcmRSZWY8CiAgSFRNTERpdkVsZW1lbnQsCiAgUmVhY3QuQ29tcG9uZW50UHJvcHM8dHlwZW9mIFJlY2hhcnRzUHJpbWl0aXZlLlRvb2x0aXA+ICYKICAgIFJlYWN0LkNvbXBvbmVudFByb3BzPCdkaXYnPiAmIHsKICAgICAgaGlkZUxhYmVsPzogYm9vbGVhbgogICAgICBoaWRlSW5kaWNhdG9yPzogYm9vbGVhbgogICAgICBpbmRpY2F0b3I/OiAnbGluZScgfCAnZG90JyB8ICdkYXNoZWQnCiAgICAgIG5hbWVLZXk/OiBzdHJpbmcKICAgICAgbGFiZWxLZXk/OiBzdHJpbmcKICAgIH0KPigKICAoCiAgICB7CiAgICAgIGFjdGl2ZSwKICAgICAgcGF5bG9hZCwKICAgICAgY2xhc3NOYW1lLAogICAgICBpbmRpY2F0b3IgPSAnZG90JywKICAgICAgaGlkZUxhYmVsID0gZmFsc2UsCiAgICAgIGhpZGVJbmRpY2F0b3IgPSBmYWxzZSwKICAgICAgbGFiZWwsCiAgICAgIGxhYmVsRm9ybWF0dGVyLAogICAgICBsYWJlbENsYXNzTmFtZSwKICAgICAgZm9ybWF0dGVyLAogICAgICBjb2xvciwKICAgICAgbmFtZUtleSwKICAgICAgbGFiZWxLZXksCiAgICB9LAogICAgcmVmLAogICkgPT4gewogICAgY29uc3QgeyBjb25maWcgfSA9IHVzZUNoYXJ0KCkKCiAgICBjb25zdCB0b29sdGlwTGFiZWwgPSBSZWFjdC51c2VNZW1vKCgpID0+IHsKICAgICAgaWYgKGhpZGVMYWJlbCB8fCAhcGF5bG9hZD8ubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIG51bGwKICAgICAgfQoKICAgICAgY29uc3QgW2l0ZW1dID0gcGF5bG9hZAogICAgICBjb25zdCBrZXkgPSBgJHtsYWJlbEtleSB8fCBpdGVtLmRhdGFLZXkgfHwgaXRlbS5uYW1lIHx8ICd2YWx1ZSd9YAogICAgICBjb25zdCBpdGVtQ29uZmlnID0gZ2V0UGF5bG9hZENvbmZpZ0Zyb21QYXlsb2FkKGNvbmZpZywgaXRlbSwga2V5KQogICAgICBjb25zdCB2YWx1ZSA9CiAgICAgICAgIWxhYmVsS2V5ICYmIHR5cGVvZiBsYWJlbCA9PT0gJ3N0cmluZycKICAgICAgICAgID8gY29uZmlnW2xhYmVsIGFzIGtleW9mIHR5cGVvZiBjb25maWddPy5sYWJlbCB8fCBsYWJlbAogICAgICAgICAgOiBpdGVtQ29uZmlnPy5sYWJlbAoKICAgICAgaWYgKGxhYmVsRm9ybWF0dGVyKSB7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbignZm9udC1tZWRpdW0nLCBsYWJlbENsYXNzTmFtZSl9PgogICAgICAgICAgICB7bGFiZWxGb3JtYXR0ZXIodmFsdWUsIHBheWxvYWQpfQogICAgICAgICAgPC9kaXY+CiAgICAgICAgKQogICAgICB9CgogICAgICBpZiAoIXZhbHVlKSB7CiAgICAgICAgcmV0dXJuIG51bGwKICAgICAgfQoKICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXtjbignZm9udC1tZWRpdW0nLCBsYWJlbENsYXNzTmFtZSl9Pnt2YWx1ZX08L2Rpdj4KICAgIH0sIFsKICAgICAgbGFiZWwsCiAgICAgIGxhYmVsRm9ybWF0dGVyLAogICAgICBwYXlsb2FkLAogICAgICBoaWRlTGFiZWwsCiAgICAgIGxhYmVsQ2xhc3NOYW1lLAogICAgICBjb25maWcsCiAgICAgIGxhYmVsS2V5LAogICAgXSkKCiAgICBpZiAoIWFjdGl2ZSB8fCAhcGF5bG9hZD8ubGVuZ3RoKSB7CiAgICAgIHJldHVybiBudWxsCiAgICB9CgogICAgY29uc3QgbmVzdExhYmVsID0gcGF5bG9hZC5sZW5ndGggPT09IDEgJiYgaW5kaWNhdG9yICE9PSAnZG90JwoKICAgIHJldHVybiAoCiAgICAgIDxkaXYKICAgICAgICByZWY9e3JlZn0KICAgICAgICBjbGFzc05hbWU9e2NuKAogICAgICAgICAgJ2dyaWQgbWluLXctWzhyZW1dIGl0ZW1zLXN0YXJ0IGdhcC0xLjUgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWJvcmRlci81MCBiZy1iYWNrZ3JvdW5kIHB4LTIuNSBweS0xLjUgdGV4dC14cyBzaGFkb3cteGwnLAogICAgICAgICAgY2xhc3NOYW1lLAogICAgICAgICl9CiAgICAgID4KICAgICAgICB7IW5lc3RMYWJlbCA/IHRvb2x0aXBMYWJlbCA6IG51bGx9CiAgICAgICAgPGRpdiBjbGFzc05hbWU9ImdyaWQgZ2FwLTEuNSI+CiAgICAgICAgICB7cGF5bG9hZC5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGtleSA9IGAke25hbWVLZXkgfHwgaXRlbS5uYW1lIHx8IGl0ZW0uZGF0YUtleSB8fCAndmFsdWUnfWAKICAgICAgICAgICAgY29uc3QgaXRlbUNvbmZpZyA9IGdldFBheWxvYWRDb25maWdGcm9tUGF5bG9hZChjb25maWcsIGl0ZW0sIGtleSkKICAgICAgICAgICAgY29uc3QgaW5kaWNhdG9yQ29sb3IgPSBjb2xvciB8fCBpdGVtLnBheWxvYWQuZmlsbCB8fCBpdGVtLmNvbG9yCgogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIDxkaXYKICAgICAgICAgICAgICAgIGtleT17aXRlbS5kYXRhS2V5fQogICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbigKICAgICAgICAgICAgICAgICAgJ2ZsZXggdy1mdWxsIGZsZXgtd3JhcCBpdGVtcy1zdHJldGNoIGdhcC0yIFsmPnN2Z106aC0yLjUgWyY+c3ZnXTp3LTIuNSBbJj5zdmddOnRleHQtbXV0ZWQtZm9yZWdyb3VuZCcsCiAgICAgICAgICAgICAgICAgIGluZGljYXRvciA9PT0gJ2RvdCcgJiYgJ2l0ZW1zLWNlbnRlcicsCiAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgID4KICAgICAgICAgICAgICAgIHtmb3JtYXR0ZXIgJiYgaXRlbT8udmFsdWUgIT09IHVuZGVmaW5lZCAmJiBpdGVtLm5hbWUgPyAoCiAgICAgICAgICAgICAgICAgIGZvcm1hdHRlcihpdGVtLnZhbHVlLCBpdGVtLm5hbWUsIGl0ZW0sIGluZGV4LCBpdGVtLnBheWxvYWQpCiAgICAgICAgICAgICAgICApIDogKAogICAgICAgICAgICAgICAgICA8PgogICAgICAgICAgICAgICAgICAgIHtpdGVtQ29uZmlnPy5pY29uID8gKAogICAgICAgICAgICAgICAgICAgICAgPGl0ZW1Db25maWcuaWNvbiAvPgogICAgICAgICAgICAgICAgICAgICkgOiAoCiAgICAgICAgICAgICAgICAgICAgICAhaGlkZUluZGljYXRvciAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYKICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Nocmluay0wIHJvdW5kZWQtWzJweF0gYm9yZGVyLVstLWNvbG9yLWJvcmRlcl0gYmctWy0tY29sb3ItYmddJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2gtMi41IHctMi41JzogaW5kaWNhdG9yID09PSAnZG90JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3ctMSc6IGluZGljYXRvciA9PT0gJ2xpbmUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndy0wIGJvcmRlci1bMS41cHhdIGJvcmRlci1kYXNoZWQgYmctdHJhbnNwYXJlbnQnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGljYXRvciA9PT0gJ2Rhc2hlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdteS0wLjUnOiBuZXN0TGFiZWwgJiYgaW5kaWNhdG9yID09PSAnZGFzaGVkJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICctLWNvbG9yLWJnJzogaW5kaWNhdG9yQ29sb3IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICctLWNvbG9yLWJvcmRlcic6IGluZGljYXRvckNvbG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBhcyBSZWFjdC5DU1NQcm9wZXJ0aWVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgPGRpdgogICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbigKICAgICAgICAgICAgICAgICAgICAgICAgJ2ZsZXggZmxleC0xIGp1c3RpZnktYmV0d2VlbiBsZWFkaW5nLW5vbmUnLAogICAgICAgICAgICAgICAgICAgICAgICBuZXN0TGFiZWwgPyAnaXRlbXMtZW5kJyA6ICdpdGVtcy1jZW50ZXInLAogICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICA+CiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZ3JpZCBnYXAtMS41Ij4KICAgICAgICAgICAgICAgICAgICAgICAge25lc3RMYWJlbCA/IHRvb2x0aXBMYWJlbCA6IG51bGx9CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC1tdXRlZC1mb3JlZ3JvdW5kIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7aXRlbUNvbmZpZz8ubGFiZWwgfHwgaXRlbS5uYW1lfQogICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIHtpdGVtLnZhbHVlICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJmb250LW1vbm8gZm9udC1tZWRpdW0gdGFidWxhci1udW1zIHRleHQtZm9yZWdyb3VuZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge2l0ZW0udmFsdWUudG9Mb2NhbGVTdHJpbmcoKX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgPC8+CiAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICApCiAgICAgICAgICB9KX0KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICApCiAgfSwKKQpDaGFydFRvb2x0aXBDb250ZW50LmRpc3BsYXlOYW1lID0gJ0NoYXJ0VG9vbHRpcCcKCmNvbnN0IENoYXJ0TGVnZW5kID0gUmVjaGFydHNQcmltaXRpdmUuTGVnZW5kCgpjb25zdCBDaGFydExlZ2VuZENvbnRlbnQgPSBSZWFjdC5mb3J3YXJkUmVmPAogIEhUTUxEaXZFbGVtZW50LAogIFJlYWN0LkNvbXBvbmVudFByb3BzPCdkaXYnPiAmCiAgICBQaWNrPFJlY2hhcnRzUHJpbWl0aXZlLkxlZ2VuZFByb3BzLCAncGF5bG9hZCcgfCAndmVydGljYWxBbGlnbic+ICYgewogICAgICBoaWRlSWNvbj86IGJvb2xlYW4KICAgICAgbmFtZUtleT86IHN0cmluZwogICAgfQo+KAogICgKICAgIHsgY2xhc3NOYW1lLCBoaWRlSWNvbiA9IGZhbHNlLCBwYXlsb2FkLCB2ZXJ0aWNhbEFsaWduID0gJ2JvdHRvbScsIG5hbWVLZXkgfSwKICAgIHJlZiwKICApID0+IHsKICAgIGNvbnN0IHsgY29uZmlnIH0gPSB1c2VDaGFydCgpCgogICAgaWYgKCFwYXlsb2FkPy5sZW5ndGgpIHsKICAgICAgcmV0dXJuIG51bGwKICAgIH0KCiAgICByZXR1cm4gKAogICAgICA8ZGl2CiAgICAgICAgcmVmPXtyZWZ9CiAgICAgICAgY2xhc3NOYW1lPXtjbigKICAgICAgICAgICdmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtNCcsCiAgICAgICAgICB2ZXJ0aWNhbEFsaWduID09PSAndG9wJyA/ICdwYi0zJyA6ICdwdC0zJywKICAgICAgICAgIGNsYXNzTmFtZSwKICAgICAgICApfQogICAgICA+CiAgICAgICAge3BheWxvYWQubWFwKChpdGVtKSA9PiB7CiAgICAgICAgICBjb25zdCBrZXkgPSBgJHtuYW1lS2V5IHx8IGl0ZW0uZGF0YUtleSB8fCAndmFsdWUnfWAKICAgICAgICAgIGNvbnN0IGl0ZW1Db25maWcgPSBnZXRQYXlsb2FkQ29uZmlnRnJvbVBheWxvYWQoY29uZmlnLCBpdGVtLCBrZXkpCgogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgPGRpdgogICAgICAgICAgICAgIGtleT17aXRlbS52YWx1ZX0KICAgICAgICAgICAgICBjbGFzc05hbWU9ewogICAgICAgICAgICAgICAgJ2ZsZXggaXRlbXMtY2VudGVyIGdhcC0xLjUgWyY+c3ZnXTpoLTMgWyY+c3ZnXTp3LTMgWyY+c3ZnXTp0ZXh0LW11dGVkLWZvcmVncm91bmQnCiAgICAgICAgICAgICAgfQogICAgICAgICAgICA+CiAgICAgICAgICAgICAge2l0ZW1Db25maWc/Lmljb24gJiYgIWhpZGVJY29uID8gKAogICAgICAgICAgICAgICAgPGl0ZW1Db25maWcuaWNvbiAvPgogICAgICAgICAgICAgICkgOiAoCiAgICAgICAgICAgICAgICA8ZGl2CiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0iaC0yIHctMiBzaHJpbmstMCByb3VuZGVkLVsycHhdIgogICAgICAgICAgICAgICAgICBzdHlsZT17ewogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogaXRlbS5jb2xvciwKICAgICAgICAgICAgICAgICAgfX0KICAgICAgICAgICAgICAgIC8+CiAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICB7aXRlbUNvbmZpZz8ubGFiZWx9CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgKQogICAgICAgIH0pfQogICAgICA8L2Rpdj4KICAgICkKICB9LAopCkNoYXJ0TGVnZW5kQ29udGVudC5kaXNwbGF5TmFtZSA9ICdDaGFydExlZ2VuZCcKCi8vIEhlbHBlciB0byBleHRyYWN0IGl0ZW0gY29uZmlnIGZyb20gYSBwYXlsb2FkLgpmdW5jdGlvbiBnZXRQYXlsb2FkQ29uZmlnRnJvbVBheWxvYWQoCiAgY29uZmlnOiBDaGFydENvbmZpZywKICBwYXlsb2FkOiB1bmtub3duLAogIGtleTogc3RyaW5nLAopIHsKICBpZiAodHlwZW9mIHBheWxvYWQgIT09ICdvYmplY3QnIHx8IHBheWxvYWQgPT09IG51bGwpIHsKICAgIHJldHVybiB1bmRlZmluZWQKICB9CgogIGNvbnN0IHBheWxvYWRQYXlsb2FkID0KICAgICdwYXlsb2FkJyBpbiBwYXlsb2FkICYmCiAgICB0eXBlb2YgcGF5bG9hZC5wYXlsb2FkID09PSAnb2JqZWN0JyAmJgogICAgcGF5bG9hZC5wYXlsb2FkICE9PSBudWxsCiAgICAgID8gcGF5bG9hZC5wYXlsb2FkCiAgICAgIDogdW5kZWZpbmVkCgogIGxldCBjb25maWdMYWJlbEtleTogc3RyaW5nID0ga2V5CgogIGlmICgKICAgIGtleSBpbiBwYXlsb2FkICYmCiAgICB0eXBlb2YgcGF5bG9hZFtrZXkgYXMga2V5b2YgdHlwZW9mIHBheWxvYWRdID09PSAnc3RyaW5nJwogICkgewogICAgY29uZmlnTGFiZWxLZXkgPSBwYXlsb2FkW2tleSBhcyBrZXlvZiB0eXBlb2YgcGF5bG9hZF0gYXMgc3RyaW5nCiAgfSBlbHNlIGlmICgKICAgIHBheWxvYWRQYXlsb2FkICYmCiAgICBrZXkgaW4gcGF5bG9hZFBheWxvYWQgJiYKICAgIHR5cGVvZiBwYXlsb2FkUGF5bG9hZFtrZXkgYXMga2V5b2YgdHlwZW9mIHBheWxvYWRQYXlsb2FkXSA9PT0gJ3N0cmluZycKICApIHsKICAgIGNvbmZpZ0xhYmVsS2V5ID0gcGF5bG9hZFBheWxvYWRbCiAgICAgIGtleSBhcyBrZXlvZiB0eXBlb2YgcGF5bG9hZFBheWxvYWQKICAgIF0gYXMgc3RyaW5nCiAgfQoKICByZXR1cm4gY29uZmlnTGFiZWxLZXkgaW4gY29uZmlnCiAgICA/IGNvbmZpZ1tjb25maWdMYWJlbEtleV0KICAgIDogY29uZmlnW2tleSBhcyBrZXlvZiB0eXBlb2YgY29uZmlnXQp9CgpleHBvcnQgewogIENoYXJ0Q29udGFpbmVyLAogIENoYXJ0VG9vbHRpcCwKICBDaGFydFRvb2x0aXBDb250ZW50LAogIENoYXJ0TGVnZW5kLAogIENoYXJ0TGVnZW5kQ29udGVudCwKICBDaGFydFN0eWxlLAp9Cg=="}