{"data":"aW1wb3J0IHsgY3JlYXRlIH0gZnJvbSAienVzdGFuZCINCmltcG9ydCB7IHN1YnNjcmliZVdpdGhTZWxlY3RvciB9IGZyb20gInp1c3RhbmQvbWlkZGxld2FyZSINCg0KZXhwb3J0IGludGVyZmFjZSBXYXJlaG91c2Ugew0KICBpZDogc3RyaW5nDQogIG5hbWU6IHN0cmluZw0KICBjcmVhdGVkQXQ6IHN0cmluZw0KfQ0KDQpleHBvcnQgaW50ZXJmYWNlIEFpc2xlIHsNCiAgaWQ6IHN0cmluZw0KICB3YXJlaG91c2VJZDogc3RyaW5nDQogIG5hbWU6IHN0cmluZw0KICBub3Rlcz86IHN0cmluZw0KICBjYXBhY2l0eTogbnVtYmVyDQogIHN0b3JhZ2VUeXBlOiAicGFsbGV0IiB8ICJzaGVsZiINCiAgc2hlbGZMZXZlbHM6IG51bWJlcg0KICBjcmVhdGVkQXQ6IHN0cmluZw0KfQ0KDQpleHBvcnQgaW50ZXJmYWNlIFBhbGxldCB7DQogIGlkOiBzdHJpbmcNCiAgYWlzbGVJZDogc3RyaW5nDQogIHBvc2l0aW9uOiBudW1iZXINCiAgZWFuPzogc3RyaW5nDQogIHByb2R1Y3ROYW1lPzogc3RyaW5nDQogIGNhdGVnb3J5Pzogc3RyaW5nDQogIGVhbjEzPzogc3RyaW5nDQogIGlzVmVyaWZpZWQ6IGJvb2xlYW4NCiAgbGFzdFZlcmlmaWVkPzogc3RyaW5nDQogIGNyZWF0ZWRBdDogc3RyaW5nDQp9DQoNCmV4cG9ydCBpbnRlcmZhY2UgU2hlbGYgew0KICBpZDogc3RyaW5nDQogIGFpc2xlSWQ6IHN0cmluZw0KICBwb3NpdGlvbjogbnVtYmVyDQogIGxldmVsOiBudW1iZXINCiAgZWFuPzogc3RyaW5nDQogIHByb2R1Y3ROYW1lPzogc3RyaW5nDQogIG9jY3VwYW5jeVBlcmNlbnRhZ2U6IG51bWJlcg0KICBjYXRlZ29yeT86IHN0cmluZw0KICBlYW4xMz86IHN0cmluZw0KICBpc1ZlcmlmaWVkOiBib29sZWFuDQogIGxhc3RWZXJpZmllZD86IHN0cmluZw0KICBjcmVhdGVkQXQ6IHN0cmluZw0KfQ0KDQpleHBvcnQgaW50ZXJmYWNlIFNlYXJjaFJlc3VsdCB7DQogIGlkOiBzdHJpbmcNCiAgYWlzbGVJZDogc3RyaW5nDQogIGFpc2xlTmFtZTogc3RyaW5nDQogIHBvc2l0aW9uOiBudW1iZXINCiAgbGV2ZWw/OiBudW1iZXINCiAgZWFuOiBzdHJpbmcNCiAgcHJvZHVjdE5hbWU6IHN0cmluZw0KICBjYXRlZ29yeT86IHN0cmluZw0KICBlYW4xMz86IHN0cmluZw0KICB0eXBlOiAicGFsbGV0IiB8ICJzaGVsZiINCiAgd2FyZWhvdXNlSWQ/OiBzdHJpbmcNCn0NCg0KZXhwb3J0IGludGVyZmFjZSBBZGRyZXNzU2VhcmNoUmVzdWx0IHsNCiAgaWQ6IHN0cmluZw0KICBhZGRyZXNzOiBzdHJpbmcNCiAgZWFuOiBzdHJpbmcNCiAgcHJvZHVjdE5hbWU6IHN0cmluZw0KICBjYXRlZ29yeT86IHN0cmluZw0KICBlYW4xMz86IHN0cmluZw0KICB0eXBlOiAicGFsbGV0IiB8ICJzaGVsZiINCiAgd2FyZWhvdXNlSWQ6IHN0cmluZw0KICBhaXNsZUlkOiBzdHJpbmcNCiAgYWlzbGVOYW1lOiBzdHJpbmcNCiAgcG9zaXRpb246IG51bWJlcg0KICBsZXZlbD86IG51bWJlcg0KfQ0KDQppbnRlcmZhY2UgQXBwU3RhdGUgew0KICAvLyBEYXRhDQogIHdhcmVob3VzZXM6IFdhcmVob3VzZVtdDQogIGFpc2xlczogUmVjb3JkPHN0cmluZywgQWlzbGVbXT4gLy8gd2FyZWhvdXNlSWQgLT4gYWlzbGVzDQogIHBhbGxldHM6IFJlY29yZDxzdHJpbmcsIFBhbGxldFtdPiAvLyBhaXNsZUlkIC0+IHBhbGxldHMNCiAgc2hlbHZlczogUmVjb3JkPHN0cmluZywgU2hlbGZbXT4gLy8gYWlzbGVJZCAtPiBzaGVsdmVzDQogIHNlYXJjaFJlc3VsdHM6IFNlYXJjaFJlc3VsdFtdDQogIGFkZHJlc3NTZWFyY2hSZXN1bHQ6IEFkZHJlc3NTZWFyY2hSZXN1bHQgfCBudWxsDQoNCiAgLy8gTG9hZGluZyBzdGF0ZXMNCiAgbG9hZGluZzogew0KICAgIHdhcmVob3VzZXM6IGJvb2xlYW4NCiAgICBhaXNsZXM6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+DQogICAgcGFsbGV0czogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4NCiAgICBzaGVsdmVzOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPg0KICAgIHNlYXJjaDogYm9vbGVhbg0KICAgIGFkZHJlc3NTZWFyY2g6IGJvb2xlYW4NCiAgfQ0KDQogIC8vIEFjdGlvbnMNCiAgc2V0V2FyZWhvdXNlczogKHdhcmVob3VzZXM6IFdhcmVob3VzZVtdKSA9PiB2b2lkDQogIGFkZFdhcmVob3VzZTogKHdhcmVob3VzZTogV2FyZWhvdXNlKSA9PiB2b2lkDQogIHJlbW92ZVdhcmVob3VzZTogKHdhcmVob3VzZUlkOiBzdHJpbmcpID0+IHZvaWQNCg0KICBzZXRBaXNsZXM6ICh3YXJlaG91c2VJZDogc3RyaW5nLCBhaXNsZXM6IEFpc2xlW10pID0+IHZvaWQNCiAgYWRkQWlzbGU6IChhaXNsZTogQWlzbGUpID0+IHZvaWQNCiAgcmVtb3ZlQWlzbGU6IChhaXNsZUlkOiBzdHJpbmcpID0+IHZvaWQNCiAgdXBkYXRlQWlzbGU6IChhaXNsZUlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8QWlzbGU+KSA9PiB2b2lkDQoNCiAgc2V0UGFsbGV0czogKGFpc2xlSWQ6IHN0cmluZywgcGFsbGV0czogUGFsbGV0W10pID0+IHZvaWQNCiAgYWRkUGFsbGV0OiAocGFsbGV0OiBQYWxsZXQpID0+IHZvaWQNCiAgcmVtb3ZlUGFsbGV0OiAocGFsbGV0SWQ6IHN0cmluZykgPT4gdm9pZA0KICB1cGRhdGVQYWxsZXQ6IChwYWxsZXRJZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPFBhbGxldD4pID0+IHZvaWQNCg0KICBzZXRTaGVsdmVzOiAoYWlzbGVJZDogc3RyaW5nLCBzaGVsdmVzOiBTaGVsZltdKSA9PiB2b2lkDQogIGFkZFNoZWxmOiAoc2hlbGY6IFNoZWxmKSA9PiB2b2lkDQogIHJlbW92ZVNoZWxmOiAoc2hlbGZJZDogc3RyaW5nKSA9PiB2b2lkDQogIHVwZGF0ZVNoZWxmOiAoc2hlbGZJZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPFNoZWxmPikgPT4gdm9pZA0KDQogIHNldFNlYXJjaFJlc3VsdHM6IChyZXN1bHRzOiBTZWFyY2hSZXN1bHRbXSkgPT4gdm9pZA0KICBzZXRBZGRyZXNzU2VhcmNoUmVzdWx0OiAocmVzdWx0OiBBZGRyZXNzU2VhcmNoUmVzdWx0IHwgbnVsbCkgPT4gdm9pZA0KDQogIHNldExvYWRpbmc6IChrZXk6IHN0cmluZywgdmFsdWU6IGJvb2xlYW4pID0+IHZvaWQNCiAgc2V0TmVzdGVkTG9hZGluZzogKGNhdGVnb3J5OiAiYWlzbGVzIiB8ICJwYWxsZXRzIiB8ICJzaGVsdmVzIiwga2V5OiBzdHJpbmcsIHZhbHVlOiBib29sZWFuKSA9PiB2b2lkDQp9DQoNCmV4cG9ydCBjb25zdCB1c2VBcHBTdG9yZSA9IGNyZWF0ZTxBcHBTdGF0ZT4oKSgNCiAgc3Vic2NyaWJlV2l0aFNlbGVjdG9yKChzZXQsIGdldCkgPT4gKHsNCiAgICAvLyBJbml0aWFsIHN0YXRlDQogICAgd2FyZWhvdXNlczogW10sDQogICAgYWlzbGVzOiB7fSwNCiAgICBwYWxsZXRzOiB7fSwNCiAgICBzaGVsdmVzOiB7fSwNCiAgICBzZWFyY2hSZXN1bHRzOiBbXSwNCiAgICBhZGRyZXNzU2VhcmNoUmVzdWx0OiBudWxsLA0KDQogICAgbG9hZGluZzogew0KICAgICAgd2FyZWhvdXNlczogZmFsc2UsDQogICAgICBhaXNsZXM6IHt9LA0KICAgICAgcGFsbGV0czoge30sDQogICAgICBzaGVsdmVzOiB7fSwNCiAgICAgIHNlYXJjaDogZmFsc2UsDQogICAgICBhZGRyZXNzU2VhcmNoOiBmYWxzZSwNCiAgICB9LA0KDQogICAgLy8gV2FyZWhvdXNlIGFjdGlvbnMNCiAgICBzZXRXYXJlaG91c2VzOiAod2FyZWhvdXNlcykgPT4gc2V0KHsgd2FyZWhvdXNlcyB9KSwNCiAgICBhZGRXYXJlaG91c2U6ICh3YXJlaG91c2UpID0+DQogICAgICBzZXQoKHN0YXRlKSA9PiAoew0KICAgICAgICB3YXJlaG91c2VzOiBbLi4uc3RhdGUud2FyZWhvdXNlcywgd2FyZWhvdXNlXSwNCiAgICAgIH0pKSwNCiAgICByZW1vdmVXYXJlaG91c2U6ICh3YXJlaG91c2VJZCkgPT4NCiAgICAgIHNldCgoc3RhdGUpID0+ICh7DQogICAgICAgIHdhcmVob3VzZXM6IHN0YXRlLndhcmVob3VzZXMuZmlsdGVyKCh3KSA9PiB3LmlkICE9PSB3YXJlaG91c2VJZCksDQogICAgICAgIGFpc2xlczogT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKHN0YXRlLmFpc2xlcykuZmlsdGVyKChba2V5XSkgPT4ga2V5ICE9PSB3YXJlaG91c2VJZCkpLA0KICAgICAgfSkpLA0KDQogICAgLy8gQWlzbGUgYWN0aW9ucw0KICAgIHNldEFpc2xlczogKHdhcmVob3VzZUlkLCBhaXNsZXMpID0+DQogICAgICBzZXQoKHN0YXRlKSA9PiAoew0KICAgICAgICBhaXNsZXM6IHsgLi4uc3RhdGUuYWlzbGVzLCBbd2FyZWhvdXNlSWRdOiBhaXNsZXMgfSwNCiAgICAgIH0pKSwNCiAgICBhZGRBaXNsZTogKGFpc2xlKSA9Pg0KICAgICAgc2V0KChzdGF0ZSkgPT4gKHsNCiAgICAgICAgYWlzbGVzOiB7DQogICAgICAgICAgLi4uc3RhdGUuYWlzbGVzLA0KICAgICAgICAgIFthaXNsZS53YXJlaG91c2VJZF06IFsuLi4oc3RhdGUuYWlzbGVzW2Fpc2xlLndhcmVob3VzZUlkXSB8fCBbXSksIGFpc2xlXSwNCiAgICAgICAgfSwNCiAgICAgIH0pKSwNCiAgICByZW1vdmVBaXNsZTogKGFpc2xlSWQpID0+DQogICAgICBzZXQoKHN0YXRlKSA9PiB7DQogICAgICAgIGNvbnN0IG5ld0Fpc2xlcyA9IHsgLi4uc3RhdGUuYWlzbGVzIH0NCiAgICAgICAgY29uc3QgbmV3UGFsbGV0cyA9IHsgLi4uc3RhdGUucGFsbGV0cyB9DQogICAgICAgIGNvbnN0IG5ld1NoZWx2ZXMgPSB7IC4uLnN0YXRlLnNoZWx2ZXMgfQ0KDQogICAgICAgIC8vIFJlbW92ZSBhaXNsZSBmcm9tIGFsbCB3YXJlaG91c2VzDQogICAgICAgIE9iamVjdC5rZXlzKG5ld0Fpc2xlcykuZm9yRWFjaCgod2FyZWhvdXNlSWQpID0+IHsNCiAgICAgICAgICBuZXdBaXNsZXNbd2FyZWhvdXNlSWRdID0gbmV3QWlzbGVzW3dhcmVob3VzZUlkXS5maWx0ZXIoKGEpID0+IGEuaWQgIT09IGFpc2xlSWQpDQogICAgICAgIH0pDQoNCiAgICAgICAgLy8gUmVtb3ZlIGFzc29jaWF0ZWQgcGFsbGV0cyBhbmQgc2hlbHZlcw0KICAgICAgICBkZWxldGUgbmV3UGFsbGV0c1thaXNsZUlkXQ0KICAgICAgICBkZWxldGUgbmV3U2hlbHZlc1thaXNsZUlkXQ0KDQogICAgICAgIHJldHVybiB7IGFpc2xlczogbmV3QWlzbGVzLCBwYWxsZXRzOiBuZXdQYWxsZXRzLCBzaGVsdmVzOiBuZXdTaGVsdmVzIH0NCiAgICAgIH0pLA0KICAgIHVwZGF0ZUFpc2xlOiAoYWlzbGVJZCwgdXBkYXRlcykgPT4NCiAgICAgIHNldCgoc3RhdGUpID0+IHsNCiAgICAgICAgY29uc3QgbmV3QWlzbGVzID0geyAuLi5zdGF0ZS5haXNsZXMgfQ0KICAgICAgICBPYmplY3Qua2V5cyhuZXdBaXNsZXMpLmZvckVhY2goKHdhcmVob3VzZUlkKSA9PiB7DQogICAgICAgICAgbmV3QWlzbGVzW3dhcmVob3VzZUlkXSA9IG5ld0Fpc2xlc1t3YXJlaG91c2VJZF0ubWFwKChhaXNsZSkgPT4NCiAgICAgICAgICAgIGFpc2xlLmlkID09PSBhaXNsZUlkID8geyAuLi5haXNsZSwgLi4udXBkYXRlcyB9IDogYWlzbGUsDQogICAgICAgICAgKQ0KICAgICAgICB9KQ0KICAgICAgICByZXR1cm4geyBhaXNsZXM6IG5ld0Fpc2xlcyB9DQogICAgICB9KSwNCg0KICAgIC8vIFBhbGxldCBhY3Rpb25zDQogICAgc2V0UGFsbGV0czogKGFpc2xlSWQsIHBhbGxldHMpID0+DQogICAgICBzZXQoKHN0YXRlKSA9PiAoew0KICAgICAgICBwYWxsZXRzOiB7IC4uLnN0YXRlLnBhbGxldHMsIFthaXNsZUlkXTogcGFsbGV0cyB9LA0KICAgICAgfSkpLA0KICAgIGFkZFBhbGxldDogKHBhbGxldCkgPT4NCiAgICAgIHNldCgoc3RhdGUpID0+ICh7DQogICAgICAgIHBhbGxldHM6IHsNCiAgICAgICAgICAuLi5zdGF0ZS5wYWxsZXRzLA0KICAgICAgICAgIFtwYWxsZXQuYWlzbGVJZF06IFsuLi4oc3RhdGUucGFsbGV0c1twYWxsZXQuYWlzbGVJZF0gfHwgW10pLCBwYWxsZXRdLA0KICAgICAgICB9LA0KICAgICAgfSkpLA0KICAgIHJlbW92ZVBhbGxldDogKHBhbGxldElkKSA9Pg0KICAgICAgc2V0KChzdGF0ZSkgPT4gew0KICAgICAgICBjb25zdCBuZXdQYWxsZXRzID0geyAuLi5zdGF0ZS5wYWxsZXRzIH0NCiAgICAgICAgT2JqZWN0LmtleXMobmV3UGFsbGV0cykuZm9yRWFjaCgoYWlzbGVJZCkgPT4gew0KICAgICAgICAgIG5ld1BhbGxldHNbYWlzbGVJZF0gPSBuZXdQYWxsZXRzW2Fpc2xlSWRdLmZpbHRlcigocCkgPT4gcC5pZCAhPT0gcGFsbGV0SWQpDQogICAgICAgIH0pDQogICAgICAgIHJldHVybiB7IHBhbGxldHM6IG5ld1BhbGxldHMgfQ0KICAgICAgfSksDQogICAgdXBkYXRlUGFsbGV0OiAocGFsbGV0SWQsIHVwZGF0ZXMpID0+DQogICAgICBzZXQoKHN0YXRlKSA9PiB7DQogICAgICAgIGNvbnN0IG5ld1BhbGxldHMgPSB7IC4uLnN0YXRlLnBhbGxldHMgfQ0KICAgICAgICBPYmplY3Qua2V5cyhuZXdQYWxsZXRzKS5mb3JFYWNoKChhaXNsZUlkKSA9PiB7DQogICAgICAgICAgbmV3UGFsbGV0c1thaXNsZUlkXSA9IG5ld1BhbGxldHNbYWlzbGVJZF0ubWFwKChwYWxsZXQpID0+DQogICAgICAgICAgICBwYWxsZXQuaWQgPT09IHBhbGxldElkID8geyAuLi5wYWxsZXQsIC4uLnVwZGF0ZXMgfSA6IHBhbGxldCwNCiAgICAgICAgICApDQogICAgICAgIH0pDQogICAgICAgIHJldHVybiB7IHBhbGxldHM6IG5ld1BhbGxldHMgfQ0KICAgICAgfSksDQoNCiAgICAvLyBTaGVsZiBhY3Rpb25zDQogICAgc2V0U2hlbHZlczogKGFpc2xlSWQsIHNoZWx2ZXMpID0+DQogICAgICBzZXQoKHN0YXRlKSA9PiAoew0KICAgICAgICBzaGVsdmVzOiB7IC4uLnN0YXRlLnNoZWx2ZXMsIFthaXNsZUlkXTogc2hlbHZlcyB9LA0KICAgICAgfSkpLA0KICAgIGFkZFNoZWxmOiAoc2hlbGYpID0+DQogICAgICBzZXQoKHN0YXRlKSA9PiAoew0KICAgICAgICBzaGVsdmVzOiB7DQogICAgICAgICAgLi4uc3RhdGUuc2hlbHZlcywNCiAgICAgICAgICBbc2hlbGYuYWlzbGVJZF06IFsuLi4oc3RhdGUuc2hlbHZlc1tzaGVsZi5haXNsZUlkXSB8fCBbXSksIHNoZWxmXSwNCiAgICAgICAgfSwNCiAgICAgIH0pKSwNCiAgICByZW1vdmVTaGVsZjogKHNoZWxmSWQpID0+DQogICAgICBzZXQoKHN0YXRlKSA9PiB7DQogICAgICAgIGNvbnN0IG5ld1NoZWx2ZXMgPSB7IC4uLnN0YXRlLnNoZWx2ZXMgfQ0KICAgICAgICBPYmplY3Qua2V5cyhuZXdTaGVsdmVzKS5mb3JFYWNoKChhaXNsZUlkKSA9PiB7DQogICAgICAgICAgbmV3U2hlbHZlc1thaXNsZUlkXSA9IG5ld1NoZWx2ZXNbYWlzbGVJZF0uZmlsdGVyKChzKSA9PiBzLmlkICE9PSBzaGVsZklkKQ0KICAgICAgICB9KQ0KICAgICAgICByZXR1cm4geyBuZXdTaGVsdmVzIH0NCiAgICAgIH0pLA0KICAgIHVwZGF0ZVNoZWxmOiAoc2hlbGZJZCwgdXBkYXRlcykgPT4NCiAgICAgIHNldCgoc3RhdGUpID0+IHsNCiAgICAgICAgY29uc3QgbmV3U2hlbHZlcyA9IHsgLi4uc3RhdGUuc2hlbHZlcyB9DQogICAgICAgIE9iamVjdC5rZXlzKG5ld1NoZWx2ZXMpLmZvckVhY2goKGFpc2xlSWQpID0+IHsNCiAgICAgICAgICBuZXdTaGVsdmVzW2Fpc2xlSWRdID0gbmV3U2hlbHZlc1thaXNsZUlkXS5tYXAoKHNoZWxmKSA9Pg0KICAgICAgICAgICAgc2hlbGYuaWQgPT09IHNoZWxmSWQgPyB7IC4uLnNoZWxmLCAuLi51cGRhdGVzIH0gOiBzaGVsZiwNCiAgICAgICAgICApDQogICAgICAgIH0pDQogICAgICAgIHJldHVybiB7IHNoZWx2ZXM6IG5ld1NoZWx2ZXMgfQ0KICAgICAgfSksDQoNCiAgICAvLyBTZWFyY2ggYWN0aW9ucw0KICAgIHNldFNlYXJjaFJlc3VsdHM6IChyZXN1bHRzKSA9PiBzZXQoeyBzZWFyY2hSZXN1bHRzOiByZXN1bHRzIH0pLA0KICAgIHNldEFkZHJlc3NTZWFyY2hSZXN1bHQ6IChyZXN1bHQpID0+IHNldCh7IGFkZHJlc3NTZWFyY2hSZXN1bHQ6IHJlc3VsdCB9KSwNCg0KICAgIC8vIExvYWRpbmcgYWN0aW9ucw0KICAgIHNldExvYWRpbmc6IChrZXksIHZhbHVlKSA9Pg0KICAgICAgc2V0KChzdGF0ZSkgPT4gKHsNCiAgICAgICAgbG9hZGluZzogeyAuLi5zdGF0ZS5sb2FkaW5nLCBba2V5XTogdmFsdWUgfSwNCiAgICAgIH0pKSwNCiAgICBzZXROZXN0ZWRMb2FkaW5nOiAoY2F0ZWdvcnksIGtleSwgdmFsdWUpID0+DQogICAgICBzZXQoKHN0YXRlKSA9PiAoew0KICAgICAgICBsb2FkaW5nOiB7DQogICAgICAgICAgLi4uc3RhdGUubG9hZGluZywNCiAgICAgICAgICBbY2F0ZWdvcnldOiB7IC4uLnN0YXRlLmxvYWRpbmdbY2F0ZWdvcnldLCBba2V5XTogdmFsdWUgfSwNCiAgICAgICAgfSwNCiAgICAgIH0pKSwNCiAgfSkpLA0KKQo="}