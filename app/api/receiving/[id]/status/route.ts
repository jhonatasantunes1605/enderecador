{"data":"aW1wb3J0IHsgdHlwZSBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAibmV4dC9zZXJ2ZXIiDQppbXBvcnQgeyB1cGRhdGVSZWNlaXZpbmdTdGF0dXMsIGdldFJlY2VpdmluZ0hpc3RvcnkgfSBmcm9tICJAL2xpYi9yZWNlaXZpbmctZGF0YSINCg0KZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBBVENIKHJlcXVlc3Q6IE5leHRSZXF1ZXN0LCB7IHBhcmFtcyB9OiB7IHBhcmFtczogeyBpZDogc3RyaW5nIH0gfSkgew0KICB0cnkgew0KICAgIGNvbnN0IHsgaWQgfSA9IHBhcmFtcw0KICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKQ0KICAgIGNvbnN0IHsgc3RhdHVzIH0gPSBib2R5DQoNCiAgICBpZiAoIXN0YXR1cyB8fCAhWyJzY2hlZHVsZWQiLCAicmVjZWl2ZWQiXS5pbmNsdWRlcyhzdGF0dXMpKSB7DQogICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogIlN0YXR1cyBpbnbDoWxpZG8iIH0sIHsgc3RhdHVzOiA0MDAgfSkNCiAgICB9DQoNCiAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgdXBkYXRlUmVjZWl2aW5nU3RhdHVzKGlkLCBzdGF0dXMpDQoNCiAgICBpZiAoIXN1Y2Nlc3MpIHsNCiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAiUmVnaXN0cm8gbsOjbyBlbmNvbnRyYWRvIiB9LCB7IHN0YXR1czogNDA0IH0pDQogICAgfQ0KDQogICAgLy8gQnVzY2FyIG8gcmVnaXN0cm8gYXR1YWxpemFkbw0KICAgIGNvbnN0IGhpc3RvcnkgPSBhd2FpdCBnZXRSZWNlaXZpbmdIaXN0b3J5KCkNCiAgICBjb25zdCB1cGRhdGVkUmVjb3JkID0gaGlzdG9yeS5maW5kKChyZWNvcmQpID0+IHJlY29yZC5pZCA9PT0gaWQpDQoNCiAgICBpZiAoIXVwZGF0ZWRSZWNvcmQpIHsNCiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAiRXJybyBhbyBidXNjYXIgcmVnaXN0cm8gYXR1YWxpemFkbyIgfSwgeyBzdGF0dXM6IDUwMCB9KQ0KICAgIH0NCg0KICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih1cGRhdGVkUmVjb3JkKQ0KICB9IGNhdGNoIChlcnJvcikgew0KICAgIGNvbnNvbGUuZXJyb3IoIkVycm8gYW8gYXR1YWxpemFyIHN0YXR1cyBkbyByZWNlYmltZW50bzoiLCBlcnJvcikNCiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogIkVycm8gaW50ZXJubyBkbyBzZXJ2aWRvciIgfSwgeyBzdGF0dXM6IDUwMCB9KQ0KICB9DQp9Cg=="}