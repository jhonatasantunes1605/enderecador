{"data":"aW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAibmV4dC9zZXJ2ZXIiDQppbXBvcnQgeyBnZXRXYXJlaG91c2VzLCBnZXRBaXNsZXNCeVdhcmVob3VzZSwgZ2V0UGFsbGV0c0J5QWlzbGUsIGdldFNoZWx2ZXNCeUFpc2xlIH0gZnJvbSAiQC9saWIvZGF0YSINCg0KaW50ZXJmYWNlIEFkZHJlc3NPcHRpb24gew0KICB2YWx1ZTogc3RyaW5nDQogIGxhYmVsOiBzdHJpbmcNCiAgd2FyZWhvdXNlSWQ6IHN0cmluZw0KICBhaXNsZUlkOiBzdHJpbmcNCiAgbG9jYXRpb25JZDogc3RyaW5nDQogIHN0b3JhZ2VUeXBlOiAicGFsbGV0IiB8ICJzaGVsZiINCn0NCg0KZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHsNCiAgdHJ5IHsNCiAgICBjb25zdCB3YXJlaG91c2VzID0gYXdhaXQgZ2V0V2FyZWhvdXNlcygpDQogICAgY29uc3QgYWRkcmVzc2VzOiBBZGRyZXNzT3B0aW9uW10gPSBbXQ0KDQogICAgZm9yIChjb25zdCB3YXJlaG91c2Ugb2Ygd2FyZWhvdXNlcykgew0KICAgICAgY29uc3QgYWlzbGVzID0gYXdhaXQgZ2V0QWlzbGVzQnlXYXJlaG91c2Uod2FyZWhvdXNlLmlkKQ0KDQogICAgICBmb3IgKGNvbnN0IGFpc2xlIG9mIGFpc2xlcykgew0KICAgICAgICAvLyBFeHRyYWlyIG7Dum1lcm8gZG8gZ2FscMOjbyAoZXg6ICJHYWxww6NvIDE3IiAtPiAiMTciKQ0KICAgICAgICBjb25zdCB3YXJlaG91c2VOdW1iZXIgPSB3YXJlaG91c2UubmFtZS5tYXRjaCgvKFxkKykvKT8uWzFdIHx8IHdhcmVob3VzZS5uYW1lDQogICAgICAgIC8vIEV4dHJhaXIgbsO6bWVybyBkYSBydWEgKGV4OiAiUnVhIDEiIC0+ICIxIikNCiAgICAgICAgY29uc3QgYWlzbGVOdW1iZXIgPSBhaXNsZS5uYW1lLm1hdGNoKC8oXGQrKS8pPy5bMV0gfHwgYWlzbGUubmFtZQ0KDQogICAgICAgIGlmIChhaXNsZS5zdG9yYWdlVHlwZSA9PT0gInBhbGxldCIpIHsNCiAgICAgICAgICBjb25zdCBwYWxsZXRzID0gYXdhaXQgZ2V0UGFsbGV0c0J5QWlzbGUoYWlzbGUuaWQpDQogICAgICAgICAgcGFsbGV0cw0KICAgICAgICAgICAgLmZpbHRlcigocGFsbGV0KSA9PiAhcGFsbGV0LnByb2R1Y3RzIHx8IHBhbGxldC5wcm9kdWN0cy5sZW5ndGggPT09IDApDQogICAgICAgICAgICAuZm9yRWFjaCgocGFsbGV0KSA9PiB7DQogICAgICAgICAgICAgIGNvbnN0IGFkZHJlc3NWYWx1ZSA9IGBBJHt3YXJlaG91c2VOdW1iZXJ9LVIke2Fpc2xlTnVtYmVyfS1QJHtwYWxsZXQucG9zaXRpb259YA0KICAgICAgICAgICAgICBhZGRyZXNzZXMucHVzaCh7DQogICAgICAgICAgICAgICAgdmFsdWU6IGFkZHJlc3NWYWx1ZSwNCiAgICAgICAgICAgICAgICBsYWJlbDogYCR7YWRkcmVzc1ZhbHVlfSAoUGFsZXRlKWAsDQogICAgICAgICAgICAgICAgd2FyZWhvdXNlSWQ6IHdhcmVob3VzZS5pZCwNCiAgICAgICAgICAgICAgICBhaXNsZUlkOiBhaXNsZS5pZCwNCiAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBwYWxsZXQuaWQsDQogICAgICAgICAgICAgICAgc3RvcmFnZVR5cGU6ICJwYWxsZXQiLA0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSBlbHNlIGlmIChhaXNsZS5zdG9yYWdlVHlwZSA9PT0gInNoZWxmIikgew0KICAgICAgICAgIGNvbnN0IHNoZWx2ZXMgPSBhd2FpdCBnZXRTaGVsdmVzQnlBaXNsZShhaXNsZS5pZCkNCiAgICAgICAgICBzaGVsdmVzDQogICAgICAgICAgICAuZmlsdGVyKChzaGVsZikgPT4gIXNoZWxmLnByb2R1Y3RzIHx8IHNoZWxmLnByb2R1Y3RzLmxlbmd0aCA9PT0gMCkNCiAgICAgICAgICAgIC5mb3JFYWNoKChzaGVsZikgPT4gew0KICAgICAgICAgICAgICBjb25zdCBhZGRyZXNzVmFsdWUgPSBgQSR7d2FyZWhvdXNlTnVtYmVyfS1SJHthaXNsZU51bWJlcn0tUCR7c2hlbGYucG9zaXRpb259LUEke3NoZWxmLmxldmVsfWANCiAgICAgICAgICAgICAgYWRkcmVzc2VzLnB1c2goew0KICAgICAgICAgICAgICAgIHZhbHVlOiBhZGRyZXNzVmFsdWUsDQogICAgICAgICAgICAgICAgbGFiZWw6IGAke2FkZHJlc3NWYWx1ZX0gKFByYXRlbGVpcmEpYCwNCiAgICAgICAgICAgICAgICB3YXJlaG91c2VJZDogd2FyZWhvdXNlLmlkLA0KICAgICAgICAgICAgICAgIGFpc2xlSWQ6IGFpc2xlLmlkLA0KICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IHNoZWxmLmlkLA0KICAgICAgICAgICAgICAgIHN0b3JhZ2VUeXBlOiAic2hlbGYiLA0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIE9yZGVuYXIgZW5kZXJlw6dvcyBwb3IgZ2FscMOjbywgcnVhIGUgcG9zacOnw6NvDQogICAgYWRkcmVzc2VzLnNvcnQoKGEsIGIpID0+IGEudmFsdWUubG9jYWxlQ29tcGFyZShiLnZhbHVlKSkNCg0KICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihhZGRyZXNzZXMpDQogIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgY29uc29sZS5lcnJvcigiRXJybyBhbyBidXNjYXIgZW5kZXJlw6dvczoiLCBlcnJvcikNCiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogIkVycm8gaW50ZXJubyBkbyBzZXJ2aWRvciIgfSwgeyBzdGF0dXM6IDUwMCB9KQ0KICB9DQp9Cg=="}