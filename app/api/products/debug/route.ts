{"data":"aW1wb3J0IHsgdHlwZSBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAibmV4dC9zZXJ2ZXIiCmltcG9ydCB7IHByb2R1Y3RzU2hlZXRzU2VydmljZSB9IGZyb20gIkAvbGliL3Byb2R1Y3RzLXNoZWV0cyIKCmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHsKICB0cnkgewogICAgY29uc29sZS5sb2coIltERUJVR10gSW5pY2lhbmRvIGRlYnVnIGRhIHBsYW5pbGhhIGRlIHByb2R1dG9zLi4uIikKCiAgICAvLyBWZXJpZmljYXIgdmFyacOhdmVpcyBkZSBhbWJpZW50ZQogICAgY29uc3QgaGFzU2hlZXRJZCA9ICEhcHJvY2Vzcy5lbnYuR09PR0xFX1BST0RVQ1RTX1NIRUVUX0lECiAgICBjb25zdCBoYXNFbWFpbCA9ICEhcHJvY2Vzcy5lbnYuR09PR0xFX1NFUlZJQ0VfQUNDT1VOVF9FTUFJTAogICAgY29uc3QgaGFzS2V5ID0gISFwcm9jZXNzLmVudi5HT09HTEVfUFJJVkFURV9LRVkKCiAgICBjb25zb2xlLmxvZygiW0RFQlVHXSBWYXJpw6F2ZWlzIGRlIGFtYmllbnRlOiIpCiAgICBjb25zb2xlLmxvZyhgICAtIEdPT0dMRV9QUk9EVUNUU19TSEVFVF9JRDogJHtoYXNTaGVldElkID8gIuKchSBEZWZpbmlkYSIgOiAi4p2MIE7Do28gZGVmaW5pZGEifWApCiAgICBjb25zb2xlLmxvZyhgICAtIEdPT0dMRV9TRVJWSUNFX0FDQ09VTlRfRU1BSUw6ICR7aGFzRW1haWwgPyAi4pyFIERlZmluaWRhIiA6ICLinYwgTsOjbyBkZWZpbmlkYSJ9YCkKICAgIGNvbnNvbGUubG9nKGAgIC0gR09PR0xFX1BSSVZBVEVfS0VZOiAke2hhc0tleSA/ICLinIUgRGVmaW5pZGEiIDogIuKdjCBOw6NvIGRlZmluaWRhIn1gKQoKICAgIGlmICghaGFzU2hlZXRJZCB8fCAhaGFzRW1haWwgfHwgIWhhc0tleSkgewogICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oewogICAgICAgIHN1Y2Nlc3M6IGZhbHNlLAogICAgICAgIG1lc3NhZ2U6ICJWYXJpw6F2ZWlzIGRlIGFtYmllbnRlIG7Do28gY29uZmlndXJhZGFzIiwKICAgICAgICBkZXRhaWxzOiB7IGhhc1NoZWV0SWQsIGhhc0VtYWlsLCBoYXNLZXkgfSwKICAgICAgfSkKICAgIH0KCiAgICAvLyBUZW50YXIgaW5pY2lhbGl6YXIgbyBzZXJ2acOnbwogICAgYXdhaXQgcHJvZHVjdHNTaGVldHNTZXJ2aWNlLmluaXQoKQoKICAgIC8vIEJ1c2NhciBhbGd1bnMgcHJvZHV0b3MgcGFyYSB0ZXN0ZQogICAgY29uc3QgdGVzdEVBTnMgPSBbIjMzMjAxIiwgIjAwMDAwMDAwMDEyMyIsICIwMDEyMzAzOTE0OTUiXQogICAgY29uc3QgcmVzdWx0cyA9IFtdCgogICAgZm9yIChjb25zdCBlYW4gb2YgdGVzdEVBTnMpIHsKICAgICAgY29uc29sZS5sb2coYFtERUJVR10gVGVzdGFuZG8gYnVzY2EgcG9yIEVBTjogJHtlYW59YCkKICAgICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IHByb2R1Y3RzU2hlZXRzU2VydmljZS5maW5kUHJvZHVjdEJ5RUFOKGVhbikKICAgICAgcmVzdWx0cy5wdXNoKHsgZWFuLCBmb3VuZDogISFwcm9kdWN0LCBwcm9kdWN0IH0pCiAgICB9CgogICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsKICAgICAgc3VjY2VzczogdHJ1ZSwKICAgICAgbWVzc2FnZTogIkRlYnVnIGNvbmNsdcOtZG8iLAogICAgICBzaGVldFRpdGxlOiBwcm9kdWN0c1NoZWV0c1NlcnZpY2UuZG9jLnRpdGxlLAogICAgICByZXN1bHRzLAogICAgfSkKICB9IGNhdGNoIChlcnJvcikgewogICAgY29uc29sZS5lcnJvcigiW0RFQlVHXSBFcnJvIGR1cmFudGUgZGVidWc6IiwgZXJyb3IpCiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oCiAgICAgIHsKICAgICAgICBzdWNjZXNzOiBmYWxzZSwKICAgICAgICBtZXNzYWdlOiAiRXJybyBkdXJhbnRlIGRlYnVnIiwKICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAiRXJybyBkZXNjb25oZWNpZG8iLAogICAgICB9LAogICAgICB7IHN0YXR1czogNTAwIH0sCiAgICApCiAgfQp9Cg=="}